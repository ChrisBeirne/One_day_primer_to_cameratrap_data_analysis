<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 14 On your own | An Introduction to Camera Trap Data Management and Analysis in R</title>
  <meta name="description" content="Materials for the three day camera trap data management and analysis course" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 14 On your own | An Introduction to Camera Trap Data Management and Analysis in R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Materials for the three day camera trap data management and analysis course" />
  <meta name="github-repo" content="WildCoLab/Introduction-to-Camera-Trap-Data-Management-and-Analysis-in-R" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 14 On your own | An Introduction to Camera Trap Data Management and Analysis in R" />
  
  <meta name="twitter:description" content="Materials for the three day camera trap data management and analysis course" />
  

<meta name="author" content="Christopher Beirne, the Wildlife Coexistence Lab, UBC, and the WildCam Network" />


<meta name="date" content="2022-10-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="behavior.html"/>
<link rel="next" href="references.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">WildCo Data Analysis Intro</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#ethos"><i class="fa fa-check"></i><b>1.1</b> Ethos</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#what-this-course-is"><i class="fa fa-check"></i><b>1.2</b> What this course is</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#what-this-course-is-not"><i class="fa fa-check"></i><b>1.3</b> What this course is not</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#how-to-use-this-book"><i class="fa fa-check"></i><b>1.4</b> How to use this book</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#get-in-touch"><i class="fa fa-check"></i><b>1.5</b> Get in touch</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i><b>1.6</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="prep.html"><a href="prep.html"><i class="fa fa-check"></i><b>2</b> Preparing for the course</a>
<ul>
<li class="chapter" data-level="2.1" data-path="prep.html"><a href="prep.html#install-r"><i class="fa fa-check"></i><b>2.1</b> Install R</a></li>
<li class="chapter" data-level="2.2" data-path="prep.html"><a href="prep.html#install-rstudio"><i class="fa fa-check"></i><b>2.2</b> Install RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="prep.html"><a href="prep.html#install-the-required-packages"><i class="fa fa-check"></i><b>2.3</b> Install the required packages</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="prep.html"><a href="prep.html#cran-packages"><i class="fa fa-check"></i><b>2.3.1</b> CRAN packages</a></li>
<li class="chapter" data-level="2.3.2" data-path="prep.html"><a href="prep.html#other-packages"><i class="fa fa-check"></i><b>2.3.2</b> Other packages</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="prep.html"><a href="prep.html#create-an-r-project"><i class="fa fa-check"></i><b>2.4</b> Create an R project</a></li>
<li class="chapter" data-level="2.5" data-path="prep.html"><a href="prep.html#download-the-data-files"><i class="fa fa-check"></i><b>2.5</b> Download the data files</a></li>
<li class="chapter" data-level="2.6" data-path="prep.html"><a href="prep.html#the-example-datasets"><i class="fa fa-check"></i><b>2.6</b> The example datasets</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="prep.html"><a href="prep.html#example_data"><i class="fa fa-check"></i><b>2.6.1</b> example_data</a></li>
<li class="chapter" data-level="2.6.2" data-path="prep.html"><a href="prep.html#your_data"><i class="fa fa-check"></i><b>2.6.2</b> your_data</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="prep.html"><a href="prep.html#a-bonus-non-essential-package"><i class="fa fa-check"></i><b>2.7</b> A bonus, non essential, package</a></li>
<li class="chapter" data-level="2.8" data-path="prep.html"><a href="prep.html#practise-before-the-course"><i class="fa fa-check"></i><b>2.8</b> Practise before the course</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html"><i class="fa fa-check"></i><b>3</b> Preprocessing and labelling</a>
<ul>
<li class="chapter" data-level="3.1" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#data-storage"><i class="fa fa-check"></i><b>3.1</b> Data storage</a></li>
<li class="chapter" data-level="3.2" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#preprocessing"><i class="fa fa-check"></i><b>3.2</b> Preprocessing</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#renaming"><i class="fa fa-check"></i><b>3.2.1</b> Renaming</a></li>
<li class="chapter" data-level="3.2.2" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#automated-labelers"><i class="fa fa-check"></i><b>3.2.2</b> Automated Labelers</a></li>
<li class="chapter" data-level="3.2.3" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#sensitive-images"><i class="fa fa-check"></i><b>3.2.3</b> Sensitive images</a></li>
<li class="chapter" data-level="3.2.4" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#timelapse-extraction"><i class="fa fa-check"></i><b>3.2.4</b> Timelapse extraction</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#labelling"><i class="fa fa-check"></i><b>3.3</b> Labelling</a></li>
<li class="chapter" data-level="3.4" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#end-dates-and-outages"><i class="fa fa-check"></i><b>3.4</b> End dates and outages</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="standard.html"><a href="standard.html"><i class="fa fa-check"></i><b>4</b> Metadata standardisation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="standard.html"><a href="standard.html#the-wildlife-insights-minimum-metadata-standards"><i class="fa fa-check"></i><b>4.1</b> The Wildlife Insights Minimum Metadata Standards</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="standard.html"><a href="standard.html#project-data"><i class="fa fa-check"></i><b>4.1.1</b> Project data</a></li>
<li class="chapter" data-level="4.1.2" data-path="standard.html"><a href="standard.html#image-data"><i class="fa fa-check"></i><b>4.1.2</b> Image data</a></li>
<li class="chapter" data-level="4.1.3" data-path="standard.html"><a href="standard.html#deployment-data"><i class="fa fa-check"></i><b>4.1.3</b> Deployment data</a></li>
<li class="chapter" data-level="4.1.4" data-path="standard.html"><a href="standard.html#camera-inventory"><i class="fa fa-check"></i><b>4.1.4</b> Camera inventory</a></li>
<li class="chapter" data-level="4.1.5" data-path="standard.html"><a href="standard.html#important-note"><i class="fa fa-check"></i><b>4.1.5</b> Important note</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="error-checking.html"><a href="error-checking.html"><i class="fa fa-check"></i><b>5</b> Error checking</a>
<ul>
<li class="chapter" data-level="5.1" data-path="error-checking.html"><a href="error-checking.html#standardised-exploration-script"><i class="fa fa-check"></i><b>5.1</b> Standardised exploration script</a></li>
<li class="chapter" data-level="5.2" data-path="error-checking.html"><a href="error-checking.html#formatting-dates"><i class="fa fa-check"></i><b>5.2</b> Formatting dates</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="error-checking.html"><a href="error-checking.html#skill-check-lubridate"><i class="fa fa-check"></i><b>5.2.1</b> Skill check: <code>lubridate</code></a></li>
<li class="chapter" data-level="5.2.2" data-path="error-checking.html"><a href="error-checking.html#deployment-dates"><i class="fa fa-check"></i><b>5.2.2</b> Deployment dates</a></li>
<li class="chapter" data-level="5.2.3" data-path="error-checking.html"><a href="error-checking.html#image-dates"><i class="fa fa-check"></i><b>5.2.3</b> Image dates</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="error-checking.html"><a href="error-checking.html#basic-trapping-summaries"><i class="fa fa-check"></i><b>5.3</b> Basic trapping summaries</a></li>
<li class="chapter" data-level="5.4" data-path="error-checking.html"><a href="error-checking.html#error-checks"><i class="fa fa-check"></i><b>5.4</b> Error checks</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="error-checking.html"><a href="error-checking.html#camera-locations"><i class="fa fa-check"></i><b>5.4.1</b> Camera locations</a></li>
<li class="chapter" data-level="5.4.2" data-path="error-checking.html"><a href="error-checking.html#camera-activity-checks"><i class="fa fa-check"></i><b>5.4.2</b> Camera activity checks</a></li>
<li class="chapter" data-level="5.4.3" data-path="error-checking.html"><a href="error-checking.html#detection-check"><i class="fa fa-check"></i><b>5.4.3</b> Detection check</a></li>
<li class="chapter" data-level="5.4.4" data-path="error-checking.html"><a href="error-checking.html#taxonomy-check"><i class="fa fa-check"></i><b>5.4.4</b> Taxonomy check</a></li>
<li class="chapter" data-level="5.4.5" data-path="error-checking.html"><a href="error-checking.html#skill-check-taxise-package"><i class="fa fa-check"></i><b>5.4.5</b> Skill Check: Taxise package</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="error-checking.html"><a href="error-checking.html#diel-activity-check"><i class="fa fa-check"></i><b>5.5</b> Diel activity check</a></li>
<li class="chapter" data-level="5.6" data-path="error-checking.html"><a href="error-checking.html#conclusion"><i class="fa fa-check"></i><b>5.6</b> Conclusion</a></li>
<li class="chapter" data-level="5.7" data-path="error-checking.html"><a href="error-checking.html#common-analysis-data-formats"><i class="fa fa-check"></i><b>5.7</b> Common analysis data formats</a></li>
<li class="chapter" data-level="5.8" data-path="error-checking.html"><a href="error-checking.html#independent-detections"><i class="fa fa-check"></i><b>5.8</b> Independent detections</a></li>
<li class="chapter" data-level="5.9" data-path="error-checking.html"><a href="error-checking.html#effort-look-up"><i class="fa fa-check"></i><b>5.9</b> Effort look-up</a></li>
<li class="chapter" data-level="5.10" data-path="error-checking.html"><a href="error-checking.html#observations-by-time-interval"><i class="fa fa-check"></i><b>5.10</b> Observations by time interval</a></li>
<li class="chapter" data-level="5.11" data-path="error-checking.html"><a href="error-checking.html#our-data"><i class="fa fa-check"></i><b>5.11</b> Our data</a>
<ul>
<li class="chapter" data-level="5.11.1" data-path="error-checking.html"><a href="error-checking.html#filter-to-target-species"><i class="fa fa-check"></i><b>5.11.1</b> Filter to target species</a></li>
<li class="chapter" data-level="5.11.2" data-path="error-checking.html"><a href="error-checking.html#create-a-daily-camera-activity-lookup"><i class="fa fa-check"></i><b>5.11.2</b> Create a daily camera activity lookup</a></li>
<li class="chapter" data-level="5.11.3" data-path="error-checking.html"><a href="error-checking.html#determine-independent-camera-detections"><i class="fa fa-check"></i><b>5.11.3</b> Determine ‘independent’ camera detections</a></li>
<li class="chapter" data-level="5.11.4" data-path="error-checking.html"><a href="error-checking.html#add-additional-data"><i class="fa fa-check"></i><b>5.11.4</b> Add additional data</a></li>
</ul></li>
<li class="chapter" data-level="5.12" data-path="error-checking.html"><a href="error-checking.html#creating-analysis-dataframes"><i class="fa fa-check"></i><b>5.12</b> Creating analysis dataframes</a>
<ul>
<li class="chapter" data-level="5.12.1" data-path="error-checking.html"><a href="error-checking.html#final-data-check"><i class="fa fa-check"></i><b>5.12.1</b> Final data check</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="covariates.html"><a href="covariates.html"><i class="fa fa-check"></i><b>6</b> Analysis covariates</a>
<ul>
<li class="chapter" data-level="6.1" data-path="covariates.html"><a href="covariates.html#species-traits"><i class="fa fa-check"></i><b>6.1</b> Species traits</a></li>
<li class="chapter" data-level="6.2" data-path="covariates.html"><a href="covariates.html#camera-station-covariates"><i class="fa fa-check"></i><b>6.2</b> Camera station covariates</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="covariates.html"><a href="covariates.html#locally-collected-covariates"><i class="fa fa-check"></i><b>6.2.1</b> Locally collected covariates</a></li>
<li class="chapter" data-level="6.2.2" data-path="covariates.html"><a href="covariates.html#remotely-collected-covariates"><i class="fa fa-check"></i><b>6.2.2</b> Remotely collected covariates</a></li>
<li class="chapter" data-level="6.2.3" data-path="covariates.html"><a href="covariates.html#extracting-data-from-local-rasters"><i class="fa fa-check"></i><b>6.2.3</b> Extracting data from local rasters</a></li>
<li class="chapter" data-level="6.2.4" data-path="covariates.html"><a href="covariates.html#elevatr-package"><i class="fa fa-check"></i><b>6.2.4</b> elevatr package</a></li>
<li class="chapter" data-level="6.2.5" data-path="covariates.html"><a href="covariates.html#open-street-maps"><i class="fa fa-check"></i><b>6.2.5</b> Open Street Maps</a></li>
<li class="chapter" data-level="6.2.6" data-path="covariates.html"><a href="covariates.html#vegetation-productivity"><i class="fa fa-check"></i><b>6.2.6</b> Vegetation productivity</a></li>
<li class="chapter" data-level="6.2.7" data-path="covariates.html"><a href="covariates.html#digging-deeper"><i class="fa fa-check"></i><b>6.2.7</b> Digging deeper</a></li>
<li class="chapter" data-level="6.2.8" data-path="covariates.html"><a href="covariates.html#google-earth-engine"><i class="fa fa-check"></i><b>6.2.8</b> Google Earth Engine</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="covariates.html"><a href="covariates.html#convert-and-save-your-covariates"><i class="fa fa-check"></i><b>6.3</b> Convert and save your covariates</a></li>
<li class="chapter" data-level="6.4" data-path="covariates.html"><a href="covariates.html#correlations-between-predictors"><i class="fa fa-check"></i><b>6.4</b> Correlations between predictors</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="exploration.html"><a href="exploration.html"><i class="fa fa-check"></i><b>7</b> Analysis data exploration</a>
<ul>
<li class="chapter" data-level="7.1" data-path="exploration.html"><a href="exploration.html#final-locations-plot"><i class="fa fa-check"></i><b>7.1</b> Final locations plot</a></li>
<li class="chapter" data-level="7.2" data-path="exploration.html"><a href="exploration.html#independent-detections-summary"><i class="fa fa-check"></i><b>7.2</b> Independent detections summary</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="exploration.html"><a href="exploration.html#total-number-of-captures"><i class="fa fa-check"></i><b>7.2.1</b> Total number of captures</a></li>
<li class="chapter" data-level="7.2.2" data-path="exploration.html"><a href="exploration.html#raw-occupancy"><i class="fa fa-check"></i><b>7.2.2</b> Raw occupancy</a></li>
<li class="chapter" data-level="7.2.3" data-path="exploration.html"><a href="exploration.html#comparison-plot"><i class="fa fa-check"></i><b>7.2.3</b> Comparison plot</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="exploration.html"><a href="exploration.html#temporal-patterns-in-capture-rates"><i class="fa fa-check"></i><b>7.3</b> Temporal patterns in capture rates</a></li>
<li class="chapter" data-level="7.4" data-path="exploration.html"><a href="exploration.html#species-specific-capture-rates"><i class="fa fa-check"></i><b>7.4</b> Species-specific capture rates</a></li>
<li class="chapter" data-level="7.5" data-path="exploration.html"><a href="exploration.html#spatial-patterns-in-capture-rates"><i class="fa fa-check"></i><b>7.5</b> Spatial patterns in capture rates</a></li>
<li class="chapter" data-level="7.6" data-path="exploration.html"><a href="exploration.html#species-co-occurences"><i class="fa fa-check"></i><b>7.6</b> Species co-occurences</a></li>
<li class="chapter" data-level="7.7" data-path="exploration.html"><a href="exploration.html#covariate-plots"><i class="fa fa-check"></i><b>7.7</b> Covariate plots</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="exploration.html"><a href="exploration.html#continuous-predictors"><i class="fa fa-check"></i><b>7.7.1</b> Continuous predictors</a></li>
<li class="chapter" data-level="7.7.2" data-path="exploration.html"><a href="exploration.html#catagorical-predictors"><i class="fa fa-check"></i><b>7.7.2</b> Catagorical predictors</a></li>
<li class="chapter" data-level="7.7.3" data-path="exploration.html"><a href="exploration.html#do-your-own-exploration"><i class="fa fa-check"></i><b>7.7.3</b> Do your own exploration</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="composition.html"><a href="composition.html"><i class="fa fa-check"></i><b>8</b> Community composition</a>
<ul>
<li class="chapter" data-level="8.1" data-path="composition.html"><a href="composition.html#observed-richness"><i class="fa fa-check"></i><b>8.1</b> Observed richness</a></li>
<li class="chapter" data-level="8.2" data-path="composition.html"><a href="composition.html#estimated-richness"><i class="fa fa-check"></i><b>8.2</b> Estimated richness</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="composition.html"><a href="composition.html#inext-package"><i class="fa fa-check"></i><b>8.2.1</b> iNext package</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="composition.html"><a href="composition.html#basic-results-plot"><i class="fa fa-check"></i><b>8.3</b> Basic results plot</a></li>
<li class="chapter" data-level="8.4" data-path="composition.html"><a href="composition.html#sampling-unit-based-accumulation-curves"><i class="fa fa-check"></i><b>8.4</b> Sampling-unit-based accumulation curves</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="composition.html"><a href="composition.html#survey-station-example"><i class="fa fa-check"></i><b>8.4.1</b> Survey station example</a></li>
<li class="chapter" data-level="8.4.2" data-path="composition.html"><a href="composition.html#sampling-duration-example"><i class="fa fa-check"></i><b>8.4.2</b> Sampling duration example</a></li>
<li class="chapter" data-level="8.4.3" data-path="composition.html"><a href="composition.html#on-your-own"><i class="fa fa-check"></i><b>8.4.3</b> On your own</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="composition.html"><a href="composition.html#other-diversity-metrics"><i class="fa fa-check"></i><b>8.5</b> Other diversity metrics</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="composition.html"><a href="composition.html#simpson-and-shannon"><i class="fa fa-check"></i><b>8.5.1</b> Simpson and Shannon</a></li>
<li class="chapter" data-level="8.5.2" data-path="composition.html"><a href="composition.html#more-examples-in-the-literature"><i class="fa fa-check"></i><b>8.5.2</b> More examples in the literature</a></li>
<li class="chapter" data-level="8.5.3" data-path="composition.html"><a href="composition.html#multispecies-occupancy-model"><i class="fa fa-check"></i><b>8.5.3</b> Multispecies occupancy model</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="composition.html"><a href="composition.html#community-structure"><i class="fa fa-check"></i><b>8.6</b> Community structure</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="composition.html"><a href="composition.html#extracting-data-for-plotting"><i class="fa fa-check"></i><b>8.6.1</b> Extracting data for plotting</a></li>
<li class="chapter" data-level="8.6.2" data-path="composition.html"><a href="composition.html#on-your-own-1"><i class="fa fa-check"></i><b>8.6.2</b> On your own</a></li>
<li class="chapter" data-level="8.6.3" data-path="composition.html"><a href="composition.html#examples-in-the-literature"><i class="fa fa-check"></i><b>8.6.3</b> Examples in the literature</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="habitat-use.html"><a href="habitat-use.html"><i class="fa fa-check"></i><b>9</b> Habitat use</a>
<ul>
<li class="chapter" data-level="9.1" data-path="habitat-use.html"><a href="habitat-use.html#calculating-capture-rate"><i class="fa fa-check"></i><b>9.1</b> Calculating capture rate</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="habitat-use.html"><a href="habitat-use.html#examples-from-the-literature"><i class="fa fa-check"></i><b>9.1.1</b> Examples from the literature</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="habitat-use.html"><a href="habitat-use.html#single-species-models"><i class="fa fa-check"></i><b>9.2</b> Single-species models</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="habitat-use.html"><a href="habitat-use.html#simple-linear-model"><i class="fa fa-check"></i><b>9.2.1</b> Simple linear model</a></li>
<li class="chapter" data-level="9.2.2" data-path="habitat-use.html"><a href="habitat-use.html#catagorical-predictor"><i class="fa fa-check"></i><b>9.2.2</b> Catagorical predictor</a></li>
<li class="chapter" data-level="9.2.3" data-path="habitat-use.html"><a href="habitat-use.html#continuous-predictor"><i class="fa fa-check"></i><b>9.2.3</b> Continuous predictor</a></li>
<li class="chapter" data-level="9.2.4" data-path="habitat-use.html"><a href="habitat-use.html#model-comparisons"><i class="fa fa-check"></i><b>9.2.4</b> Model comparisons</a></li>
<li class="chapter" data-level="9.2.5" data-path="habitat-use.html"><a href="habitat-use.html#problems-with-these-models"><i class="fa fa-check"></i><b>9.2.5</b> Problems with these models</a></li>
<li class="chapter" data-level="9.2.6" data-path="habitat-use.html"><a href="habitat-use.html#mixed-effects-models"><i class="fa fa-check"></i><b>9.2.6</b> Mixed-effects models</a></li>
<li class="chapter" data-level="9.2.7" data-path="habitat-use.html"><a href="habitat-use.html#on-your-own-2"><i class="fa fa-check"></i><b>9.2.7</b> On your own</a></li>
<li class="chapter" data-level="9.2.8" data-path="habitat-use.html"><a href="habitat-use.html#advanced-mixed-model-predictions"><i class="fa fa-check"></i><b>9.2.8</b> Advanced mixed-model predictions</a></li>
<li class="chapter" data-level="9.2.9" data-path="habitat-use.html"><a href="habitat-use.html#examples-in-the-literature-1"><i class="fa fa-check"></i><b>9.2.9</b> Examples in the literature</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="habitat-use.html"><a href="habitat-use.html#multispecies-models"><i class="fa fa-check"></i><b>9.3</b> Multispecies models</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="habitat-use.html"><a href="habitat-use.html#potential-dangers"><i class="fa fa-check"></i><b>9.3.1</b> Potential dangers</a></li>
<li class="chapter" data-level="9.3.2" data-path="habitat-use.html"><a href="habitat-use.html#further-reading"><i class="fa fa-check"></i><b>9.3.2</b> Further reading</a></li>
<li class="chapter" data-level="9.3.3" data-path="habitat-use.html"><a href="habitat-use.html#examples-in-the-literature-2"><i class="fa fa-check"></i><b>9.3.3</b> Examples in the literature</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="occupancy.html"><a href="occupancy.html"><i class="fa fa-check"></i><b>10</b> Occupancy</a>
<ul>
<li class="chapter" data-level="10.1" data-path="occupancy.html"><a href="occupancy.html#single-species-occupancy-model"><i class="fa fa-check"></i><b>10.1</b> Single species occupancy model</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="occupancy.html"><a href="occupancy.html#unmarked-package"><i class="fa fa-check"></i><b>10.1.1</b> Unmarked package</a></li>
<li class="chapter" data-level="10.1.2" data-path="occupancy.html"><a href="occupancy.html#plotting-predictions"><i class="fa fa-check"></i><b>10.1.2</b> Plotting predictions</a></li>
<li class="chapter" data-level="10.1.3" data-path="occupancy.html"><a href="occupancy.html#on-your-own-3"><i class="fa fa-check"></i><b>10.1.3</b> On your own</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="occupancy.html"><a href="occupancy.html#spatial-occupancy-model-spoccupancy"><i class="fa fa-check"></i><b>10.2</b> Spatial occupancy model: spOccupancy</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="occupancy.html"><a href="occupancy.html#multi-species-model"><i class="fa fa-check"></i><b>10.2.1</b> Multi species model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="activity.html"><a href="activity.html"><i class="fa fa-check"></i><b>11</b> Activity</a>
<ul>
<li class="chapter" data-level="11.1" data-path="activity.html"><a href="activity.html#independent-detections-or-raw-data"><i class="fa fa-check"></i><b>11.1</b> Independent detections or raw data?</a></li>
<li class="chapter" data-level="11.2" data-path="activity.html"><a href="activity.html#data-formatting"><i class="fa fa-check"></i><b>11.2</b> Data formatting</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="activity.html"><a href="activity.html#accounting-for-sunrise-and-sunset"><i class="fa fa-check"></i><b>11.2.1</b> Accounting for sunrise and sunset</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="activity.html"><a href="activity.html#species-comparisons"><i class="fa fa-check"></i><b>11.3</b> Species comparisons</a></li>
<li class="chapter" data-level="11.4" data-path="activity.html"><a href="activity.html#treatment-comparisons"><i class="fa fa-check"></i><b>11.4</b> Treatment comparisons</a></li>
<li class="chapter" data-level="11.5" data-path="activity.html"><a href="activity.html#on-your-own-4"><i class="fa fa-check"></i><b>11.5</b> On your own</a></li>
<li class="chapter" data-level="11.6" data-path="activity.html"><a href="activity.html#selected-further-reading"><i class="fa fa-check"></i><b>11.6</b> Selected further reading</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="density.html"><a href="density.html"><i class="fa fa-check"></i><b>12</b> Density</a>
<ul>
<li class="chapter" data-level="12.1" data-path="density.html"><a href="density.html#individually-identifiable-individuals"><i class="fa fa-check"></i><b>12.1</b> Individually identifiable individuals</a></li>
<li class="chapter" data-level="12.2" data-path="density.html"><a href="density.html#unmarked-animals"><i class="fa fa-check"></i><b>12.2</b> Unmarked animals</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="density.html"><a href="density.html#random-encounter-model"><i class="fa fa-check"></i><b>12.2.1</b> Random encounter model</a></li>
<li class="chapter" data-level="12.2.2" data-path="density.html"><a href="density.html#moose"><i class="fa fa-check"></i><b>12.2.2</b> Moose</a></li>
<li class="chapter" data-level="12.2.3" data-path="density.html"><a href="density.html#wolf"><i class="fa fa-check"></i><b>12.2.3</b> Wolf</a></li>
<li class="chapter" data-level="12.2.4" data-path="density.html"><a href="density.html#time-to-event-space-to-event-density-estimates"><i class="fa fa-check"></i><b>12.2.4</b> Time to event / Space to event density estimates</a></li>
<li class="chapter" data-level="12.2.5" data-path="density.html"><a href="density.html#n-mixture-model-in-unmarked"><i class="fa fa-check"></i><b>12.2.5</b> N-mixture model in unmarked</a></li>
<li class="chapter" data-level="12.2.6" data-path="density.html"><a href="density.html#abmi-method"><i class="fa fa-check"></i><b>12.2.6</b> ABMI Method</a></li>
<li class="chapter" data-level="12.2.7" data-path="density.html"><a href="density.html#unmarked-spatial-capture-recapture-uscr"><i class="fa fa-check"></i><b>12.2.7</b> Unmarked spatial capture recapture (uSCR)</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="density.html"><a href="density.html#future-directions"><i class="fa fa-check"></i><b>12.3</b> Future directions</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="behavior.html"><a href="behavior.html"><i class="fa fa-check"></i><b>13</b> Behavior</a>
<ul>
<li class="chapter" data-level="13.1" data-path="behavior.html"><a href="behavior.html#behavioural-designations"><i class="fa fa-check"></i><b>13.1</b> Behavioural designations</a></li>
<li class="chapter" data-level="13.2" data-path="behavior.html"><a href="behavior.html#event-duration"><i class="fa fa-check"></i><b>13.2</b> Event duration</a></li>
<li class="chapter" data-level="13.3" data-path="behavior.html"><a href="behavior.html#animal-speed-and-day-range"><i class="fa fa-check"></i><b>13.3</b> Animal speed and day range</a></li>
<li class="chapter" data-level="13.4" data-path="behavior.html"><a href="behavior.html#experimental-manipulations"><i class="fa fa-check"></i><b>13.4</b> Experimental manipulations</a></li>
<li class="chapter" data-level="13.5" data-path="behavior.html"><a href="behavior.html#interactions"><i class="fa fa-check"></i><b>13.5</b> Interactions</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="behavior.html"><a href="behavior.html#activity-overlap"><i class="fa fa-check"></i><b>13.5.1</b> Activity overlap</a></li>
<li class="chapter" data-level="13.5.2" data-path="behavior.html"><a href="behavior.html#one-species-as-a-predictor-of-another"><i class="fa fa-check"></i><b>13.5.2</b> One species as a predictor of another</a></li>
<li class="chapter" data-level="13.5.3" data-path="behavior.html"><a href="behavior.html#residual-co-occurence-models"><i class="fa fa-check"></i><b>13.5.3</b> Residual co-occurence models</a></li>
<li class="chapter" data-level="13.5.4" data-path="behavior.html"><a href="behavior.html#attractance-avoidance-ratios-aar"><i class="fa fa-check"></i><b>13.5.4</b> Attractance-Avoidance Ratios (AAR)</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="behavior.html"><a href="behavior.html#worked-examples"><i class="fa fa-check"></i><b>13.6</b> Worked examples</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="on-your-own-5.html"><a href="on-your-own-5.html"><i class="fa fa-check"></i><b>14</b> On your own</a>
<ul>
<li class="chapter" data-level="14.1" data-path="on-your-own-5.html"><a href="on-your-own-5.html#the-new-dataset"><i class="fa fa-check"></i><b>14.1</b> The new dataset</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to Camera Trap Data Management and Analysis in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="on-your-own-5" class="section level1 hasAnchor" number="14">
<h1><span class="header-section-number">Chapter 14</span> On your own<a href="on-your-own-5.html#on-your-own-5" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Congratulations! You made it to the end of the planned content in one peice.</p>
<p>You now have the opportunity to apply some of the skills you have learnt to a completely new database. Cut and paste your code from previous chapters to check the data, write the analysis date frames and explore the dataset.</p>
<p>I will help you read in the data - and correct a mistake I made. Then you are on your own!</p>
<div id="the-new-dataset" class="section level2 hasAnchor" number="14.1">
<h2><span class="header-section-number">14.1</span> The new dataset<a href="on-your-own-5.html#the-new-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r Rmain"><code class="sourceCode r"><span id="cb1-1"><a href="on-your-own-5.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load your data </span></span>
<span id="cb1-2"><a href="on-your-own-5.html#cb1-2" aria-hidden="true" tabindex="-1"></a>pro <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/raw_data/your_data/proj.csv&quot;</span>, <span class="at">header=</span>T)</span>
<span id="cb1-3"><a href="on-your-own-5.html#cb1-3" aria-hidden="true" tabindex="-1"></a>pro<span class="sc">$</span>project_id <span class="ot">&lt;-</span> pro<span class="sc">$</span>project_name</span>
<span id="cb1-4"><a href="on-your-own-5.html#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="on-your-own-5.html#cb1-5" aria-hidden="true" tabindex="-1"></a>img <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/raw_data/your_data/img.csv&quot;</span>, <span class="at">header=</span>T)</span>
<span id="cb1-6"><a href="on-your-own-5.html#cb1-6" aria-hidden="true" tabindex="-1"></a>img<span class="sc">$</span>project_id <span class="ot">&lt;-</span> pro<span class="sc">$</span>project_name</span>
<span id="cb1-7"><a href="on-your-own-5.html#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="on-your-own-5.html#cb1-8" aria-hidden="true" tabindex="-1"></a>dep <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/raw_data/your_data/dep.csv&quot;</span>, <span class="at">header=</span>T)</span>
<span id="cb1-9"><a href="on-your-own-5.html#cb1-9" aria-hidden="true" tabindex="-1"></a>dep<span class="sc">$</span>project_id <span class="ot">&lt;-</span> pro<span class="sc">$</span>project_name</span>
<span id="cb1-10"><a href="on-your-own-5.html#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="on-your-own-5.html#cb1-11" aria-hidden="true" tabindex="-1"></a>cam <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/raw_data/your_data/cam.csv&quot;</span>, <span class="at">header=</span>T)</span>
<span id="cb1-12"><a href="on-your-own-5.html#cb1-12" aria-hidden="true" tabindex="-1"></a>cam<span class="sc">$</span>project_id <span class="ot">&lt;-</span> pro<span class="sc">$</span>project_name</span></code></pre></div>
<p>Load your packages:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r Rmain"><code class="sourceCode r"><span id="cb2-1"><a href="on-your-own-5.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A list of the required packages</span></span>
<span id="cb2-2"><a href="on-your-own-5.html#cb2-2" aria-hidden="true" tabindex="-1"></a>list.of.packages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;activity&quot;</span>, <span class="st">&quot;corrplot&quot;</span>, <span class="st">&quot;cowplot&quot;</span>, <span class="st">&quot;dplyr&quot;</span>,  <span class="st">&quot;elevatr&quot;</span>, <span class="st">&quot;gfcanalysis&quot;</span>,   <span class="st">&quot;ggplot2&quot;</span>, <span class="st">&quot;gridExtra&quot;</span>, <span class="st">&quot;iNEXT&quot;</span>, <span class="st">&quot;kableExtra&quot;</span>, <span class="st">&quot;Hmsc&quot;</span>, <span class="st">&quot;leaflet&quot;</span>, <span class="st">&quot;lme4&quot;</span>, <span class="st">&quot;lubridate&quot;</span>, <span class="st">&quot;magrittr&quot;</span>, <span class="st">&quot;MCMCvis&quot;</span>, <span class="st">&quot;MODISTools&quot;</span>, <span class="st">&quot;osmdata&quot;</span>, <span class="st">&quot;pals&quot;</span>, <span class="st">&quot;plotly&quot;</span>, <span class="st">&quot;remotes&quot;</span>, <span class="st">&quot;rmarkdown&quot;</span>, <span class="st">&quot;sf&quot;</span>, <span class="st">&quot;spOccupancy&quot;</span>, <span class="st">&quot;stars&quot;</span>, <span class="st">&quot;stringr&quot;</span>, <span class="st">&quot;terra&quot;</span>, <span class="st">&quot;tibble&quot;</span>, <span class="st">&quot;tidyr&quot;</span>,  <span class="st">&quot;unmarked&quot;</span>, <span class="st">&quot;viridis&quot;</span>, <span class="st">&quot;jtools&quot;</span>, <span class="st">&quot;vegan&quot;</span>, <span class="st">&quot;MuMIn&quot;</span>)</span>
<span id="cb2-3"><a href="on-your-own-5.html#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="on-your-own-5.html#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A check to see which ones you have and which are missing</span></span>
<span id="cb2-5"><a href="on-your-own-5.html#cb2-5" aria-hidden="true" tabindex="-1"></a>new.packages <span class="ot">&lt;-</span> list.of.packages[<span class="sc">!</span>(list.of.packages <span class="sc">%in%</span> <span class="fu">installed.packages</span>()[,<span class="st">&quot;Package&quot;</span>])]</span>
<span id="cb2-6"><a href="on-your-own-5.html#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="on-your-own-5.html#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Code which tells R to install the missing packages</span></span>
<span id="cb2-8"><a href="on-your-own-5.html#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">length</span>(new.packages)) <span class="fu">install.packages</span>(new.packages)</span>
<span id="cb2-9"><a href="on-your-own-5.html#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(list.of.packages, require, <span class="at">character.only =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Away you go!</p>
<p>Emergency code if you get stuck!</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="on-your-own-5.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># start dates</span></span>
<span id="cb3-2"><a href="on-your-own-5.html#cb3-2" aria-hidden="true" tabindex="-1"></a>dep<span class="sc">$</span>start_date <span class="ot">&lt;-</span> <span class="fu">ymd</span>(dep<span class="sc">$</span>start_date)</span>
<span id="cb3-3"><a href="on-your-own-5.html#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="on-your-own-5.html#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># end dates</span></span>
<span id="cb3-5"><a href="on-your-own-5.html#cb3-5" aria-hidden="true" tabindex="-1"></a>dep<span class="sc">$</span>end_date   <span class="ot">&lt;-</span> <span class="fu">ymd</span>(dep<span class="sc">$</span>end_date)</span>
<span id="cb3-6"><a href="on-your-own-5.html#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="on-your-own-5.html#cb3-7" aria-hidden="true" tabindex="-1"></a>dep<span class="sc">$</span>days <span class="ot">&lt;-</span> <span class="fu">interval</span>(dep<span class="sc">$</span>start_date, dep<span class="sc">$</span>end_date)<span class="sc">/</span><span class="fu">ddays</span>(<span class="dv">1</span>)</span>
<span id="cb3-8"><a href="on-your-own-5.html#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="on-your-own-5.html#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="on-your-own-5.html#cb3-10" aria-hidden="true" tabindex="-1"></a>img<span class="sc">$</span>timestamp <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(img<span class="sc">$</span>timestamp)</span>
<span id="cb3-11"><a href="on-your-own-5.html#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="on-your-own-5.html#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="on-your-own-5.html#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co"># First, set a single categorical variable of interest from station covariates for summary graphs. If you do not have an appropriate category use &quot;project_id&quot;.</span></span>
<span id="cb3-14"><a href="on-your-own-5.html#cb3-14" aria-hidden="true" tabindex="-1"></a>category <span class="ot">&lt;-</span> <span class="st">&quot;feature_type&quot;</span></span>
<span id="cb3-15"><a href="on-your-own-5.html#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="on-your-own-5.html#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co"># We first convert this category to a factor with discrete levels</span></span>
<span id="cb3-17"><a href="on-your-own-5.html#cb3-17" aria-hidden="true" tabindex="-1"></a>dep[,category] <span class="ot">&lt;-</span> <span class="fu">factor</span>(dep[,category])</span>
<span id="cb3-18"><a href="on-your-own-5.html#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co"># then use the turbo() function to assign each level a color</span></span>
<span id="cb3-19"><a href="on-your-own-5.html#cb3-19" aria-hidden="true" tabindex="-1"></a>col.cat <span class="ot">&lt;-</span> <span class="fu">turbo</span>(<span class="fu">length</span>(<span class="fu">levels</span>(dep[,category])))</span>
<span id="cb3-20"><a href="on-your-own-5.html#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co"># then we apply it to the dataframe</span></span>
<span id="cb3-21"><a href="on-your-own-5.html#cb3-21" aria-hidden="true" tabindex="-1"></a>dep<span class="sc">$</span>colours <span class="ot">&lt;-</span> col.cat[dep[,category]]</span>
<span id="cb3-22"><a href="on-your-own-5.html#cb3-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-23"><a href="on-your-own-5.html#cb3-23" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">leaflet</span>() <span class="sc">%&gt;%</span></span>
<span id="cb3-24"><a href="on-your-own-5.html#cb3-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(providers<span class="sc">$</span>Esri.WorldImagery, <span class="at">group=</span><span class="st">&quot;Satellite&quot;</span>) <span class="sc">%&gt;%</span>  </span>
<span id="cb3-25"><a href="on-your-own-5.html#cb3-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>(<span class="at">group=</span><span class="st">&quot;Base&quot;</span>) <span class="sc">%&gt;%</span>     <span class="co"># Include a basemap option too</span></span>
<span id="cb3-26"><a href="on-your-own-5.html#cb3-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addCircleMarkers</span>(<span class="at">lng=</span>dep<span class="sc">$</span>longitude, <span class="at">lat=</span>dep<span class="sc">$</span>latitude,</span>
<span id="cb3-27"><a href="on-your-own-5.html#cb3-27" aria-hidden="true" tabindex="-1"></a>                   <span class="co"># Co lour the markers depending on the &#39;feature type&#39;</span></span>
<span id="cb3-28"><a href="on-your-own-5.html#cb3-28" aria-hidden="true" tabindex="-1"></a>                   <span class="at">color=</span>dep<span class="sc">$</span>colours,</span>
<span id="cb3-29"><a href="on-your-own-5.html#cb3-29" aria-hidden="true" tabindex="-1"></a>                   <span class="co"># Add a popup of the placename and feature_type together </span></span>
<span id="cb3-30"><a href="on-your-own-5.html#cb3-30" aria-hidden="true" tabindex="-1"></a>                   <span class="at">popup=</span><span class="fu">paste</span>(dep<span class="sc">$</span>placename, dep[,category])) <span class="sc">%&gt;%</span></span>
<span id="cb3-31"><a href="on-your-own-5.html#cb3-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-32"><a href="on-your-own-5.html#cb3-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a legend explaining what is going on</span></span>
<span id="cb3-33"><a href="on-your-own-5.html#cb3-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addLegend</span>(<span class="st">&quot;bottomleft&quot;</span>, <span class="at">colors =</span> col.cat,  <span class="at">labels =</span> <span class="fu">levels</span>(dep[,category]),</span>
<span id="cb3-34"><a href="on-your-own-5.html#cb3-34" aria-hidden="true" tabindex="-1"></a>                   <span class="at">title =</span> category,</span>
<span id="cb3-35"><a href="on-your-own-5.html#cb3-35" aria-hidden="true" tabindex="-1"></a>                   <span class="at">labFormat =</span> <span class="fu">labelFormat</span>(<span class="at">prefix =</span> <span class="st">&quot;$&quot;</span>),</span>
<span id="cb3-36"><a href="on-your-own-5.html#cb3-36" aria-hidden="true" tabindex="-1"></a>                   <span class="at">opacity =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-37"><a href="on-your-own-5.html#cb3-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-38"><a href="on-your-own-5.html#cb3-38" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add a layer control box to toggle between the layers</span></span>
<span id="cb3-39"><a href="on-your-own-5.html#cb3-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addLayersControl</span>(</span>
<span id="cb3-40"><a href="on-your-own-5.html#cb3-40" aria-hidden="true" tabindex="-1"></a>                    <span class="at">baseGroups =</span> <span class="fu">c</span>(<span class="st">&quot;Satellite&quot;</span>, <span class="st">&quot;Base&quot;</span>))</span>
<span id="cb3-41"><a href="on-your-own-5.html#cb3-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-42"><a href="on-your-own-5.html#cb3-42" aria-hidden="true" tabindex="-1"></a>m</span>
<span id="cb3-43"><a href="on-your-own-5.html#cb3-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-44"><a href="on-your-own-5.html#cb3-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-45"><a href="on-your-own-5.html#cb3-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Distance between traps</span></span>
<span id="cb3-46"><a href="on-your-own-5.html#cb3-46" aria-hidden="true" tabindex="-1"></a>camera_locs <span class="ot">&lt;-</span> dep <span class="sc">%&gt;%</span> </span>
<span id="cb3-47"><a href="on-your-own-5.html#cb3-47" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(placename, latitude, longitude) <span class="sc">%&gt;%</span> </span>
<span id="cb3-48"><a href="on-your-own-5.html#cb3-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="co"># remove duplicated rows (rows where the placename and coordinates match)</span></span>
<span id="cb3-49"><a href="on-your-own-5.html#cb3-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;latitude&quot;</span>), <span class="at">crs =</span> <span class="st">&quot;+proj=longlat&quot;</span>) <span class="co"># Convert to `sf` format</span></span>
<span id="cb3-50"><a href="on-your-own-5.html#cb3-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-51"><a href="on-your-own-5.html#cb3-51" aria-hidden="true" tabindex="-1"></a>camera_dist <span class="ot">&lt;-</span> <span class="fu">st_distance</span>(camera_locs) <span class="sc">%&gt;%</span> </span>
<span id="cb3-52"><a href="on-your-own-5.html#cb3-52" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">as.dist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb3-53"><a href="on-your-own-5.html#cb3-53" aria-hidden="true" tabindex="-1"></a>                  usedist<span class="sc">::</span><span class="fu">dist_setNames</span>(<span class="fu">as.character</span>(camera_locs<span class="sc">$</span>placename)) <span class="sc">%&gt;%</span> </span>
<span id="cb3-54"><a href="on-your-own-5.html#cb3-54" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">as.matrix</span>()</span>
<span id="cb3-55"><a href="on-your-own-5.html#cb3-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-56"><a href="on-your-own-5.html#cb3-56" aria-hidden="true" tabindex="-1"></a><span class="co"># convert to pairwise list</span></span>
<span id="cb3-57"><a href="on-your-own-5.html#cb3-57" aria-hidden="true" tabindex="-1"></a>camera_dist_list <span class="ot">&lt;-</span> <span class="fu">t</span>(<span class="fu">combn</span>(<span class="fu">colnames</span>(camera_dist), <span class="dv">2</span>))</span>
<span id="cb3-58"><a href="on-your-own-5.html#cb3-58" aria-hidden="true" tabindex="-1"></a>camera_dist_list <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(camera_dist_list, <span class="at">dist =</span> camera_dist[camera_dist_list]) <span class="sc">%&gt;%</span> </span>
<span id="cb3-59"><a href="on-your-own-5.html#cb3-59" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">arrange</span>(dist) <span class="co"># sort descending</span></span>
<span id="cb3-60"><a href="on-your-own-5.html#cb3-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-61"><a href="on-your-own-5.html#cb3-61" aria-hidden="true" tabindex="-1"></a><span class="co"># keep just the closest camera for each location</span></span>
<span id="cb3-62"><a href="on-your-own-5.html#cb3-62" aria-hidden="true" tabindex="-1"></a>camera_dist_list <span class="ot">&lt;-</span> camera_dist_list <span class="sc">%&gt;%</span> </span>
<span id="cb3-63"><a href="on-your-own-5.html#cb3-63" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">group_by</span>(X1) <span class="sc">%&gt;%</span> </span>
<span id="cb3-64"><a href="on-your-own-5.html#cb3-64" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">slice</span>(<span class="fu">which.min</span>(dist))</span>
<span id="cb3-65"><a href="on-your-own-5.html#cb3-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-66"><a href="on-your-own-5.html#cb3-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-67"><a href="on-your-own-5.html#cb3-67" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(camera_dist_list<span class="sc">$</span>dist)</span>
<span id="cb3-68"><a href="on-your-own-5.html#cb3-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-69"><a href="on-your-own-5.html#cb3-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-70"><a href="on-your-own-5.html#cb3-70" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">unique</span>(img<span class="sc">$</span>placename) <span class="sc">%in%</span> <span class="fu">unique</span>(dep<span class="sc">$</span>placename))</span>
<span id="cb3-71"><a href="on-your-own-5.html#cb3-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-72"><a href="on-your-own-5.html#cb3-72" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">unique</span>(dep<span class="sc">$</span>placename)  <span class="sc">%in%</span> <span class="fu">unique</span>(img<span class="sc">$</span>placename))</span>
<span id="cb3-73"><a href="on-your-own-5.html#cb3-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-74"><a href="on-your-own-5.html#cb3-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-75"><a href="on-your-own-5.html#cb3-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-76"><a href="on-your-own-5.html#cb3-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-77"><a href="on-your-own-5.html#cb3-77" aria-hidden="true" tabindex="-1"></a>dep[<span class="sc">!</span>dep<span class="sc">$</span>placename <span class="sc">%in%</span> img<span class="sc">$</span>placename,]</span>
<span id="cb3-78"><a href="on-your-own-5.html#cb3-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-79"><a href="on-your-own-5.html#cb3-79" aria-hidden="true" tabindex="-1"></a><span class="co"># One station missing, we will remove it have to fix!</span></span>
<span id="cb3-80"><a href="on-your-own-5.html#cb3-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-81"><a href="on-your-own-5.html#cb3-81" aria-hidden="true" tabindex="-1"></a>dep[<span class="sc">!</span>(dep<span class="sc">$</span>placename <span class="sc">%in%</span> img<span class="sc">$</span>placename),] <span class="co"># Lets remove it from our dataset</span></span>
<span id="cb3-82"><a href="on-your-own-5.html#cb3-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-83"><a href="on-your-own-5.html#cb3-83" aria-hidden="true" tabindex="-1"></a>dep <span class="ot">&lt;-</span> dep[dep<span class="sc">$</span>placename<span class="sc">!=</span><span class="st">&quot;LAC065&quot;</span>,]</span>
<span id="cb3-84"><a href="on-your-own-5.html#cb3-84" aria-hidden="true" tabindex="-1"></a>dep <span class="ot">&lt;-</span> dep[dep<span class="sc">$</span>placename<span class="sc">!=</span><span class="st">&quot;OFF065&quot;</span>,]</span>
<span id="cb3-85"><a href="on-your-own-5.html#cb3-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-86"><a href="on-your-own-5.html#cb3-86" aria-hidden="true" tabindex="-1"></a><span class="co"># Activity check</span></span>
<span id="cb3-87"><a href="on-your-own-5.html#cb3-87" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct the brken deploymenrt</span></span>
<span id="cb3-88"><a href="on-your-own-5.html#cb3-88" aria-hidden="true" tabindex="-1"></a><span class="co">#dep[dep$deployment_id==&quot;LAC065_C187_030222&quot;, ]$end_date &lt;- &quot;2022-05-22&quot;</span></span>
<span id="cb3-89"><a href="on-your-own-5.html#cb3-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-90"><a href="on-your-own-5.html#cb3-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-91"><a href="on-your-own-5.html#cb3-91" aria-hidden="true" tabindex="-1"></a><span class="co"># Call the plot</span></span>
<span id="cb3-92"><a href="on-your-own-5.html#cb3-92" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>()</span>
<span id="cb3-93"><a href="on-your-own-5.html#cb3-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-94"><a href="on-your-own-5.html#cb3-94" aria-hidden="true" tabindex="-1"></a><span class="co"># We want a separate row for each &#39;placename&#39; - so lets turn it into a factor</span></span>
<span id="cb3-95"><a href="on-your-own-5.html#cb3-95" aria-hidden="true" tabindex="-1"></a>dep<span class="sc">$</span>placename <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(dep<span class="sc">$</span>placename)</span>
<span id="cb3-96"><a href="on-your-own-5.html#cb3-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-97"><a href="on-your-own-5.html#cb3-97" aria-hidden="true" tabindex="-1"></a><span class="co"># loop through each place name</span></span>
<span id="cb3-98"><a href="on-your-own-5.html#cb3-98" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(<span class="fu">levels</span>(dep<span class="sc">$</span>placename)))</span>
<span id="cb3-99"><a href="on-your-own-5.html#cb3-99" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb3-100"><a href="on-your-own-5.html#cb3-100" aria-hidden="true" tabindex="-1"></a>      <span class="co">#Subset the data to just that placename</span></span>
<span id="cb3-101"><a href="on-your-own-5.html#cb3-101" aria-hidden="true" tabindex="-1"></a>      tmp <span class="ot">&lt;-</span> dep[dep<span class="sc">$</span>placename<span class="sc">==</span><span class="fu">levels</span>(dep<span class="sc">$</span>placename)[i],]</span>
<span id="cb3-102"><a href="on-your-own-5.html#cb3-102" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Order by date</span></span>
<span id="cb3-103"><a href="on-your-own-5.html#cb3-103" aria-hidden="true" tabindex="-1"></a>      tmp <span class="ot">&lt;-</span> tmp[<span class="fu">order</span>(tmp<span class="sc">$</span>start_date),]</span>
<span id="cb3-104"><a href="on-your-own-5.html#cb3-104" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Loop through each deployment at that placename</span></span>
<span id="cb3-105"><a href="on-your-own-5.html#cb3-105" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(tmp))</span>
<span id="cb3-106"><a href="on-your-own-5.html#cb3-106" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb3-107"><a href="on-your-own-5.html#cb3-107" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Add a line to &#39;p&#39;</span></span>
<span id="cb3-108"><a href="on-your-own-5.html#cb3-108" aria-hidden="true" tabindex="-1"></a>        p <span class="ot">&lt;-</span> <span class="fu">add_trace</span>(p, </span>
<span id="cb3-109"><a href="on-your-own-5.html#cb3-109" aria-hidden="true" tabindex="-1"></a>                       <span class="co">#Use the start and end date as x coordinates</span></span>
<span id="cb3-110"><a href="on-your-own-5.html#cb3-110" aria-hidden="true" tabindex="-1"></a>                       <span class="at">x =</span> <span class="fu">c</span>(tmp<span class="sc">$</span>start_date[j], tmp<span class="sc">$</span>end_date[j]), </span>
<span id="cb3-111"><a href="on-your-own-5.html#cb3-111" aria-hidden="true" tabindex="-1"></a>                       <span class="co">#Use the counter for the y coordinates</span></span>
<span id="cb3-112"><a href="on-your-own-5.html#cb3-112" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> <span class="fu">c</span>(i,i), </span>
<span id="cb3-113"><a href="on-your-own-5.html#cb3-113" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># State the type of chart</span></span>
<span id="cb3-114"><a href="on-your-own-5.html#cb3-114" aria-hidden="true" tabindex="-1"></a>                       <span class="at">type=</span><span class="st">&quot;scatter&quot;</span>,</span>
<span id="cb3-115"><a href="on-your-own-5.html#cb3-115" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># make a line that also has points</span></span>
<span id="cb3-116"><a href="on-your-own-5.html#cb3-116" aria-hidden="true" tabindex="-1"></a>                       <span class="at">mode =</span> <span class="st">&quot;lines+markers&quot;</span>, </span>
<span id="cb3-117"><a href="on-your-own-5.html#cb3-117" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># Add the deployment ID as hover text</span></span>
<span id="cb3-118"><a href="on-your-own-5.html#cb3-118" aria-hidden="true" tabindex="-1"></a>                       <span class="at">hovertext=</span>tmp<span class="sc">$</span>deployment_id[j], </span>
<span id="cb3-119"><a href="on-your-own-5.html#cb3-119" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># Color it all black</span></span>
<span id="cb3-120"><a href="on-your-own-5.html#cb3-120" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color=</span><span class="fu">I</span>(<span class="st">&quot;black&quot;</span>), </span>
<span id="cb3-121"><a href="on-your-own-5.html#cb3-121" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># Suppress the legend</span></span>
<span id="cb3-122"><a href="on-your-own-5.html#cb3-122" aria-hidden="true" tabindex="-1"></a>                       <span class="at">showlegend =</span> <span class="cn">FALSE</span>)</span>
<span id="cb3-123"><a href="on-your-own-5.html#cb3-123" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb3-124"><a href="on-your-own-5.html#cb3-124" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-125"><a href="on-your-own-5.html#cb3-125" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-126"><a href="on-your-own-5.html#cb3-126" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a categorical y axis</span></span>
<span id="cb3-127"><a href="on-your-own-5.html#cb3-127" aria-hidden="true" tabindex="-1"></a> p <span class="ot">&lt;-</span> p <span class="sc">%&gt;%</span>   <span class="fu">layout</span>(<span class="at">yaxis =</span> <span class="fu">list</span>(</span>
<span id="cb3-128"><a href="on-your-own-5.html#cb3-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-129"><a href="on-your-own-5.html#cb3-129" aria-hidden="true" tabindex="-1"></a>      <span class="at">ticktext =</span> <span class="fu">as.list</span>(<span class="fu">levels</span>(dep<span class="sc">$</span>placename)), </span>
<span id="cb3-130"><a href="on-your-own-5.html#cb3-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-131"><a href="on-your-own-5.html#cb3-131" aria-hidden="true" tabindex="-1"></a>      <span class="at">tickvals =</span> <span class="fu">as.list</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">levels</span>(dep<span class="sc">$</span>placename))),</span>
<span id="cb3-132"><a href="on-your-own-5.html#cb3-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-133"><a href="on-your-own-5.html#cb3-133" aria-hidden="true" tabindex="-1"></a>      <span class="at">tickmode =</span> <span class="st">&quot;array&quot;</span>))</span>
<span id="cb3-134"><a href="on-your-own-5.html#cb3-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-135"><a href="on-your-own-5.html#cb3-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-136"><a href="on-your-own-5.html#cb3-136" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb3-137"><a href="on-your-own-5.html#cb3-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-138"><a href="on-your-own-5.html#cb3-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-139"><a href="on-your-own-5.html#cb3-139" aria-hidden="true" tabindex="-1"></a><span class="do">#################</span></span>
<span id="cb3-140"><a href="on-your-own-5.html#cb3-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-141"><a href="on-your-own-5.html#cb3-141" aria-hidden="true" tabindex="-1"></a><span class="co"># add an sp column to the img dataframe - remember the genus and species columns are not pasted together yet</span></span>
<span id="cb3-142"><a href="on-your-own-5.html#cb3-142" aria-hidden="true" tabindex="-1"></a>img<span class="sc">$</span>sp <span class="ot">&lt;-</span> <span class="fu">paste</span>(img<span class="sc">$</span>genus, img<span class="sc">$</span>species)</span>
<span id="cb3-143"><a href="on-your-own-5.html#cb3-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-144"><a href="on-your-own-5.html#cb3-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-145"><a href="on-your-own-5.html#cb3-145" aria-hidden="true" tabindex="-1"></a><span class="do">### Species lists</span></span>
<span id="cb3-146"><a href="on-your-own-5.html#cb3-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-147"><a href="on-your-own-5.html#cb3-147" aria-hidden="true" tabindex="-1"></a><span class="co"># First define vector of the headings you want to see (we will use this trick a lot later on)</span></span>
<span id="cb3-148"><a href="on-your-own-5.html#cb3-148" aria-hidden="true" tabindex="-1"></a>taxonomy_headings <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;class&quot;</span>, <span class="st">&quot;order&quot;</span>, <span class="st">&quot;family&quot;</span>, <span class="st">&quot;genus&quot;</span>, <span class="st">&quot;species&quot;</span>, <span class="st">&quot;common_name&quot;</span>)</span>
<span id="cb3-149"><a href="on-your-own-5.html#cb3-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-150"><a href="on-your-own-5.html#cb3-150" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset the image data to just those columns</span></span>
<span id="cb3-151"><a href="on-your-own-5.html#cb3-151" aria-hidden="true" tabindex="-1"></a>tmp<span class="ot">&lt;-</span> img[,<span class="fu">colnames</span>(img)<span class="sc">%in%</span> taxonomy_headings]</span>
<span id="cb3-152"><a href="on-your-own-5.html#cb3-152" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove duplicates</span></span>
<span id="cb3-153"><a href="on-your-own-5.html#cb3-153" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> tmp[<span class="fu">duplicated</span>(tmp)<span class="sc">==</span>F,]</span>
<span id="cb3-154"><a href="on-your-own-5.html#cb3-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-155"><a href="on-your-own-5.html#cb3-155" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an ordered species list</span></span>
<span id="cb3-156"><a href="on-your-own-5.html#cb3-156" aria-hidden="true" tabindex="-1"></a>sp_list  <span class="ot">&lt;-</span> tmp[<span class="fu">order</span>(tmp<span class="sc">$</span>class, tmp<span class="sc">$</span>order, tmp<span class="sc">$</span>family, tmp<span class="sc">$</span>genus, tmp<span class="sc">$</span>species),]</span>
<span id="cb3-157"><a href="on-your-own-5.html#cb3-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-158"><a href="on-your-own-5.html#cb3-158" aria-hidden="true" tabindex="-1"></a><span class="do">### DETCTION CHECK</span></span>
<span id="cb3-159"><a href="on-your-own-5.html#cb3-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-160"><a href="on-your-own-5.html#cb3-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-161"><a href="on-your-own-5.html#cb3-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-162"><a href="on-your-own-5.html#cb3-162" aria-hidden="true" tabindex="-1"></a><span class="co">#Camera activity plot</span></span>
<span id="cb3-163"><a href="on-your-own-5.html#cb3-163" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a separate plot for each 20 stations For each 20 stations</span></span>
<span id="cb3-164"><a href="on-your-own-5.html#cb3-164" aria-hidden="true" tabindex="-1"></a><span class="co"># To do this make a plot dataframe</span></span>
<span id="cb3-165"><a href="on-your-own-5.html#cb3-165" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">&quot;deployment_id&quot;</span><span class="ot">=</span><span class="fu">unique</span>(dep<span class="sc">$</span>deployment_id), <span class="st">&quot;plot_group&quot;</span><span class="ot">=</span><span class="fu">ceiling</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">unique</span>(dep<span class="sc">$</span>deployment_id))<span class="sc">/</span><span class="dv">20</span>))</span>
<span id="cb3-166"><a href="on-your-own-5.html#cb3-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-167"><a href="on-your-own-5.html#cb3-167" aria-hidden="true" tabindex="-1"></a>dep_tmp <span class="ot">&lt;-</span> <span class="fu">left_join</span>(dep,tmp, <span class="at">by=</span><span class="st">&quot;deployment_id&quot;</span>)</span>
<span id="cb3-168"><a href="on-your-own-5.html#cb3-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-169"><a href="on-your-own-5.html#cb3-169" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">max</span>(dep_tmp<span class="sc">$</span>plot_group))</span>
<span id="cb3-170"><a href="on-your-own-5.html#cb3-170" aria-hidden="true" tabindex="-1"></a>{  </span>
<span id="cb3-171"><a href="on-your-own-5.html#cb3-171" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Call the plot</span></span>
<span id="cb3-172"><a href="on-your-own-5.html#cb3-172" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>() </span>
<span id="cb3-173"><a href="on-your-own-5.html#cb3-173" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-174"><a href="on-your-own-5.html#cb3-174" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Subset the data to just that placename</span></span>
<span id="cb3-175"><a href="on-your-own-5.html#cb3-175" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> dep_tmp[dep_tmp<span class="sc">$</span>plot_group<span class="sc">==</span>i,]</span>
<span id="cb3-176"><a href="on-your-own-5.html#cb3-176" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Order by placename </span></span>
<span id="cb3-177"><a href="on-your-own-5.html#cb3-177" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> tmp[<span class="fu">order</span>(tmp<span class="sc">$</span>placename),]</span>
<span id="cb3-178"><a href="on-your-own-5.html#cb3-178" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-179"><a href="on-your-own-5.html#cb3-179" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb3-180"><a href="on-your-own-5.html#cb3-180" aria-hidden="true" tabindex="-1"></a> <span class="co"># Loop through each deployment at that placename</span></span>
<span id="cb3-181"><a href="on-your-own-5.html#cb3-181" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(tmp))</span>
<span id="cb3-182"><a href="on-your-own-5.html#cb3-182" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb3-183"><a href="on-your-own-5.html#cb3-183" aria-hidden="true" tabindex="-1"></a>        <span class="co">#Subset the image data</span></span>
<span id="cb3-184"><a href="on-your-own-5.html#cb3-184" aria-hidden="true" tabindex="-1"></a>        tmp_img <span class="ot">&lt;-</span> img[img<span class="sc">$</span>deployment_id<span class="sc">==</span>tmp<span class="sc">$</span>deployment_id[j],]</span>
<span id="cb3-185"><a href="on-your-own-5.html#cb3-185" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-186"><a href="on-your-own-5.html#cb3-186" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="fu">nrow</span>(tmp_img)<span class="sc">&gt;</span><span class="dv">0</span>)</span>
<span id="cb3-187"><a href="on-your-own-5.html#cb3-187" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb3-188"><a href="on-your-own-5.html#cb3-188" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb3-189"><a href="on-your-own-5.html#cb3-189" aria-hidden="true" tabindex="-1"></a>          p <span class="ot">&lt;-</span> <span class="fu">add_trace</span>(p, </span>
<span id="cb3-190"><a href="on-your-own-5.html#cb3-190" aria-hidden="true" tabindex="-1"></a>                       <span class="co">#Use the start and end date as x coordinates</span></span>
<span id="cb3-191"><a href="on-your-own-5.html#cb3-191" aria-hidden="true" tabindex="-1"></a>                       <span class="at">x =</span> <span class="fu">c</span>(tmp_img<span class="sc">$</span>timestamp), </span>
<span id="cb3-192"><a href="on-your-own-5.html#cb3-192" aria-hidden="true" tabindex="-1"></a>                       <span class="co">#Use the counter for the y coordinates</span></span>
<span id="cb3-193"><a href="on-your-own-5.html#cb3-193" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> <span class="fu">rep</span>(j, <span class="fu">nrow</span>(tmp_img)), </span>
<span id="cb3-194"><a href="on-your-own-5.html#cb3-194" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># State the type of chart</span></span>
<span id="cb3-195"><a href="on-your-own-5.html#cb3-195" aria-hidden="true" tabindex="-1"></a>                       <span class="at">type=</span><span class="st">&quot;scatter&quot;</span>,</span>
<span id="cb3-196"><a href="on-your-own-5.html#cb3-196" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># make a line that also has points</span></span>
<span id="cb3-197"><a href="on-your-own-5.html#cb3-197" aria-hidden="true" tabindex="-1"></a>                       <span class="at">mode =</span> <span class="st">&quot;markers&quot;</span>, </span>
<span id="cb3-198"><a href="on-your-own-5.html#cb3-198" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># Add the deployment ID as hover text</span></span>
<span id="cb3-199"><a href="on-your-own-5.html#cb3-199" aria-hidden="true" tabindex="-1"></a>                       <span class="at">hovertext=</span><span class="fu">paste</span>(tmp_img<span class="sc">$</span>genus,tmp_img<span class="sc">$</span>species), </span>
<span id="cb3-200"><a href="on-your-own-5.html#cb3-200" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># Color it all black</span></span>
<span id="cb3-201"><a href="on-your-own-5.html#cb3-201" aria-hidden="true" tabindex="-1"></a>                       <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">&quot;red&quot;</span>), </span>
<span id="cb3-202"><a href="on-your-own-5.html#cb3-202" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># Suppress the legend</span></span>
<span id="cb3-203"><a href="on-your-own-5.html#cb3-203" aria-hidden="true" tabindex="-1"></a>                       <span class="at">showlegend =</span> <span class="cn">FALSE</span>)</span>
<span id="cb3-204"><a href="on-your-own-5.html#cb3-204" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-205"><a href="on-your-own-5.html#cb3-205" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-206"><a href="on-your-own-5.html#cb3-206" aria-hidden="true" tabindex="-1"></a>       <span class="co"># Add a line to &#39;p&#39;</span></span>
<span id="cb3-207"><a href="on-your-own-5.html#cb3-207" aria-hidden="true" tabindex="-1"></a>        p <span class="ot">&lt;-</span> <span class="fu">add_trace</span>(p, </span>
<span id="cb3-208"><a href="on-your-own-5.html#cb3-208" aria-hidden="true" tabindex="-1"></a>                       <span class="co">#Use the start and end date as x coordinates</span></span>
<span id="cb3-209"><a href="on-your-own-5.html#cb3-209" aria-hidden="true" tabindex="-1"></a>                       <span class="at">x =</span> <span class="fu">c</span>(tmp<span class="sc">$</span>start_date[j], tmp<span class="sc">$</span>end_date[j]), </span>
<span id="cb3-210"><a href="on-your-own-5.html#cb3-210" aria-hidden="true" tabindex="-1"></a>                       <span class="co">#Use the counter for the y coordinates</span></span>
<span id="cb3-211"><a href="on-your-own-5.html#cb3-211" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> <span class="fu">c</span>(j,j), </span>
<span id="cb3-212"><a href="on-your-own-5.html#cb3-212" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># State the type of chart</span></span>
<span id="cb3-213"><a href="on-your-own-5.html#cb3-213" aria-hidden="true" tabindex="-1"></a>                       <span class="at">type=</span><span class="st">&quot;scatter&quot;</span>,</span>
<span id="cb3-214"><a href="on-your-own-5.html#cb3-214" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># make a line that also has points</span></span>
<span id="cb3-215"><a href="on-your-own-5.html#cb3-215" aria-hidden="true" tabindex="-1"></a>                       <span class="at">mode =</span> <span class="st">&quot;lines&quot;</span>, </span>
<span id="cb3-216"><a href="on-your-own-5.html#cb3-216" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># Add the deployment ID as hover text</span></span>
<span id="cb3-217"><a href="on-your-own-5.html#cb3-217" aria-hidden="true" tabindex="-1"></a>                       <span class="at">hovertext=</span>tmp<span class="sc">$</span>deployment_id[j], </span>
<span id="cb3-218"><a href="on-your-own-5.html#cb3-218" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># Color it all black</span></span>
<span id="cb3-219"><a href="on-your-own-5.html#cb3-219" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color=</span><span class="fu">I</span>(<span class="st">&quot;black&quot;</span>), </span>
<span id="cb3-220"><a href="on-your-own-5.html#cb3-220" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># Suppress the legend</span></span>
<span id="cb3-221"><a href="on-your-own-5.html#cb3-221" aria-hidden="true" tabindex="-1"></a>                       <span class="at">showlegend =</span> <span class="cn">FALSE</span>)</span>
<span id="cb3-222"><a href="on-your-own-5.html#cb3-222" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb3-223"><a href="on-your-own-5.html#cb3-223" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add custom y axis labels  </span></span>
<span id="cb3-224"><a href="on-your-own-5.html#cb3-224" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> p <span class="sc">%&gt;%</span>   <span class="fu">layout</span>(<span class="at">yaxis =</span> <span class="fu">list</span>(</span>
<span id="cb3-225"><a href="on-your-own-5.html#cb3-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-226"><a href="on-your-own-5.html#cb3-226" aria-hidden="true" tabindex="-1"></a>      <span class="at">ticktext =</span> <span class="fu">as.list</span>(tmp<span class="sc">$</span>deployment_id), </span>
<span id="cb3-227"><a href="on-your-own-5.html#cb3-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-228"><a href="on-your-own-5.html#cb3-228" aria-hidden="true" tabindex="-1"></a>      <span class="at">tickvals =</span> <span class="fu">as.list</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(tmp)),</span>
<span id="cb3-229"><a href="on-your-own-5.html#cb3-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-230"><a href="on-your-own-5.html#cb3-230" aria-hidden="true" tabindex="-1"></a>      <span class="at">tickmode =</span> <span class="st">&quot;array&quot;</span>))</span>
<span id="cb3-231"><a href="on-your-own-5.html#cb3-231" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-232"><a href="on-your-own-5.html#cb3-232" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(p)</span>
<span id="cb3-233"><a href="on-your-own-5.html#cb3-233" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-234"><a href="on-your-own-5.html#cb3-234" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-235"><a href="on-your-own-5.html#cb3-235" aria-hidden="true" tabindex="-1"></a>} </span>
<span id="cb3-236"><a href="on-your-own-5.html#cb3-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-237"><a href="on-your-own-5.html#cb3-237" aria-hidden="true" tabindex="-1"></a><span class="do">##### Already got common names dont worry about that</span></span>
<span id="cb3-238"><a href="on-your-own-5.html#cb3-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-239"><a href="on-your-own-5.html#cb3-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-240"><a href="on-your-own-5.html#cb3-240" aria-hidden="true" tabindex="-1"></a><span class="co"># First lets convert our timestamp to decimal hours</span></span>
<span id="cb3-241"><a href="on-your-own-5.html#cb3-241" aria-hidden="true" tabindex="-1"></a>img<span class="sc">$</span>hours <span class="ot">&lt;-</span> <span class="fu">hour</span>(img<span class="sc">$</span>timestamp) <span class="sc">+</span> <span class="fu">minute</span>(img<span class="sc">$</span>timestamp)<span class="sc">/</span><span class="dv">60</span> <span class="sc">+</span> <span class="fu">second</span>(img<span class="sc">$</span>timestamp)<span class="sc">/</span>(<span class="dv">60</span><span class="sc">*</span><span class="dv">60</span>)</span>
<span id="cb3-242"><a href="on-your-own-5.html#cb3-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-243"><a href="on-your-own-5.html#cb3-243" aria-hidden="true" tabindex="-1"></a><span class="co"># Count all of the captures</span></span>
<span id="cb3-244"><a href="on-your-own-5.html#cb3-244" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> img <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(common_name) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">count=</span><span class="fu">n</span>())</span>
<span id="cb3-245"><a href="on-your-own-5.html#cb3-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-246"><a href="on-your-own-5.html#cb3-246" aria-hidden="true" tabindex="-1"></a>yform <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">categoryorder =</span> <span class="st">&quot;array&quot;</span>,</span>
<span id="cb3-247"><a href="on-your-own-5.html#cb3-247" aria-hidden="true" tabindex="-1"></a>              <span class="at">categoryarray =</span> tmp<span class="sc">$</span>common_name)</span>
<span id="cb3-248"><a href="on-your-own-5.html#cb3-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-249"><a href="on-your-own-5.html#cb3-249" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(<span class="at">x =</span> img<span class="sc">$</span>hours, <span class="at">y =</span> img<span class="sc">$</span>common_name,<span class="at">type=</span><span class="st">&quot;scatter&quot;</span>,</span>
<span id="cb3-250"><a href="on-your-own-5.html#cb3-250" aria-hidden="true" tabindex="-1"></a>               <span class="at">height=</span><span class="dv">1000</span>, <span class="at">text=</span>img<span class="sc">$</span>deployment_id, <span class="at">hoverinfo=</span><span class="st">&#39;text&#39;</span>,</span>
<span id="cb3-251"><a href="on-your-own-5.html#cb3-251" aria-hidden="true" tabindex="-1"></a>               <span class="at">mode   =</span> <span class="st">&#39;markers&#39;</span>,</span>
<span id="cb3-252"><a href="on-your-own-5.html#cb3-252" aria-hidden="true" tabindex="-1"></a>               <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">5</span>,</span>
<span id="cb3-253"><a href="on-your-own-5.html#cb3-253" aria-hidden="true" tabindex="-1"></a>                             <span class="at">color =</span> <span class="st">&#39;rgba(50, 100, 255, .2)&#39;</span>,</span>
<span id="cb3-254"><a href="on-your-own-5.html#cb3-254" aria-hidden="true" tabindex="-1"></a>                             <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">&#39;rgba(0, 0, 0, 0)&#39;</span>,</span>
<span id="cb3-255"><a href="on-your-own-5.html#cb3-255" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">width =</span> <span class="dv">0</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb3-256"><a href="on-your-own-5.html#cb3-256" aria-hidden="true" tabindex="-1"></a>              <span class="fu">layout</span>(<span class="at">yaxis =</span> yform)</span>
<span id="cb3-257"><a href="on-your-own-5.html#cb3-257" aria-hidden="true" tabindex="-1"></a>fig</span>
<span id="cb3-258"><a href="on-your-own-5.html#cb3-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-259"><a href="on-your-own-5.html#cb3-259" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove the column</span></span>
<span id="cb3-260"><a href="on-your-own-5.html#cb3-260" aria-hidden="true" tabindex="-1"></a>img<span class="sc">$</span>hours <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb3-261"><a href="on-your-own-5.html#cb3-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-262"><a href="on-your-own-5.html#cb3-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-263"><a href="on-your-own-5.html#cb3-263" aria-hidden="true" tabindex="-1"></a><span class="do">#####################################</span></span>
<span id="cb3-264"><a href="on-your-own-5.html#cb3-264" aria-hidden="true" tabindex="-1"></a><span class="do">#####################################</span></span>
<span id="cb3-265"><a href="on-your-own-5.html#cb3-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-266"><a href="on-your-own-5.html#cb3-266" aria-hidden="true" tabindex="-1"></a><span class="co"># Create dataframes</span></span>
<span id="cb3-267"><a href="on-your-own-5.html#cb3-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-268"><a href="on-your-own-5.html#cb3-268" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">&quot;data/processed_data&quot;</span>)</span>
<span id="cb3-269"><a href="on-your-own-5.html#cb3-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-270"><a href="on-your-own-5.html#cb3-270" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove observations without animals detected, where we don&#39;t know the species, and non-mammals</span></span>
<span id="cb3-271"><a href="on-your-own-5.html#cb3-271" aria-hidden="true" tabindex="-1"></a> img_sub <span class="ot">&lt;-</span> img <span class="sc">%&gt;%</span> <span class="fu">filter</span>(is_blank<span class="sc">==</span><span class="dv">0</span>,                <span class="co"># Remove the blanks</span></span>
<span id="cb3-272"><a href="on-your-own-5.html#cb3-272" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">is.na</span>(img<span class="sc">$</span>species)<span class="sc">==</span><span class="cn">FALSE</span>, <span class="co"># Remove classifications which don&#39;t have species </span></span>
<span id="cb3-273"><a href="on-your-own-5.html#cb3-273" aria-hidden="true" tabindex="-1"></a>                          class<span class="sc">==</span><span class="st">&quot;Mammalia&quot;</span>,          <span class="co"># Subset to mammals</span></span>
<span id="cb3-274"><a href="on-your-own-5.html#cb3-274" aria-hidden="true" tabindex="-1"></a>                          species<span class="sc">!=</span><span class="st">&quot;sapiens&quot;</span>)         <span class="co"># Subset to anything that isn&#39;t human</span></span>
<span id="cb3-275"><a href="on-your-own-5.html#cb3-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-276"><a href="on-your-own-5.html#cb3-276" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(img_sub<span class="sc">$</span>sp)</span>
<span id="cb3-277"><a href="on-your-own-5.html#cb3-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-278"><a href="on-your-own-5.html#cb3-278" aria-hidden="true" tabindex="-1"></a><span class="do">##########################################</span></span>
<span id="cb3-279"><a href="on-your-own-5.html#cb3-279" aria-hidden="true" tabindex="-1"></a><span class="co"># Create lookup</span></span>
<span id="cb3-280"><a href="on-your-own-5.html#cb3-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-281"><a href="on-your-own-5.html#cb3-281" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove any deployments without end dates</span></span>
<span id="cb3-282"><a href="on-your-own-5.html#cb3-282" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> dep[<span class="fu">is.na</span>(dep<span class="sc">$</span>end_date)<span class="sc">==</span>F,]</span>
<span id="cb3-283"><a href="on-your-own-5.html#cb3-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-284"><a href="on-your-own-5.html#cb3-284" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an empty list to store our days</span></span>
<span id="cb3-285"><a href="on-your-own-5.html#cb3-285" aria-hidden="true" tabindex="-1"></a>daily_lookup <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb3-286"><a href="on-your-own-5.html#cb3-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-287"><a href="on-your-own-5.html#cb3-287" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through the deployment dataframe and create a row for every day the camera is active</span></span>
<span id="cb3-288"><a href="on-your-own-5.html#cb3-288" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(tmp))</span>
<span id="cb3-289"><a href="on-your-own-5.html#cb3-289" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb3-290"><a href="on-your-own-5.html#cb3-290" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">ymd</span>(tmp<span class="sc">$</span>start_date[i])<span class="sc">!=</span><span class="fu">ymd</span>(tmp<span class="sc">$</span>end_date[i]))</span>
<span id="cb3-291"><a href="on-your-own-5.html#cb3-291" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb3-292"><a href="on-your-own-5.html#cb3-292" aria-hidden="true" tabindex="-1"></a>    daily_lookup[[i]] <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">&quot;date&quot;</span><span class="ot">=</span><span class="fu">seq</span>(<span class="fu">ymd</span>(tmp<span class="sc">$</span>start_date[i]), <span class="fu">ymd</span>(tmp<span class="sc">$</span>end_date[i]), <span class="at">by=</span><span class="st">&quot;days&quot;</span>), <span class="st">&quot;placename&quot;</span><span class="ot">=</span>tmp<span class="sc">$</span>placename[i])</span>
<span id="cb3-293"><a href="on-your-own-5.html#cb3-293" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-294"><a href="on-your-own-5.html#cb3-294" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-295"><a href="on-your-own-5.html#cb3-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-296"><a href="on-your-own-5.html#cb3-296" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge the lists into a dataframe</span></span>
<span id="cb3-297"><a href="on-your-own-5.html#cb3-297" aria-hidden="true" tabindex="-1"></a>row_lookup <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(daily_lookup)</span>
<span id="cb3-298"><a href="on-your-own-5.html#cb3-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-299"><a href="on-your-own-5.html#cb3-299" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove duplicates - when start and end days are the same for successive deployments</span></span>
<span id="cb3-300"><a href="on-your-own-5.html#cb3-300" aria-hidden="true" tabindex="-1"></a>row_lookup <span class="ot">&lt;-</span> row_lookup[<span class="fu">duplicated</span>(row_lookup)<span class="sc">==</span>F,]</span>
<span id="cb3-301"><a href="on-your-own-5.html#cb3-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-302"><a href="on-your-own-5.html#cb3-302" aria-hidden="true" tabindex="-1"></a>independent <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb3-303"><a href="on-your-own-5.html#cb3-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-304"><a href="on-your-own-5.html#cb3-304" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for a `group_size` variable? </span></span>
<span id="cb3-305"><a href="on-your-own-5.html#cb3-305" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(img_sub<span class="sc">$</span>group_size)</span>
<span id="cb3-306"><a href="on-your-own-5.html#cb3-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-307"><a href="on-your-own-5.html#cb3-307" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for a &#39;number_ofobjects&#39; variable</span></span>
<span id="cb3-308"><a href="on-your-own-5.html#cb3-308" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(img_sub<span class="sc">$</span>number_of_objects)</span>
<span id="cb3-309"><a href="on-your-own-5.html#cb3-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-310"><a href="on-your-own-5.html#cb3-310" aria-hidden="true" tabindex="-1"></a>img_sub<span class="sc">$</span>animal_count <span class="ot">&lt;-</span> img_sub<span class="sc">$</span>number_of_objects</span>
<span id="cb3-311"><a href="on-your-own-5.html#cb3-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-312"><a href="on-your-own-5.html#cb3-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-313"><a href="on-your-own-5.html#cb3-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-314"><a href="on-your-own-5.html#cb3-314" aria-hidden="true" tabindex="-1"></a><span class="co"># Events</span></span>
<span id="cb3-315"><a href="on-your-own-5.html#cb3-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-316"><a href="on-your-own-5.html#cb3-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-317"><a href="on-your-own-5.html#cb3-317" aria-hidden="true" tabindex="-1"></a>img_tmp <span class="ot">&lt;-</span> img_sub <span class="sc">%&gt;%</span></span>
<span id="cb3-318"><a href="on-your-own-5.html#cb3-318" aria-hidden="true" tabindex="-1"></a>              <span class="fu">arrange</span>(deployment_id) <span class="sc">%&gt;%</span>        <span class="co"># Order by deployment_id</span></span>
<span id="cb3-319"><a href="on-your-own-5.html#cb3-319" aria-hidden="true" tabindex="-1"></a>              <span class="fu">group_by</span>(deployment_id, sp) <span class="sc">%&gt;%</span>   <span class="co"># Group species together</span></span>
<span id="cb3-320"><a href="on-your-own-5.html#cb3-320" aria-hidden="true" tabindex="-1"></a>              <span class="fu">mutate</span>(<span class="at">duration =</span> <span class="fu">int_length</span>(timestamp <span class="sc">%--%</span> <span class="fu">lag</span>(timestamp))) <span class="co"># Calculate the gap bet</span></span>
<span id="cb3-321"><a href="on-your-own-5.html#cb3-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-322"><a href="on-your-own-5.html#cb3-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-323"><a href="on-your-own-5.html#cb3-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-324"><a href="on-your-own-5.html#cb3-324" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb3-325"><a href="on-your-own-5.html#cb3-325" aria-hidden="true" tabindex="-1"></a><span class="co"># Give a random value to all cells</span></span>
<span id="cb3-326"><a href="on-your-own-5.html#cb3-326" aria-hidden="true" tabindex="-1"></a>img_tmp<span class="sc">$</span>event_id <span class="ot">&lt;-</span> <span class="dv">9999</span></span>
<span id="cb3-327"><a href="on-your-own-5.html#cb3-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-328"><a href="on-your-own-5.html#cb3-328" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a counter</span></span>
<span id="cb3-329"><a href="on-your-own-5.html#cb3-329" aria-hidden="true" tabindex="-1"></a>counter <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb3-330"><a href="on-your-own-5.html#cb3-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-331"><a href="on-your-own-5.html#cb3-331" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a unique code that has one more zero than rows in your dataframe  </span></span>
<span id="cb3-332"><a href="on-your-own-5.html#cb3-332" aria-hidden="true" tabindex="-1"></a>num_code <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">paste0</span>(<span class="fu">nrow</span>(img_sub),<span class="dv">0</span>))</span>
<span id="cb3-333"><a href="on-your-own-5.html#cb3-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-334"><a href="on-your-own-5.html#cb3-334" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through img_tmp - if gap is greater than the threshold -&gt; give it a new event ID</span></span>
<span id="cb3-335"><a href="on-your-own-5.html#cb3-335" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">nrow</span>(img_tmp)) {</span>
<span id="cb3-336"><a href="on-your-own-5.html#cb3-336" aria-hidden="true" tabindex="-1"></a>  img_tmp<span class="sc">$</span>event_id[i<span class="dv">-1</span>]  <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;E&quot;</span>, <span class="fu">str_pad</span>(counter, <span class="fu">nchar</span>(num_code), <span class="at">pad =</span> <span class="st">&quot;0&quot;</span>))</span>
<span id="cb3-337"><a href="on-your-own-5.html#cb3-337" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-338"><a href="on-your-own-5.html#cb3-338" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">is.na</span>(img_tmp<span class="sc">$</span>duration[i]) <span class="sc">|</span> <span class="fu">abs</span>(img_tmp<span class="sc">$</span>duration[i]) <span class="sc">&gt;</span> (independent <span class="sc">*</span> <span class="dv">60</span>))</span>
<span id="cb3-339"><a href="on-your-own-5.html#cb3-339" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb3-340"><a href="on-your-own-5.html#cb3-340" aria-hidden="true" tabindex="-1"></a>      counter <span class="ot">&lt;-</span> counter <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb3-341"><a href="on-your-own-5.html#cb3-341" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-342"><a href="on-your-own-5.html#cb3-342" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-343"><a href="on-your-own-5.html#cb3-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-344"><a href="on-your-own-5.html#cb3-344" aria-hidden="true" tabindex="-1"></a><span class="co"># Update the information for the last row - the loop above always updates the previous row... leaving the last row unchanged</span></span>
<span id="cb3-345"><a href="on-your-own-5.html#cb3-345" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb3-346"><a href="on-your-own-5.html#cb3-346" aria-hidden="true" tabindex="-1"></a> <span class="co"># group ID  for the last row</span></span>
<span id="cb3-347"><a href="on-your-own-5.html#cb3-347" aria-hidden="true" tabindex="-1"></a> <span class="cf">if</span>(img_tmp<span class="sc">$</span>duration[<span class="fu">nrow</span>(img_tmp)] <span class="sc">&lt;</span> (independent <span class="sc">*</span> <span class="dv">60</span>)<span class="sc">|</span></span>
<span id="cb3-348"><a href="on-your-own-5.html#cb3-348" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(img_tmp<span class="sc">$</span>duration[<span class="fu">nrow</span>(img_tmp)])){</span>
<span id="cb3-349"><a href="on-your-own-5.html#cb3-349" aria-hidden="true" tabindex="-1"></a>   img_tmp<span class="sc">$</span>event_id[<span class="fu">nrow</span>(img_tmp)] <span class="ot">&lt;-</span> img_tmp<span class="sc">$</span>event_id[<span class="fu">nrow</span>(img_tmp)<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb3-350"><a href="on-your-own-5.html#cb3-350" aria-hidden="true" tabindex="-1"></a> } <span class="cf">else</span>{</span>
<span id="cb3-351"><a href="on-your-own-5.html#cb3-351" aria-hidden="true" tabindex="-1"></a>   counter <span class="ot">&lt;-</span> counter <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb3-352"><a href="on-your-own-5.html#cb3-352" aria-hidden="true" tabindex="-1"></a>   img_tmp<span class="sc">$</span>event_id[<span class="fu">nrow</span>(img_tmp)] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;E&quot;</span>, <span class="fu">str_pad</span>(counter, <span class="fu">nchar</span>(num_code), <span class="at">pad =</span> <span class="st">&quot;0&quot;</span>))</span>
<span id="cb3-353"><a href="on-your-own-5.html#cb3-353" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb3-354"><a href="on-your-own-5.html#cb3-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-355"><a href="on-your-own-5.html#cb3-355" aria-hidden="true" tabindex="-1"></a><span class="co"># remove the duration column</span></span>
<span id="cb3-356"><a href="on-your-own-5.html#cb3-356" aria-hidden="true" tabindex="-1"></a>img_tmp<span class="sc">$</span>duration <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb3-357"><a href="on-your-own-5.html#cb3-357" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb3-358"><a href="on-your-own-5.html#cb3-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-359"><a href="on-your-own-5.html#cb3-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-360"><a href="on-your-own-5.html#cb3-360" aria-hidden="true" tabindex="-1"></a> <span class="co"># find out the last and the first of the time in the group</span></span>
<span id="cb3-361"><a href="on-your-own-5.html#cb3-361" aria-hidden="true" tabindex="-1"></a>  top <span class="ot">&lt;-</span> img_tmp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(event_id) <span class="sc">%&gt;%</span> <span class="fu">top_n</span>(<span class="dv">1</span>,timestamp) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(event_id, timestamp)</span>
<span id="cb3-362"><a href="on-your-own-5.html#cb3-362" aria-hidden="true" tabindex="-1"></a>  bot <span class="ot">&lt;-</span> img_tmp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(event_id) <span class="sc">%&gt;%</span> <span class="fu">top_n</span>(<span class="sc">-</span><span class="dv">1</span>,timestamp) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(event_id, timestamp)</span>
<span id="cb3-363"><a href="on-your-own-5.html#cb3-363" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(bot)[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;timestamp_end&quot;</span>)</span>
<span id="cb3-364"><a href="on-your-own-5.html#cb3-364" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-365"><a href="on-your-own-5.html#cb3-365" aria-hidden="true" tabindex="-1"></a>  img_num <span class="ot">&lt;-</span> img_tmp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(event_id) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">event_observations=</span><span class="fu">n</span>()) <span class="co"># number of images in the event</span></span>
<span id="cb3-366"><a href="on-your-own-5.html#cb3-366" aria-hidden="true" tabindex="-1"></a>  event_grp <span class="ot">&lt;-</span> img_tmp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(event_id) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">event_groupsize=</span><span class="fu">max</span>(animal_count))</span>
<span id="cb3-367"><a href="on-your-own-5.html#cb3-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-368"><a href="on-your-own-5.html#cb3-368" aria-hidden="true" tabindex="-1"></a>  <span class="co"># calculate the duration and add the other elements</span></span>
<span id="cb3-369"><a href="on-your-own-5.html#cb3-369" aria-hidden="true" tabindex="-1"></a>  diff <span class="ot">&lt;-</span>  top <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(bot, <span class="at">by=</span><span class="st">&quot;event_id&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-370"><a href="on-your-own-5.html#cb3-370" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">event_duration=</span><span class="fu">abs</span>(<span class="fu">int_length</span>(timestamp <span class="sc">%--%</span> timestamp_end))) <span class="sc">%&gt;%</span></span>
<span id="cb3-371"><a href="on-your-own-5.html#cb3-371" aria-hidden="true" tabindex="-1"></a>      <span class="fu">left_join</span>(event_grp, <span class="at">by=</span><span class="st">&quot;event_id&quot;</span>)<span class="sc">%&gt;%</span></span>
<span id="cb3-372"><a href="on-your-own-5.html#cb3-372" aria-hidden="true" tabindex="-1"></a>      <span class="fu">left_join</span>(img_num, <span class="at">by=</span><span class="st">&quot;event_id&quot;</span>)</span>
<span id="cb3-373"><a href="on-your-own-5.html#cb3-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-374"><a href="on-your-own-5.html#cb3-374" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove columns you don&#39;t need</span></span>
<span id="cb3-375"><a href="on-your-own-5.html#cb3-375" aria-hidden="true" tabindex="-1"></a>  diff<span class="sc">$</span>timestamp   <span class="ot">&lt;-</span><span class="cn">NULL</span></span>
<span id="cb3-376"><a href="on-your-own-5.html#cb3-376" aria-hidden="true" tabindex="-1"></a>  diff<span class="sc">$</span>timestamp_end <span class="ot">&lt;-</span><span class="cn">NULL</span></span>
<span id="cb3-377"><a href="on-your-own-5.html#cb3-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-378"><a href="on-your-own-5.html#cb3-378" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Merge the img_tmp with the event data</span></span>
<span id="cb3-379"><a href="on-your-own-5.html#cb3-379" aria-hidden="true" tabindex="-1"></a>  img_tmp <span class="ot">&lt;-</span>  img_tmp <span class="sc">%&gt;%</span></span>
<span id="cb3-380"><a href="on-your-own-5.html#cb3-380" aria-hidden="true" tabindex="-1"></a>   <span class="fu">left_join</span>(diff,<span class="at">by=</span><span class="st">&quot;event_id&quot;</span>)</span>
<span id="cb3-381"><a href="on-your-own-5.html#cb3-381" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-382"><a href="on-your-own-5.html#cb3-382" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-383"><a href="on-your-own-5.html#cb3-383" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove duplicates</span></span>
<span id="cb3-384"><a href="on-your-own-5.html#cb3-384" aria-hidden="true" tabindex="-1"></a>ind_dat <span class="ot">&lt;-</span> img_tmp[<span class="fu">duplicated</span>(img_tmp<span class="sc">$</span>event_id)<span class="sc">==</span>F,]</span>
<span id="cb3-385"><a href="on-your-own-5.html#cb3-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-386"><a href="on-your-own-5.html#cb3-386" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a  unique code for ever day and deployment where cameras were functioning</span></span>
<span id="cb3-387"><a href="on-your-own-5.html#cb3-387" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">paste</span>(row_lookup<span class="sc">$</span>date, row_lookup<span class="sc">$</span>placename)</span>
<span id="cb3-388"><a href="on-your-own-5.html#cb3-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-389"><a href="on-your-own-5.html#cb3-389" aria-hidden="true" tabindex="-1"></a><span class="co">#Subset ind_dat to data that matches the unique codes</span></span>
<span id="cb3-390"><a href="on-your-own-5.html#cb3-390" aria-hidden="true" tabindex="-1"></a>ind_dat <span class="ot">&lt;-</span> ind_dat[<span class="fu">paste</span>(<span class="fu">substr</span>(ind_dat<span class="sc">$</span>timestamp,<span class="dv">1</span>,<span class="dv">10</span>), ind_dat<span class="sc">$</span>placename) <span class="sc">%in%</span> tmp, ]</span>
<span id="cb3-391"><a href="on-your-own-5.html#cb3-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-392"><a href="on-your-own-5.html#cb3-392" aria-hidden="true" tabindex="-1"></a>ind_dat<span class="sc">$</span>sp <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(ind_dat<span class="sc">$</span>sp)</span>
<span id="cb3-393"><a href="on-your-own-5.html#cb3-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-394"><a href="on-your-own-5.html#cb3-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-395"><a href="on-your-own-5.html#cb3-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-396"><a href="on-your-own-5.html#cb3-396" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(ind_dat, <span class="fu">paste0</span>(<span class="st">&quot;data/processed_data/&quot;</span>,ind_dat<span class="sc">$</span>project_id[<span class="dv">1</span>], <span class="st">&quot;_&quot;</span>,independent ,<span class="st">&quot;min_independent_detections.csv&quot;</span>), <span class="at">row.names =</span> F)</span>
<span id="cb3-397"><a href="on-your-own-5.html#cb3-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-398"><a href="on-your-own-5.html#cb3-398" aria-hidden="true" tabindex="-1"></a><span class="co"># also write the cleaned all detections file (some activity analyses require it)</span></span>
<span id="cb3-399"><a href="on-your-own-5.html#cb3-399" aria-hidden="true" tabindex="-1"></a><span class="co">#write.csv(img_tmp, paste0(&quot;data/processed_data/&quot;,ind_dat$project_id[1], &quot;_raw_detections.csv&quot;), row.names = F)</span></span>
<span id="cb3-400"><a href="on-your-own-5.html#cb3-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-401"><a href="on-your-own-5.html#cb3-401" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(row_lookup, <span class="fu">paste0</span>(<span class="st">&quot;data/processed_data/&quot;</span>,ind_dat<span class="sc">$</span>project_id[<span class="dv">1</span>], <span class="st">&quot;_daily_lookup.csv&quot;</span>), <span class="at">row.names =</span> F)</span>
<span id="cb3-402"><a href="on-your-own-5.html#cb3-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-403"><a href="on-your-own-5.html#cb3-403" aria-hidden="true" tabindex="-1"></a><span class="co">#Subset the columns</span></span>
<span id="cb3-404"><a href="on-your-own-5.html#cb3-404" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> dep[, <span class="fu">c</span>(<span class="st">&quot;project_id&quot;</span>, <span class="st">&quot;placename&quot;</span>, <span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;latitude&quot;</span>, <span class="st">&quot;feature_type&quot;</span>)]</span>
<span id="cb3-405"><a href="on-your-own-5.html#cb3-405" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove duplicated rows</span></span>
<span id="cb3-406"><a href="on-your-own-5.html#cb3-406" aria-hidden="true" tabindex="-1"></a>tmp<span class="ot">&lt;-</span> tmp[<span class="fu">duplicated</span>(tmp)<span class="sc">==</span>F,]</span>
<span id="cb3-407"><a href="on-your-own-5.html#cb3-407" aria-hidden="true" tabindex="-1"></a><span class="co"># write the file</span></span>
<span id="cb3-408"><a href="on-your-own-5.html#cb3-408" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(tmp, <span class="fu">paste0</span>(<span class="st">&quot;data/processed_data/&quot;</span>,ind_dat<span class="sc">$</span>project_id[<span class="dv">1</span>], <span class="st">&quot;_camera_locations.csv&quot;</span>), <span class="at">row.names =</span> F)</span>
<span id="cb3-409"><a href="on-your-own-5.html#cb3-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-410"><a href="on-your-own-5.html#cb3-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-411"><a href="on-your-own-5.html#cb3-411" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> sp_list[sp_list<span class="sc">$</span>sp <span class="sc">%in%</span> ind_dat<span class="sc">$</span>sp,]</span>
<span id="cb3-412"><a href="on-your-own-5.html#cb3-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-413"><a href="on-your-own-5.html#cb3-413" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove the &#39;verified&#39; column</span></span>
<span id="cb3-414"><a href="on-your-own-5.html#cb3-414" aria-hidden="true" tabindex="-1"></a>tmp<span class="sc">$</span>verified <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb3-415"><a href="on-your-own-5.html#cb3-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-416"><a href="on-your-own-5.html#cb3-416" aria-hidden="true" tabindex="-1"></a><span class="co"># We will replace the spaces in the species names with dots, this will make things easier for us later (as column headings with spaces in are annoying).</span></span>
<span id="cb3-417"><a href="on-your-own-5.html#cb3-417" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb3-418"><a href="on-your-own-5.html#cb3-418" aria-hidden="true" tabindex="-1"></a>tmp<span class="sc">$</span>sp <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(tmp<span class="sc">$</span>sp, <span class="st">&quot; &quot;</span>, <span class="st">&quot;.&quot;</span>)</span>
<span id="cb3-419"><a href="on-your-own-5.html#cb3-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-420"><a href="on-your-own-5.html#cb3-420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-421"><a href="on-your-own-5.html#cb3-421" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(tmp, <span class="fu">paste0</span>(<span class="st">&quot;data/processed_data/&quot;</span>,ind_dat<span class="sc">$</span>project_id[<span class="dv">1</span>], <span class="st">&quot;_species_list.csv&quot;</span>), <span class="at">row.names =</span> F)</span>
<span id="cb3-422"><a href="on-your-own-5.html#cb3-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-423"><a href="on-your-own-5.html#cb3-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-424"><a href="on-your-own-5.html#cb3-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-425"><a href="on-your-own-5.html#cb3-425" aria-hidden="true" tabindex="-1"></a><span class="co"># Total counts</span></span>
<span id="cb3-426"><a href="on-your-own-5.html#cb3-426" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Station / Month / deport / Species      </span></span>
<span id="cb3-427"><a href="on-your-own-5.html#cb3-427" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> row_lookup</span>
<span id="cb3-428"><a href="on-your-own-5.html#cb3-428" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-429"><a href="on-your-own-5.html#cb3-429" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate the number of days at each site  </span></span>
<span id="cb3-430"><a href="on-your-own-5.html#cb3-430" aria-hidden="true" tabindex="-1"></a>  total_obs <span class="ot">&lt;-</span> tmp <span class="sc">%&gt;%</span> </span>
<span id="cb3-431"><a href="on-your-own-5.html#cb3-431" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(placename) <span class="sc">%&gt;%</span></span>
<span id="cb3-432"><a href="on-your-own-5.html#cb3-432" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarise</span>(<span class="at">days =</span> <span class="fu">n</span>())</span>
<span id="cb3-433"><a href="on-your-own-5.html#cb3-433" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-434"><a href="on-your-own-5.html#cb3-434" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Convert to a data frame</span></span>
<span id="cb3-435"><a href="on-your-own-5.html#cb3-435" aria-hidden="true" tabindex="-1"></a>  total_obs <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(total_obs)</span>
<span id="cb3-436"><a href="on-your-own-5.html#cb3-436" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-437"><a href="on-your-own-5.html#cb3-437" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add columns for each species  </span></span>
<span id="cb3-438"><a href="on-your-own-5.html#cb3-438" aria-hidden="true" tabindex="-1"></a>  total_obs[, <span class="fu">levels</span>(ind_dat<span class="sc">$</span>sp)] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb3-439"><a href="on-your-own-5.html#cb3-439" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Duplicate for counts</span></span>
<span id="cb3-440"><a href="on-your-own-5.html#cb3-440" aria-hidden="true" tabindex="-1"></a>  total_count <span class="ot">&lt;-</span> total_obs</span>
<span id="cb3-441"><a href="on-your-own-5.html#cb3-441" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Test counter</span></span>
<span id="cb3-442"><a href="on-your-own-5.html#cb3-442" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span><span class="dv">1</span></span>
<span id="cb3-443"><a href="on-your-own-5.html#cb3-443" aria-hidden="true" tabindex="-1"></a>  <span class="co"># For each station, count the number of individuals/observations</span></span>
<span id="cb3-444"><a href="on-your-own-5.html#cb3-444" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(total_obs))</span>
<span id="cb3-445"><a href="on-your-own-5.html#cb3-445" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb3-446"><a href="on-your-own-5.html#cb3-446" aria-hidden="true" tabindex="-1"></a>      tmp <span class="ot">&lt;-</span> ind_dat[ind_dat<span class="sc">$</span>placename<span class="sc">==</span>total_obs<span class="sc">$</span>placename[i],]</span>
<span id="cb3-447"><a href="on-your-own-5.html#cb3-447" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-448"><a href="on-your-own-5.html#cb3-448" aria-hidden="true" tabindex="-1"></a>      tmp_stats <span class="ot">&lt;-</span> tmp <span class="sc">%&gt;%</span>  <span class="fu">group_by</span>(sp, <span class="at">.drop=</span>F) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">obs=</span><span class="fu">n</span>(), <span class="at">count=</span><span class="fu">sum</span>(animal_count))</span>
<span id="cb3-449"><a href="on-your-own-5.html#cb3-449" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-450"><a href="on-your-own-5.html#cb3-450" aria-hidden="true" tabindex="-1"></a>      total_obs[i,<span class="fu">as.character</span>(tmp_stats<span class="sc">$</span>sp)] <span class="ot">&lt;-</span> tmp_stats<span class="sc">$</span>obs</span>
<span id="cb3-451"><a href="on-your-own-5.html#cb3-451" aria-hidden="true" tabindex="-1"></a>      total_count[i,<span class="fu">as.character</span>(tmp_stats<span class="sc">$</span>sp)] <span class="ot">&lt;-</span> tmp_stats<span class="sc">$</span>count</span>
<span id="cb3-452"><a href="on-your-own-5.html#cb3-452" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-453"><a href="on-your-own-5.html#cb3-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-454"><a href="on-your-own-5.html#cb3-454" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-455"><a href="on-your-own-5.html#cb3-455" aria-hidden="true" tabindex="-1"></a><span class="co"># Save them</span></span>
<span id="cb3-456"><a href="on-your-own-5.html#cb3-456" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-457"><a href="on-your-own-5.html#cb3-457" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(total_obs, <span class="fu">paste0</span>(<span class="st">&quot;data/processed_data/&quot;</span>,ind_dat<span class="sc">$</span>project_id[<span class="dv">1</span>], <span class="st">&quot;_&quot;</span>,independent ,<span class="st">&quot;min_independent_total_observations.csv&quot;</span>), <span class="at">row.names =</span> F) </span>
<span id="cb3-458"><a href="on-your-own-5.html#cb3-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-459"><a href="on-your-own-5.html#cb3-459" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(total_count, <span class="fu">paste0</span>(<span class="st">&quot;data/processed_data/&quot;</span>,ind_dat<span class="sc">$</span>project_id[<span class="dv">1</span>], <span class="st">&quot;_&quot;</span>,independent ,<span class="st">&quot;min_independent_total_counts.csv&quot;</span>), <span class="at">row.names =</span> F) </span>
<span id="cb3-460"><a href="on-your-own-5.html#cb3-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-461"><a href="on-your-own-5.html#cb3-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-462"><a href="on-your-own-5.html#cb3-462" aria-hidden="true" tabindex="-1"></a><span class="co"># Monthly counts</span></span>
<span id="cb3-463"><a href="on-your-own-5.html#cb3-463" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Station / Month / days / Covariates / Species      </span></span>
<span id="cb3-464"><a href="on-your-own-5.html#cb3-464" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> row_lookup</span>
<span id="cb3-465"><a href="on-your-own-5.html#cb3-465" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Simplify the date to monthly</span></span>
<span id="cb3-466"><a href="on-your-own-5.html#cb3-466" aria-hidden="true" tabindex="-1"></a>  tmp<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">substr</span>(tmp<span class="sc">$</span>date,<span class="dv">1</span>,<span class="dv">7</span>)</span>
<span id="cb3-467"><a href="on-your-own-5.html#cb3-467" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-468"><a href="on-your-own-5.html#cb3-468" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate the number of days in each month  </span></span>
<span id="cb3-469"><a href="on-your-own-5.html#cb3-469" aria-hidden="true" tabindex="-1"></a>  mon_obs <span class="ot">&lt;-</span> tmp <span class="sc">%&gt;%</span> </span>
<span id="cb3-470"><a href="on-your-own-5.html#cb3-470" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(placename,date ) <span class="sc">%&gt;%</span></span>
<span id="cb3-471"><a href="on-your-own-5.html#cb3-471" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarise</span>(<span class="at">days =</span> <span class="fu">n</span>())</span>
<span id="cb3-472"><a href="on-your-own-5.html#cb3-472" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Convert to a data frame</span></span>
<span id="cb3-473"><a href="on-your-own-5.html#cb3-473" aria-hidden="true" tabindex="-1"></a>  mon_obs <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(mon_obs)</span>
<span id="cb3-474"><a href="on-your-own-5.html#cb3-474" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-475"><a href="on-your-own-5.html#cb3-475" aria-hidden="true" tabindex="-1"></a>  mon_obs[, <span class="fu">levels</span>(ind_dat<span class="sc">$</span>sp)] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb3-476"><a href="on-your-own-5.html#cb3-476" aria-hidden="true" tabindex="-1"></a>  mon_count <span class="ot">&lt;-</span> mon_obs</span>
<span id="cb3-477"><a href="on-your-own-5.html#cb3-477" aria-hidden="true" tabindex="-1"></a>  <span class="co"># For each month, count the number of individuals/observations</span></span>
<span id="cb3-478"><a href="on-your-own-5.html#cb3-478" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(mon_obs))</span>
<span id="cb3-479"><a href="on-your-own-5.html#cb3-479" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb3-480"><a href="on-your-own-5.html#cb3-480" aria-hidden="true" tabindex="-1"></a>      tmp <span class="ot">&lt;-</span> ind_dat[ind_dat<span class="sc">$</span>placename<span class="sc">==</span>mon_obs<span class="sc">$</span>placename[i] <span class="sc">&amp;</span> <span class="fu">substr</span>(ind_dat<span class="sc">$</span>timestamp,<span class="dv">1</span>,<span class="dv">7</span>)<span class="sc">==</span> mon_obs<span class="sc">$</span>date[i],]</span>
<span id="cb3-481"><a href="on-your-own-5.html#cb3-481" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-482"><a href="on-your-own-5.html#cb3-482" aria-hidden="true" tabindex="-1"></a>      tmp_stats <span class="ot">&lt;-</span> tmp <span class="sc">%&gt;%</span>  <span class="fu">group_by</span>(sp, <span class="at">.drop=</span>F) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">obs=</span><span class="fu">n</span>(), <span class="at">count=</span><span class="fu">sum</span>(animal_count))</span>
<span id="cb3-483"><a href="on-your-own-5.html#cb3-483" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-484"><a href="on-your-own-5.html#cb3-484" aria-hidden="true" tabindex="-1"></a>      mon_obs[i,<span class="fu">as.character</span>(tmp_stats<span class="sc">$</span>sp)] <span class="ot">&lt;-</span> tmp_stats<span class="sc">$</span>obs</span>
<span id="cb3-485"><a href="on-your-own-5.html#cb3-485" aria-hidden="true" tabindex="-1"></a>      mon_count[i,<span class="fu">as.character</span>(tmp_stats<span class="sc">$</span>sp)] <span class="ot">&lt;-</span> tmp_stats<span class="sc">$</span>count</span>
<span id="cb3-486"><a href="on-your-own-5.html#cb3-486" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-487"><a href="on-your-own-5.html#cb3-487" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-488"><a href="on-your-own-5.html#cb3-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-489"><a href="on-your-own-5.html#cb3-489" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-490"><a href="on-your-own-5.html#cb3-490" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(mon_obs, <span class="fu">paste0</span>(<span class="st">&quot;data/processed_data/&quot;</span>,ind_dat<span class="sc">$</span>project_id[<span class="dv">1</span>], <span class="st">&quot;_&quot;</span>,independent ,<span class="st">&quot;min_independent_monthly_observations.csv&quot;</span>), <span class="at">row.names =</span> F) </span>
<span id="cb3-491"><a href="on-your-own-5.html#cb3-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-492"><a href="on-your-own-5.html#cb3-492" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(mon_count, <span class="fu">paste0</span>(<span class="st">&quot;data/processed_data/&quot;</span>,ind_dat<span class="sc">$</span>project_id[<span class="dv">1</span>], <span class="st">&quot;_&quot;</span>,independent ,<span class="st">&quot;min_independent_monthly_counts.csv&quot;</span>), <span class="at">row.names =</span> F) </span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="behavior.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/12-on_your_own.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Intro-to-data-analysis.pdf", "Intro-to-data-analysis.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
