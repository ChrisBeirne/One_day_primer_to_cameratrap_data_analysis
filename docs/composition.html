<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 9 Community composition | An Introduction to Camera Trap Data Management and Analysis in R</title>
  <meta name="description" content="Materials for the three day camera trap data management and analysis course" />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 9 Community composition | An Introduction to Camera Trap Data Management and Analysis in R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Materials for the three day camera trap data management and analysis course" />
  <meta name="github-repo" content="WildCoLab/Introduction-to-Camera-Trap-Data-Management-and-Analysis-in-R" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 Community composition | An Introduction to Camera Trap Data Management and Analysis in R" />
  
  <meta name="twitter:description" content="Materials for the three day camera trap data management and analysis course" />
  

<meta name="author" content="Christopher Beirne, the Wildlife Coexistence Lab, UBC, and the WildCam Network" />


<meta name="date" content="2024-05-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="exploration.html"/>
<link rel="next" href="habitat-use.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.2/leaflet.js"></script>
<script src="libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script>
<script src="libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">WildCo Data Analysis Intro</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#how-to-use-this-book"><i class="fa fa-check"></i><b>1.1</b> How to use this book</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#get-in-touch"><i class="fa fa-check"></i><b>1.2</b> Get in touch</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#cite-the-course"><i class="fa fa-check"></i><b>1.3</b> Cite the course</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i><b>1.4</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="prep.html"><a href="prep.html"><i class="fa fa-check"></i><b>2</b> Preparing for the course</a>
<ul>
<li class="chapter" data-level="2.1" data-path="prep.html"><a href="prep.html#install-r"><i class="fa fa-check"></i><b>2.1</b> Install R</a></li>
<li class="chapter" data-level="2.2" data-path="prep.html"><a href="prep.html#install-rstudio"><i class="fa fa-check"></i><b>2.2</b> Install RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="prep.html"><a href="prep.html#install-the-required-packages"><i class="fa fa-check"></i><b>2.3</b> Install the required packages</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="prep.html"><a href="prep.html#cran-packages"><i class="fa fa-check"></i><b>2.3.1</b> CRAN packages</a></li>
<li class="chapter" data-level="2.3.2" data-path="prep.html"><a href="prep.html#other-packages"><i class="fa fa-check"></i><b>2.3.2</b> Other packages</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="prep.html"><a href="prep.html#create-an-r-project"><i class="fa fa-check"></i><b>2.4</b> Create an R project</a></li>
<li class="chapter" data-level="2.5" data-path="prep.html"><a href="prep.html#download-the-data-files"><i class="fa fa-check"></i><b>2.5</b> Download the data files</a></li>
<li class="chapter" data-level="2.6" data-path="prep.html"><a href="prep.html#the-example-datasets"><i class="fa fa-check"></i><b>2.6</b> The example datasets</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="prep.html"><a href="prep.html#example_data"><i class="fa fa-check"></i><b>2.6.1</b> example_data</a></li>
<li class="chapter" data-level="2.6.2" data-path="prep.html"><a href="prep.html#your_data"><i class="fa fa-check"></i><b>2.6.2</b> your_data</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="prep.html"><a href="prep.html#practise-before-the-course"><i class="fa fa-check"></i><b>2.7</b> Practise before the course</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html"><i class="fa fa-check"></i><b>3</b> Preprocessing and labelling</a>
<ul>
<li class="chapter" data-level="3.1" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#data-storage"><i class="fa fa-check"></i><b>3.1</b> Data storage</a></li>
<li class="chapter" data-level="3.2" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#preprocessing"><i class="fa fa-check"></i><b>3.2</b> Preprocessing</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#renaming"><i class="fa fa-check"></i><b>3.2.1</b> Renaming</a></li>
<li class="chapter" data-level="3.2.2" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#automated-labelers"><i class="fa fa-check"></i><b>3.2.2</b> Automated Labelers</a></li>
<li class="chapter" data-level="3.2.3" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#sensitive-images"><i class="fa fa-check"></i><b>3.2.3</b> Sensitive images</a></li>
<li class="chapter" data-level="3.2.4" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#timelapse-extraction"><i class="fa fa-check"></i><b>3.2.4</b> Timelapse extraction</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#labelling"><i class="fa fa-check"></i><b>3.3</b> Labelling</a></li>
<li class="chapter" data-level="3.4" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#end-dates-and-outages"><i class="fa fa-check"></i><b>3.4</b> End dates and outages</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="standard.html"><a href="standard.html"><i class="fa fa-check"></i><b>4</b> Metadata standardisation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="standard.html"><a href="standard.html#the-wildlife-insights-minimum-metadata-standards"><i class="fa fa-check"></i><b>4.1</b> The Wildlife Insights Minimum Metadata Standards</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="standard.html"><a href="standard.html#project-data"><i class="fa fa-check"></i><b>4.1.1</b> Project data</a></li>
<li class="chapter" data-level="4.1.2" data-path="standard.html"><a href="standard.html#image-data"><i class="fa fa-check"></i><b>4.1.2</b> Image data</a></li>
<li class="chapter" data-level="4.1.3" data-path="standard.html"><a href="standard.html#deployment-data"><i class="fa fa-check"></i><b>4.1.3</b> Deployment data</a></li>
<li class="chapter" data-level="4.1.4" data-path="standard.html"><a href="standard.html#camera-inventory"><i class="fa fa-check"></i><b>4.1.4</b> Camera inventory</a></li>
<li class="chapter" data-level="4.1.5" data-path="standard.html"><a href="standard.html#important-note"><i class="fa fa-check"></i><b>4.1.5</b> Important note</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="error-checking.html"><a href="error-checking.html"><i class="fa fa-check"></i><b>5</b> Error checking</a>
<ul>
<li class="chapter" data-level="5.1" data-path="error-checking.html"><a href="error-checking.html#standardised-exploration-script"><i class="fa fa-check"></i><b>5.1</b> Standardised exploration script</a></li>
<li class="chapter" data-level="5.2" data-path="error-checking.html"><a href="error-checking.html#formatting-dates"><i class="fa fa-check"></i><b>5.2</b> Formatting dates</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="error-checking.html"><a href="error-checking.html#deployment-dates"><i class="fa fa-check"></i><b>5.2.1</b> Deployment dates</a></li>
<li class="chapter" data-level="5.2.2" data-path="error-checking.html"><a href="error-checking.html#image-dates"><i class="fa fa-check"></i><b>5.2.2</b> Image dates</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="error-checking.html"><a href="error-checking.html#basic-trapping-summaries"><i class="fa fa-check"></i><b>5.3</b> Basic trapping summaries</a></li>
<li class="chapter" data-level="5.4" data-path="error-checking.html"><a href="error-checking.html#error-checks"><i class="fa fa-check"></i><b>5.4</b> Error checks</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="error-checking.html"><a href="error-checking.html#camera-locations"><i class="fa fa-check"></i><b>5.4.1</b> Camera locations</a></li>
<li class="chapter" data-level="5.4.2" data-path="error-checking.html"><a href="error-checking.html#camera-activity-checks"><i class="fa fa-check"></i><b>5.4.2</b> Camera activity checks</a></li>
<li class="chapter" data-level="5.4.3" data-path="error-checking.html"><a href="error-checking.html#detection-check"><i class="fa fa-check"></i><b>5.4.3</b> Detection check</a></li>
<li class="chapter" data-level="5.4.4" data-path="error-checking.html"><a href="error-checking.html#taxonomy-check"><i class="fa fa-check"></i><b>5.4.4</b> Taxonomy check</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="error-checking.html"><a href="error-checking.html#diel-activity-check"><i class="fa fa-check"></i><b>5.5</b> Diel activity check</a></li>
<li class="chapter" data-level="5.6" data-path="error-checking.html"><a href="error-checking.html#conclusion"><i class="fa fa-check"></i><b>5.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-creation.html"><a href="data-creation.html"><i class="fa fa-check"></i><b>6</b> Analysis data creation</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-creation.html"><a href="data-creation.html#common-analysis-data-formats"><i class="fa fa-check"></i><b>6.1</b> Common analysis data formats</a></li>
<li class="chapter" data-level="6.2" data-path="data-creation.html"><a href="data-creation.html#independent-detections"><i class="fa fa-check"></i><b>6.2</b> Independent detections</a></li>
<li class="chapter" data-level="6.3" data-path="data-creation.html"><a href="data-creation.html#effort-look-up"><i class="fa fa-check"></i><b>6.3</b> Effort look-up</a></li>
<li class="chapter" data-level="6.4" data-path="data-creation.html"><a href="data-creation.html#observations-by-time-interval"><i class="fa fa-check"></i><b>6.4</b> Observations by time interval</a></li>
<li class="chapter" data-level="6.5" data-path="data-creation.html"><a href="data-creation.html#our-data"><i class="fa fa-check"></i><b>6.5</b> Our data</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="data-creation.html"><a href="data-creation.html#filter-to-target-species"><i class="fa fa-check"></i><b>6.5.1</b> Filter to target species</a></li>
<li class="chapter" data-level="6.5.2" data-path="data-creation.html"><a href="data-creation.html#create-a-daily-camera-activity-lookup"><i class="fa fa-check"></i><b>6.5.2</b> Create a daily camera activity lookup</a></li>
<li class="chapter" data-level="6.5.3" data-path="data-creation.html"><a href="data-creation.html#determine-independent-camera-detections"><i class="fa fa-check"></i><b>6.5.3</b> Determine ‘independent’ camera detections</a></li>
<li class="chapter" data-level="6.5.4" data-path="data-creation.html"><a href="data-creation.html#add-additional-data"><i class="fa fa-check"></i><b>6.5.4</b> Add additional data</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="data-creation.html"><a href="data-creation.html#creating-analysis-dataframes"><i class="fa fa-check"></i><b>6.6</b> Creating analysis dataframes</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="data-creation.html"><a href="data-creation.html#final-data-check"><i class="fa fa-check"></i><b>6.6.1</b> Final data check</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="covariates.html"><a href="covariates.html"><i class="fa fa-check"></i><b>7</b> Analysis covariates</a>
<ul>
<li class="chapter" data-level="7.1" data-path="covariates.html"><a href="covariates.html#camera-station-covariates"><i class="fa fa-check"></i><b>7.1</b> Camera station covariates</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="covariates.html"><a href="covariates.html#locally-collected-covariates"><i class="fa fa-check"></i><b>7.1.1</b> Locally collected covariates</a></li>
<li class="chapter" data-level="7.1.2" data-path="covariates.html"><a href="covariates.html#remotely-collected-covariates"><i class="fa fa-check"></i><b>7.1.2</b> Remotely collected covariates</a></li>
<li class="chapter" data-level="7.1.3" data-path="covariates.html"><a href="covariates.html#extracting-data-from-local-rasters"><i class="fa fa-check"></i><b>7.1.3</b> Extracting data from local rasters</a></li>
<li class="chapter" data-level="7.1.4" data-path="covariates.html"><a href="covariates.html#elevatr-package"><i class="fa fa-check"></i><b>7.1.4</b> elevatr package</a></li>
<li class="chapter" data-level="7.1.5" data-path="covariates.html"><a href="covariates.html#open-street-maps"><i class="fa fa-check"></i><b>7.1.5</b> Open Street Maps</a></li>
<li class="chapter" data-level="7.1.6" data-path="covariates.html"><a href="covariates.html#vegetation-productivity"><i class="fa fa-check"></i><b>7.1.6</b> Vegetation productivity</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="covariates.html"><a href="covariates.html#convert-and-save-your-covariates"><i class="fa fa-check"></i><b>7.2</b> Convert and save your covariates</a></li>
<li class="chapter" data-level="7.3" data-path="covariates.html"><a href="covariates.html#correlations-between-predictors"><i class="fa fa-check"></i><b>7.3</b> Correlations between predictors</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="exploration.html"><a href="exploration.html"><i class="fa fa-check"></i><b>8</b> Analysis data exploration</a>
<ul>
<li class="chapter" data-level="8.1" data-path="exploration.html"><a href="exploration.html#final-locations-plot"><i class="fa fa-check"></i><b>8.1</b> Final locations plot</a></li>
<li class="chapter" data-level="8.2" data-path="exploration.html"><a href="exploration.html#independent-detections-summary"><i class="fa fa-check"></i><b>8.2</b> Independent detections summary</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="exploration.html"><a href="exploration.html#raw-occupancy"><i class="fa fa-check"></i><b>8.2.1</b> Raw occupancy</a></li>
<li class="chapter" data-level="8.2.2" data-path="exploration.html"><a href="exploration.html#comparison-plot"><i class="fa fa-check"></i><b>8.2.2</b> Comparison plot</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="exploration.html"><a href="exploration.html#temporal-patterns-in-capture-rates"><i class="fa fa-check"></i><b>8.3</b> Temporal patterns in capture rates</a></li>
<li class="chapter" data-level="8.4" data-path="exploration.html"><a href="exploration.html#species-specific-capture-rates"><i class="fa fa-check"></i><b>8.4</b> Species-specific capture rates</a></li>
<li class="chapter" data-level="8.5" data-path="exploration.html"><a href="exploration.html#spatial-patterns-in-capture-rates"><i class="fa fa-check"></i><b>8.5</b> Spatial patterns in capture rates</a></li>
<li class="chapter" data-level="8.6" data-path="exploration.html"><a href="exploration.html#species-co-occurences"><i class="fa fa-check"></i><b>8.6</b> Species co-occurences</a></li>
<li class="chapter" data-level="8.7" data-path="exploration.html"><a href="exploration.html#covariate-plots"><i class="fa fa-check"></i><b>8.7</b> Covariate plots</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="exploration.html"><a href="exploration.html#continuous-predictors"><i class="fa fa-check"></i><b>8.7.1</b> Continuous predictors</a></li>
<li class="chapter" data-level="8.7.2" data-path="exploration.html"><a href="exploration.html#catagorical-predictors"><i class="fa fa-check"></i><b>8.7.2</b> Catagorical predictors</a></li>
<li class="chapter" data-level="8.7.3" data-path="exploration.html"><a href="exploration.html#do-your-own-exploration"><i class="fa fa-check"></i><b>8.7.3</b> Do your own exploration</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="composition.html"><a href="composition.html"><i class="fa fa-check"></i><b>9</b> Community composition</a>
<ul>
<li class="chapter" data-level="9.1" data-path="composition.html"><a href="composition.html#observed-richness"><i class="fa fa-check"></i><b>9.1</b> Observed richness</a></li>
<li class="chapter" data-level="9.2" data-path="composition.html"><a href="composition.html#estimated-richness"><i class="fa fa-check"></i><b>9.2</b> Estimated richness</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="composition.html"><a href="composition.html#inext-package"><i class="fa fa-check"></i><b>9.2.1</b> iNext package</a></li>
<li class="chapter" data-level="9.2.2" data-path="composition.html"><a href="composition.html#sampling-duration-example"><i class="fa fa-check"></i><b>9.2.2</b> Sampling duration example</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="composition.html"><a href="composition.html#other-diversity-metrics"><i class="fa fa-check"></i><b>9.3</b> Other diversity metrics</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="composition.html"><a href="composition.html#simpson-and-shannon"><i class="fa fa-check"></i><b>9.3.1</b> Simpson and Shannon</a></li>
<li class="chapter" data-level="9.3.2" data-path="composition.html"><a href="composition.html#more-examples-in-the-literature"><i class="fa fa-check"></i><b>9.3.2</b> More examples in the literature</a></li>
<li class="chapter" data-level="9.3.3" data-path="composition.html"><a href="composition.html#multispecies-occupancy-model"><i class="fa fa-check"></i><b>9.3.3</b> Multispecies occupancy model</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="composition.html"><a href="composition.html#community-structure"><i class="fa fa-check"></i><b>9.4</b> Community structure</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="composition.html"><a href="composition.html#extracting-data-for-plotting"><i class="fa fa-check"></i><b>9.4.1</b> Extracting data for plotting</a></li>
<li class="chapter" data-level="9.4.2" data-path="composition.html"><a href="composition.html#examples-in-the-literature"><i class="fa fa-check"></i><b>9.4.2</b> Examples in the literature</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="habitat-use.html"><a href="habitat-use.html"><i class="fa fa-check"></i><b>10</b> Habitat use</a>
<ul>
<li class="chapter" data-level="10.1" data-path="habitat-use.html"><a href="habitat-use.html#calculating-capture-rate"><i class="fa fa-check"></i><b>10.1</b> Calculating capture rate</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="habitat-use.html"><a href="habitat-use.html#examples-from-the-literature"><i class="fa fa-check"></i><b>10.1.1</b> Examples from the literature</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="habitat-use.html"><a href="habitat-use.html#single-species-models"><i class="fa fa-check"></i><b>10.2</b> Single-species models</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="habitat-use.html"><a href="habitat-use.html#simple-linear-model"><i class="fa fa-check"></i><b>10.2.1</b> Simple linear model</a></li>
<li class="chapter" data-level="10.2.2" data-path="habitat-use.html"><a href="habitat-use.html#catagorical-predictor"><i class="fa fa-check"></i><b>10.2.2</b> Catagorical predictor</a></li>
<li class="chapter" data-level="10.2.3" data-path="habitat-use.html"><a href="habitat-use.html#continuous-predictor"><i class="fa fa-check"></i><b>10.2.3</b> Continuous predictor</a></li>
<li class="chapter" data-level="10.2.4" data-path="habitat-use.html"><a href="habitat-use.html#model-comparisons"><i class="fa fa-check"></i><b>10.2.4</b> Model comparisons</a></li>
<li class="chapter" data-level="10.2.5" data-path="habitat-use.html"><a href="habitat-use.html#problems-with-these-models"><i class="fa fa-check"></i><b>10.2.5</b> Problems with these models</a></li>
<li class="chapter" data-level="10.2.6" data-path="habitat-use.html"><a href="habitat-use.html#mixed-effects-models"><i class="fa fa-check"></i><b>10.2.6</b> Mixed-effects models</a></li>
<li class="chapter" data-level="10.2.7" data-path="habitat-use.html"><a href="habitat-use.html#advanced-mixed-model-predictions"><i class="fa fa-check"></i><b>10.2.7</b> Advanced mixed-model predictions</a></li>
<li class="chapter" data-level="10.2.8" data-path="habitat-use.html"><a href="habitat-use.html#examples-in-the-literature-1"><i class="fa fa-check"></i><b>10.2.8</b> Examples in the literature</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="habitat-use.html"><a href="habitat-use.html#multispecies-models"><i class="fa fa-check"></i><b>10.3</b> Multispecies models</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="habitat-use.html"><a href="habitat-use.html#potential-dangers"><i class="fa fa-check"></i><b>10.3.1</b> Potential dangers</a></li>
<li class="chapter" data-level="10.3.2" data-path="habitat-use.html"><a href="habitat-use.html#further-reading"><i class="fa fa-check"></i><b>10.3.2</b> Further reading</a></li>
<li class="chapter" data-level="10.3.3" data-path="habitat-use.html"><a href="habitat-use.html#examples-in-the-literature-2"><i class="fa fa-check"></i><b>10.3.3</b> Examples in the literature</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="occupancy.html"><a href="occupancy.html"><i class="fa fa-check"></i><b>11</b> Occupancy</a>
<ul>
<li class="chapter" data-level="11.1" data-path="occupancy.html"><a href="occupancy.html#single-species-occupancy-model"><i class="fa fa-check"></i><b>11.1</b> Single species occupancy model</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="occupancy.html"><a href="occupancy.html#unmarked-package"><i class="fa fa-check"></i><b>11.1.1</b> Unmarked package</a></li>
<li class="chapter" data-level="11.1.2" data-path="occupancy.html"><a href="occupancy.html#plotting-predictions"><i class="fa fa-check"></i><b>11.1.2</b> Plotting predictions</a></li>
<li class="chapter" data-level="11.1.3" data-path="occupancy.html"><a href="occupancy.html#on-your-own"><i class="fa fa-check"></i><b>11.1.3</b> On your own</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="activity.html"><a href="activity.html"><i class="fa fa-check"></i><b>12</b> Activity</a>
<ul>
<li class="chapter" data-level="12.1" data-path="activity.html"><a href="activity.html#independent-detections-or-raw-data"><i class="fa fa-check"></i><b>12.1</b> Independent detections or raw data?</a></li>
<li class="chapter" data-level="12.2" data-path="activity.html"><a href="activity.html#data-formatting"><i class="fa fa-check"></i><b>12.2</b> Data formatting</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="activity.html"><a href="activity.html#accounting-for-sunrise-and-sunset"><i class="fa fa-check"></i><b>12.2.1</b> Accounting for sunrise and sunset</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="activity.html"><a href="activity.html#species-comparisons"><i class="fa fa-check"></i><b>12.3</b> Species comparisons</a></li>
<li class="chapter" data-level="12.4" data-path="activity.html"><a href="activity.html#treatment-comparisons"><i class="fa fa-check"></i><b>12.4</b> Treatment comparisons</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="activity.html"><a href="activity.html#seasonal-comparison"><i class="fa fa-check"></i><b>12.4.1</b> Seasonal comparison</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="activity.html"><a href="activity.html#selected-further-reading"><i class="fa fa-check"></i><b>12.5</b> Selected further reading</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="density.html"><a href="density.html"><i class="fa fa-check"></i><b>13</b> Density</a>
<ul>
<li class="chapter" data-level="13.1" data-path="density.html"><a href="density.html#individually-identifiable-individuals"><i class="fa fa-check"></i><b>13.1</b> Individually identifiable individuals</a></li>
<li class="chapter" data-level="13.2" data-path="density.html"><a href="density.html#unmarked-animals"><i class="fa fa-check"></i><b>13.2</b> Unmarked animals</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="density.html"><a href="density.html#random-encounter-model"><i class="fa fa-check"></i><b>13.2.1</b> Random encounter model</a></li>
<li class="chapter" data-level="13.2.2" data-path="density.html"><a href="density.html#moose"><i class="fa fa-check"></i><b>13.2.2</b> Moose</a></li>
<li class="chapter" data-level="13.2.3" data-path="density.html"><a href="density.html#wolf"><i class="fa fa-check"></i><b>13.2.3</b> Wolf</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="density.html"><a href="density.html#future-directions"><i class="fa fa-check"></i><b>13.3</b> Future directions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to Camera Trap Data Management and Analysis in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="composition" class="section level1 hasAnchor" number="9">
<h1><span class="header-section-number">Chapter 9</span> Community composition<a href="composition.html#composition" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><strong>By Christopher Beirne and Laura Stewart</strong></p>
<p>One of the most fundamental questions researchers and practitioners want to answer is <em>how many species are there in my survey area?</em>. Exploring patterns in species richness can also tell us if we have performed ‘enough’ surveying.</p>
<p><em>Create a new .R script</em></p>
<p>Call it <code>04_example_richness.R</code>.</p>
<p><em>Load the required packages</em></p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r Rmain"><code class="sourceCode r"><span id="cb106-1"><a href="composition.html#cb106-1" tabindex="-1"></a><span class="co"># Check you have them and load them</span></span>
<span id="cb106-2"><a href="composition.html#cb106-2" tabindex="-1"></a>list.of.packages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;iNEXT&quot;</span>, <span class="st">&quot;kableExtra&quot;</span>, <span class="st">&quot;tidyr&quot;</span>, <span class="st">&quot;ggplot2&quot;</span>, <span class="st">&quot;gridExtra&quot;</span>, <span class="st">&quot;dplyr&quot;</span>, <span class="st">&quot;viridis&quot;</span>)</span>
<span id="cb106-3"><a href="composition.html#cb106-3" tabindex="-1"></a></span>
<span id="cb106-4"><a href="composition.html#cb106-4" tabindex="-1"></a>new.packages <span class="ot">&lt;-</span> list.of.packages[<span class="sc">!</span>(list.of.packages <span class="sc">%in%</span> <span class="fu">installed.packages</span>()[,<span class="st">&quot;Package&quot;</span>])]</span>
<span id="cb106-5"><a href="composition.html#cb106-5" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">length</span>(new.packages)) <span class="fu">install.packages</span>(new.packages)</span>
<span id="cb106-6"><a href="composition.html#cb106-6" tabindex="-1"></a><span class="fu">lapply</span>(list.of.packages, require, <span class="at">character.only =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<div id="observed-richness" class="section level2 hasAnchor" number="9.1">
<h2><span class="header-section-number">9.1</span> Observed richness<a href="composition.html#observed-richness" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The simplest way to quantify species richness is counting the number of species you detect on your camera traps - ‘observed richness’. This is very easy to determine using our species list:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r Rmain"><code class="sourceCode r"><span id="cb107-1"><a href="composition.html#cb107-1" tabindex="-1"></a>sp_summary <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/processed_data/AlgarRestorationProject_species_list.csv&quot;</span>, <span class="at">header=</span>T)</span>
<span id="cb107-2"><a href="composition.html#cb107-2" tabindex="-1"></a></span>
<span id="cb107-3"><a href="composition.html#cb107-3" tabindex="-1"></a><span class="co"># Use nrow() to count the number of species</span></span>
<span id="cb107-4"><a href="composition.html#cb107-4" tabindex="-1"></a><span class="fu">nrow</span>(sp_summary)</span></code></pre></div>
<pre><code>## [1] 14</code></pre>
<p>In the case of the example data set, this represents 14 mammal species.</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
class
</th>
<th style="text-align:left;">
order
</th>
<th style="text-align:left;">
family
</th>
<th style="text-align:left;">
genus
</th>
<th style="text-align:left;">
species
</th>
<th style="text-align:left;">
sp
</th>
<th style="text-align:left;">
common_name
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Mammalia
</td>
<td style="text-align:left;">
Artiodactyla
</td>
<td style="text-align:left;">
Cervidae
</td>
<td style="text-align:left;">
Alces
</td>
<td style="text-align:left;">
alces
</td>
<td style="text-align:left;">
Alces.alces
</td>
<td style="text-align:left;">
moose
</td>
</tr>
<tr>
<td style="text-align:left;">
Mammalia
</td>
<td style="text-align:left;">
Artiodactyla
</td>
<td style="text-align:left;">
Cervidae
</td>
<td style="text-align:left;">
Cervus
</td>
<td style="text-align:left;">
canadensis
</td>
<td style="text-align:left;">
Cervus.canadensis
</td>
<td style="text-align:left;">
elk
</td>
</tr>
<tr>
<td style="text-align:left;">
Mammalia
</td>
<td style="text-align:left;">
Artiodactyla
</td>
<td style="text-align:left;">
Cervidae
</td>
<td style="text-align:left;">
Odocoileus
</td>
<td style="text-align:left;">
virginianus
</td>
<td style="text-align:left;">
Odocoileus.virginianus
</td>
<td style="text-align:left;">
white-tailed deer
</td>
</tr>
<tr>
<td style="text-align:left;">
Mammalia
</td>
<td style="text-align:left;">
Artiodactyla
</td>
<td style="text-align:left;">
Cervidae
</td>
<td style="text-align:left;">
Rangifer
</td>
<td style="text-align:left;">
tarandus
</td>
<td style="text-align:left;">
Rangifer.tarandus
</td>
<td style="text-align:left;">
caribou
</td>
</tr>
<tr>
<td style="text-align:left;">
Mammalia
</td>
<td style="text-align:left;">
Carnivora
</td>
<td style="text-align:left;">
Canidae
</td>
<td style="text-align:left;">
Canis
</td>
<td style="text-align:left;">
latrans
</td>
<td style="text-align:left;">
Canis.latrans
</td>
<td style="text-align:left;">
coyote
</td>
</tr>
<tr>
<td style="text-align:left;">
Mammalia
</td>
<td style="text-align:left;">
Carnivora
</td>
<td style="text-align:left;">
Canidae
</td>
<td style="text-align:left;">
Canis
</td>
<td style="text-align:left;">
lupus
</td>
<td style="text-align:left;">
Canis.lupus
</td>
<td style="text-align:left;">
gray wolf
</td>
</tr>
<tr>
<td style="text-align:left;">
Mammalia
</td>
<td style="text-align:left;">
Carnivora
</td>
<td style="text-align:left;">
Canidae
</td>
<td style="text-align:left;">
Vulpes
</td>
<td style="text-align:left;">
vulpes
</td>
<td style="text-align:left;">
Vulpes.vulpes
</td>
<td style="text-align:left;">
red fox
</td>
</tr>
<tr>
<td style="text-align:left;">
Mammalia
</td>
<td style="text-align:left;">
Carnivora
</td>
<td style="text-align:left;">
Felidae
</td>
<td style="text-align:left;">
Lynx
</td>
<td style="text-align:left;">
canadensis
</td>
<td style="text-align:left;">
Lynx.canadensis
</td>
<td style="text-align:left;">
canada lynx
</td>
</tr>
<tr>
<td style="text-align:left;">
Mammalia
</td>
<td style="text-align:left;">
Carnivora
</td>
<td style="text-align:left;">
Mustelidae
</td>
<td style="text-align:left;">
Lontra
</td>
<td style="text-align:left;">
canadensis
</td>
<td style="text-align:left;">
Lontra.canadensis
</td>
<td style="text-align:left;">
river otter
</td>
</tr>
<tr>
<td style="text-align:left;">
Mammalia
</td>
<td style="text-align:left;">
Carnivora
</td>
<td style="text-align:left;">
Mustelidae
</td>
<td style="text-align:left;">
Martes
</td>
<td style="text-align:left;">
americana
</td>
<td style="text-align:left;">
Martes.americana
</td>
<td style="text-align:left;">
american marten
</td>
</tr>
<tr>
<td style="text-align:left;">
Mammalia
</td>
<td style="text-align:left;">
Carnivora
</td>
<td style="text-align:left;">
Ursidae
</td>
<td style="text-align:left;">
Ursus
</td>
<td style="text-align:left;">
americanus
</td>
<td style="text-align:left;">
Ursus.americanus
</td>
<td style="text-align:left;">
black bear
</td>
</tr>
<tr>
<td style="text-align:left;">
Mammalia
</td>
<td style="text-align:left;">
Lagomorpha
</td>
<td style="text-align:left;">
Leporidae
</td>
<td style="text-align:left;">
Lepus
</td>
<td style="text-align:left;">
americanus
</td>
<td style="text-align:left;">
Lepus.americanus
</td>
<td style="text-align:left;">
snowshoe hare
</td>
</tr>
<tr>
<td style="text-align:left;">
Mammalia
</td>
<td style="text-align:left;">
Lagomorpha
</td>
<td style="text-align:left;">
Leporidae
</td>
<td style="text-align:left;">
Oryctolagus
</td>
<td style="text-align:left;">
cuniculus
</td>
<td style="text-align:left;">
Oryctolagus.cuniculus
</td>
<td style="text-align:left;">
rabbit
</td>
</tr>
<tr>
<td style="text-align:left;">
Mammalia
</td>
<td style="text-align:left;">
Rodentia
</td>
<td style="text-align:left;">
Sciuridae
</td>
<td style="text-align:left;">
Tamiasciurus
</td>
<td style="text-align:left;">
hudsonicus
</td>
<td style="text-align:left;">
Tamiasciurus.hudsonicus
</td>
<td style="text-align:left;">
red squirrel
</td>
</tr>
</tbody>
</table>
<p>It is possible to compare observed richness across different strata of interest, <strong>however survey effort must be identical between your comparison strata</strong>. This very rarely the case in camera trap studies where cameras break, run out of battery or are deployed for different lengths of time.</p>
<p>The number of species you detect is a function of the amount of effort you spent surveying/the number of individuals detected - the longer a camera is active/the more individuals detected, the more species it will detect. What this means is, unless you saturate a landscape with camera traps, observed richness will underestimate true richness. Consequently, We need ways of comparing species richness which accounts in some way for survey effort.</p>
</div>
<div id="estimated-richness" class="section level2 hasAnchor" number="9.2">
<h2><span class="header-section-number">9.2</span> Estimated richness<a href="composition.html#estimated-richness" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are two commonly used ways to account for survey effort when estimating species richness using camera traps:</p>
<ol style="list-style-type: lower-roman">
<li>using the incidence of rare species to ‘correct’ observed richness (<code>iNext</code>)</li>
<li>using multispecies occupancy models to account for the species present but not observed (occupancy model)</li>
</ol>
<div id="inext-package" class="section level3 hasAnchor" number="9.2.1">
<h3><span class="header-section-number">9.2.1</span> iNext package<a href="composition.html#inext-package" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <a href="https://cran.r-project.org/web/packages/iNEXT/">iNext package</a> (INterpolation and EXTrapolation of species richness) - is both easy to use and rapid to compute. It also comes with a wealth of plotting functions - see the <a href="https://cran.r-project.org/web/packages/iNEXT/vignettes/Introduction.pdf">iNext Quick Introduction</a> for a great walk through tutorial. Its core functionality is based on:</p>
<p><a href="https://esajournals.onlinelibrary.wiley.com/doi/10.1890/13-0133.1">Chao, Anne, et al. “Rarefaction and extrapolation with Hill numbers: a framework for sampling and estimation in species diversity studies.” Ecological monographs 84.1 (2014): 45-67.</a> Which has, to date, been cited &gt;2000 times!</p>
<div id="sampling-locations" class="section level4 hasAnchor" number="9.2.1.1">
<h4><span class="header-section-number">9.2.1.1</span> Sampling locations<a href="composition.html#sampling-locations" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The iNEXT package gets really interesting when we start to compare multiple different strata. e.g. different treatment types or species groupings.</p>
<p>The code to build a multi-strata comparison is very similar to that of a single strata, except now you separate the observations into their relevant categories/strata.</p>
<p>We will compare the different categories using the <code>feature_type</code> column in the covariate file. We match the ‘placenames’ in our locations dataframe with the corresponding capture data in <code>total_obs</code> using the <code>%in%</code> command.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r Rmain"><code class="sourceCode r"><span id="cb109-1"><a href="composition.html#cb109-1" tabindex="-1"></a><span class="co"># Load the packages</span></span>
<span id="cb109-2"><a href="composition.html#cb109-2" tabindex="-1"></a><span class="fu">library</span>(iNEXT); <span class="fu">library</span>(ggplot2); <span class="fu">library</span>(gridExtra)</span>
<span id="cb109-3"><a href="composition.html#cb109-3" tabindex="-1"></a></span>
<span id="cb109-4"><a href="composition.html#cb109-4" tabindex="-1"></a></span>
<span id="cb109-5"><a href="composition.html#cb109-5" tabindex="-1"></a><span class="co"># Use the total observations file</span></span>
<span id="cb109-6"><a href="composition.html#cb109-6" tabindex="-1"></a>total_obs <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/processed_data/AlgarRestorationProject_30min_independent_total_observations.csv&quot;</span>, <span class="at">header=</span>T)</span>
<span id="cb109-7"><a href="composition.html#cb109-7" tabindex="-1"></a></span>
<span id="cb109-8"><a href="composition.html#cb109-8" tabindex="-1"></a><span class="co"># Format it into incidence data</span></span>
<span id="cb109-9"><a href="composition.html#cb109-9" tabindex="-1"></a>inc_dat <span class="ot">&lt;-</span> total_obs <span class="sc">%&gt;%</span> </span>
<span id="cb109-10"><a href="composition.html#cb109-10" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="fu">across</span>(sp_summary<span class="sc">$</span>sp, <span class="sc">~+</span><span class="fu">as.logical</span>(.x)))  <span class="co"># Turn species counts into 0&#39;s and 1&#39;s</span></span>
<span id="cb109-11"><a href="composition.html#cb109-11" tabindex="-1"></a></span>
<span id="cb109-12"><a href="composition.html#cb109-12" tabindex="-1"></a></span>
<span id="cb109-13"><a href="composition.html#cb109-13" tabindex="-1"></a><span class="co"># Read in the locations data frame</span></span>
<span id="cb109-14"><a href="composition.html#cb109-14" tabindex="-1"></a>locs <span class="ot">&lt;-</span>  <span class="fu">read.csv</span>(<span class="st">&quot;data/processed_data/AlgarRestorationProject_camera_locations_and_covariates.csv&quot;</span>)</span>
<span id="cb109-15"><a href="composition.html#cb109-15" tabindex="-1"></a></span>
<span id="cb109-16"><a href="composition.html#cb109-16" tabindex="-1"></a><span class="co"># We first want to create a data subset for each of the strata we are interested in:</span></span>
<span id="cb109-17"><a href="composition.html#cb109-17" tabindex="-1"></a></span>
<span id="cb109-18"><a href="composition.html#cb109-18" tabindex="-1"></a><span class="co"># The treatment types for each Deployment.Location.ID are in the sta file</span></span>
<span id="cb109-19"><a href="composition.html#cb109-19" tabindex="-1"></a><span class="co"># Make an object containing all of the site ID&#39;s for the &quot;Offline&quot; cameras</span></span>
<span id="cb109-20"><a href="composition.html#cb109-20" tabindex="-1"></a>off <span class="ot">&lt;-</span> locs<span class="sc">$</span>placename[locs<span class="sc">$</span>feature_type<span class="sc">==</span><span class="st">&quot;Offline&quot;</span>]</span>
<span id="cb109-21"><a href="composition.html#cb109-21" tabindex="-1"></a><span class="co"># And &quot;HumanUse&quot; cameras</span></span>
<span id="cb109-22"><a href="composition.html#cb109-22" tabindex="-1"></a>hum <span class="ot">&lt;-</span> locs<span class="sc">$</span>placename[locs<span class="sc">$</span>feature_type<span class="sc">==</span><span class="st">&quot;HumanUse&quot;</span>]</span>
<span id="cb109-23"><a href="composition.html#cb109-23" tabindex="-1"></a></span>
<span id="cb109-24"><a href="composition.html#cb109-24" tabindex="-1"></a></span>
<span id="cb109-25"><a href="composition.html#cb109-25" tabindex="-1"></a><span class="co"># Create a new empty list</span></span>
<span id="cb109-26"><a href="composition.html#cb109-26" tabindex="-1"></a>inc_locations <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb109-27"><a href="composition.html#cb109-27" tabindex="-1"></a></span>
<span id="cb109-28"><a href="composition.html#cb109-28" tabindex="-1"></a><span class="co"># Each &quot;treatment&quot; is a separate element within the list</span></span>
<span id="cb109-29"><a href="composition.html#cb109-29" tabindex="-1"></a>inc_locations[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">length</span>(off),  <span class="co"># First count the number of stations</span></span>
<span id="cb109-30"><a href="composition.html#cb109-30" tabindex="-1"></a>                     <span class="co"># Then subset the detections to those stations, sum the columns, and sort the incidents</span></span>
<span id="cb109-31"><a href="composition.html#cb109-31" tabindex="-1"></a>                     inc_dat[inc_dat<span class="sc">$</span>placename <span class="sc">%in%</span> off, sp_summary<span class="sc">$</span>sp] <span class="sc">%&gt;%</span>  <span class="fu">colSums</span>() <span class="sc">%&gt;%</span> <span class="fu">sort</span>(<span class="at">decreasing=</span>T))</span>
<span id="cb109-32"><a href="composition.html#cb109-32" tabindex="-1"></a></span>
<span id="cb109-33"><a href="composition.html#cb109-33" tabindex="-1"></a></span>
<span id="cb109-34"><a href="composition.html#cb109-34" tabindex="-1"></a>inc_locations[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">length</span>(hum),  <span class="co"># Count the number of stations</span></span>
<span id="cb109-35"><a href="composition.html#cb109-35" tabindex="-1"></a>                     <span class="co"># Then subset the detections to those stations, sum the columns, and sort the incidents</span></span>
<span id="cb109-36"><a href="composition.html#cb109-36" tabindex="-1"></a>                     inc_dat[inc_dat<span class="sc">$</span>placename <span class="sc">%in%</span> hum, sp_summary<span class="sc">$</span>sp] <span class="sc">%&gt;%</span>  <span class="fu">colSums</span>() <span class="sc">%&gt;%</span> <span class="fu">sort</span>(<span class="at">decreasing=</span>T))</span>
<span id="cb109-37"><a href="composition.html#cb109-37" tabindex="-1"></a></span>
<span id="cb109-38"><a href="composition.html#cb109-38" tabindex="-1"></a><span class="co"># Give them names</span></span>
<span id="cb109-39"><a href="composition.html#cb109-39" tabindex="-1"></a><span class="fu">names</span>(inc_locations) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Offline&quot;</span>, <span class="st">&quot;HumanUse&quot;</span>)</span>
<span id="cb109-40"><a href="composition.html#cb109-40" tabindex="-1"></a></span>
<span id="cb109-41"><a href="composition.html#cb109-41" tabindex="-1"></a><span class="co"># Run the iNEXT code</span></span>
<span id="cb109-42"><a href="composition.html#cb109-42" tabindex="-1"></a>out.inc <span class="ot">&lt;-</span> <span class="fu">iNEXT</span>(inc_locations, <span class="at">q=</span><span class="dv">0</span>, <span class="at">datatype=</span><span class="st">&quot;incidence_freq&quot;</span>)</span>
<span id="cb109-43"><a href="composition.html#cb109-43" tabindex="-1"></a><span class="co"># Sample‐size‐based R/E curves</span></span>
<span id="cb109-44"><a href="composition.html#cb109-44" tabindex="-1"></a><span class="fu">ggiNEXT</span>(out.inc, <span class="at">type=</span><span class="dv">1</span>, <span class="at">color.var=</span><span class="st">&quot;Assemblage&quot;</span>) <span class="sc">+</span></span>
<span id="cb109-45"><a href="composition.html#cb109-45" tabindex="-1"></a>       <span class="fu">labs</span>(<span class="at">y=</span><span class="st">&quot;Richness&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Locations surveyed&quot;</span>) <span class="sc">+</span> </span>
<span id="cb109-46"><a href="composition.html#cb109-46" tabindex="-1"></a><span class="fu">theme_classic</span>() </span></code></pre></div>
<p><img src="Intro-to-data-analysis_files/figure-html/ch6_4-1.png" width="672" /></p>
</div>
</div>
<div id="sampling-duration-example" class="section level3 hasAnchor" number="9.2.2">
<h3><span class="header-section-number">9.2.2</span> Sampling duration example<a href="composition.html#sampling-duration-example" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If we want to explore the species accumulation patterns as a function of the number of survey duration, we can make use of the <code>...weekly_observations</code> dataframes.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r Rmain"><code class="sourceCode r"><span id="cb110-1"><a href="composition.html#cb110-1" tabindex="-1"></a>week_obs<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/processed_data/AlgarRestorationProject_30min_independent_weekly_observations.csv&quot;</span>, <span class="at">header=</span>T)</span>
<span id="cb110-2"><a href="composition.html#cb110-2" tabindex="-1"></a></span>
<span id="cb110-3"><a href="composition.html#cb110-3" tabindex="-1"></a><span class="co"># Turn it into binary incidents</span></span>
<span id="cb110-4"><a href="composition.html#cb110-4" tabindex="-1"></a>inc_dat <span class="ot">&lt;-</span> week_obs <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="fu">across</span>(sp_summary<span class="sc">$</span>sp, <span class="sc">~+</span><span class="fu">as.logical</span>(.x))) </span>
<span id="cb110-5"><a href="composition.html#cb110-5" tabindex="-1"></a></span>
<span id="cb110-6"><a href="composition.html#cb110-6" tabindex="-1"></a><span class="co"># Create a new empty list</span></span>
<span id="cb110-7"><a href="composition.html#cb110-7" tabindex="-1"></a>inc_time <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb110-8"><a href="composition.html#cb110-8" tabindex="-1"></a></span>
<span id="cb110-9"><a href="composition.html#cb110-9" tabindex="-1"></a><span class="co"># Only sum the data for each relevent strata</span></span>
<span id="cb110-10"><a href="composition.html#cb110-10" tabindex="-1"></a>inc_time[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">nrow</span>(inc_dat[inc_dat<span class="sc">$</span>placename <span class="sc">%in%</span> off,]),  <span class="co"># Count the number of weeks we have data for in each strata</span></span>
<span id="cb110-11"><a href="composition.html#cb110-11" tabindex="-1"></a>                     <span class="co"># Then subset the detections to those stations, sum the columns, and sort the incidents</span></span>
<span id="cb110-12"><a href="composition.html#cb110-12" tabindex="-1"></a>                     inc_dat[inc_dat<span class="sc">$</span>placename <span class="sc">%in%</span> off, sp_summary<span class="sc">$</span>sp] <span class="sc">%&gt;%</span>  <span class="fu">colSums</span>() <span class="sc">%&gt;%</span> <span class="fu">sort</span>(<span class="at">decreasing=</span>T))</span>
<span id="cb110-13"><a href="composition.html#cb110-13" tabindex="-1"></a></span>
<span id="cb110-14"><a href="composition.html#cb110-14" tabindex="-1"></a></span>
<span id="cb110-15"><a href="composition.html#cb110-15" tabindex="-1"></a>inc_time[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">nrow</span>(inc_dat[inc_dat<span class="sc">$</span>placename <span class="sc">%in%</span> hum,]),  <span class="co"># Count the number of stations</span></span>
<span id="cb110-16"><a href="composition.html#cb110-16" tabindex="-1"></a>                     <span class="co"># Then subset the detections to those stations, sum the columns, and sort the incidents</span></span>
<span id="cb110-17"><a href="composition.html#cb110-17" tabindex="-1"></a>                     inc_dat[inc_dat<span class="sc">$</span>placename <span class="sc">%in%</span> hum, sp_summary<span class="sc">$</span>sp] <span class="sc">%&gt;%</span>  <span class="fu">colSums</span>() <span class="sc">%&gt;%</span> <span class="fu">sort</span>(<span class="at">decreasing=</span>T))</span>
<span id="cb110-18"><a href="composition.html#cb110-18" tabindex="-1"></a></span>
<span id="cb110-19"><a href="composition.html#cb110-19" tabindex="-1"></a><span class="co"># Give them names</span></span>
<span id="cb110-20"><a href="composition.html#cb110-20" tabindex="-1"></a><span class="fu">names</span>(inc_time) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Offline&quot;</span>, <span class="st">&quot;HumanUse&quot;</span>)</span>
<span id="cb110-21"><a href="composition.html#cb110-21" tabindex="-1"></a></span>
<span id="cb110-22"><a href="composition.html#cb110-22" tabindex="-1"></a></span>
<span id="cb110-23"><a href="composition.html#cb110-23" tabindex="-1"></a><span class="co"># Run the model</span></span>
<span id="cb110-24"><a href="composition.html#cb110-24" tabindex="-1"></a>out.inc <span class="ot">&lt;-</span> <span class="fu">iNEXT</span>(inc_time, <span class="at">q=</span><span class="dv">0</span>, <span class="at">datatype=</span><span class="st">&quot;incidence_freq&quot;</span>)</span>
<span id="cb110-25"><a href="composition.html#cb110-25" tabindex="-1"></a><span class="co"># Sample‐size‐based R/E curves</span></span>
<span id="cb110-26"><a href="composition.html#cb110-26" tabindex="-1"></a><span class="fu">ggiNEXT</span>(out.inc, <span class="at">type=</span><span class="dv">1</span>, <span class="at">color.var=</span><span class="st">&quot;Assemblage&quot;</span>) <span class="sc">+</span></span>
<span id="cb110-27"><a href="composition.html#cb110-27" tabindex="-1"></a>       <span class="fu">labs</span>(<span class="at">y=</span><span class="st">&quot;Richness&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Camera weeks&quot;</span>) <span class="sc">+</span></span>
<span id="cb110-28"><a href="composition.html#cb110-28" tabindex="-1"></a><span class="fu">theme_classic</span>() </span></code></pre></div>
<p><img src="Intro-to-data-analysis_files/figure-html/ch6_20-1.png" width="672" /></p>
<p>Which suggests the same pattern as the site based example.</p>
</div>
</div>
<div id="other-diversity-metrics" class="section level2 hasAnchor" number="9.3">
<h2><span class="header-section-number">9.3</span> Other diversity metrics<a href="composition.html#other-diversity-metrics" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="simpson-and-shannon" class="section level3 hasAnchor" number="9.3.1">
<h3><span class="header-section-number">9.3.1</span> Simpson and Shannon<a href="composition.html#simpson-and-shannon" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>One issue with species richness assessments is that they weight all species equally, thus a community with 12 species all present in equal abundances will give you the same richness value as a high skewed community with one highly abundant species, and 11 very rare ones. Consequently, you might want to estimate species diversity.</p>
<p>Luckily, the iNEXT package is well suited for comparisons of diversity indices through the use of hill numbers - of which the ‘q’ value represents the traditional Shannon (q=1) and Simpson (q=2) diversity indices (species richness: q = 0). <em>Note</em> Increasing values of q reduces the influence of rare species on your estimate of community diversity.</p>
<p>For example, we might want to compare the species diversity across our two focal strata:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r Rmain"><code class="sourceCode r"><span id="cb111-1"><a href="composition.html#cb111-1" tabindex="-1"></a><span class="co"># We also introduce the object t -&gt; which reflects the range of values over which you want to predict species richness</span></span>
<span id="cb111-2"><a href="composition.html#cb111-2" tabindex="-1"></a>out <span class="ot">&lt;-</span> <span class="fu">iNEXT</span>(inc_time, <span class="at">q=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>) ,<span class="at">datatype=</span><span class="st">&quot;incidence_freq&quot;</span> )</span>
<span id="cb111-3"><a href="composition.html#cb111-3" tabindex="-1"></a></span>
<span id="cb111-4"><a href="composition.html#cb111-4" tabindex="-1"></a><span class="fu">ggiNEXT</span>(out, <span class="at">type=</span><span class="dv">1</span>, <span class="at">facet.var=</span><span class="st">&quot;Order.q&quot;</span>, <span class="at">color.var=</span><span class="st">&quot;Assemblage&quot;</span>) <span class="sc">+</span> <span class="fu">theme_classic</span>() </span></code></pre></div>
<p><img src="Intro-to-data-analysis_files/figure-html/ch6_22-1.png" width="672" /></p>
</div>
<div id="more-examples-in-the-literature" class="section level3 hasAnchor" number="9.3.2">
<h3><span class="header-section-number">9.3.2</span> More examples in the literature<a href="composition.html#more-examples-in-the-literature" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Some examples of using iNEXT with camera trap data:</p>
<p><a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0126373">Cusack et al. 2015</a> Random versus Game Trail-Based Camera Trap Placement Strategy for Monitoring Terrestrial Mammal Communities</p>
<p><a href="https://besjournals.onlinelibrary.wiley.com/doi/full/10.1111/2041-210X.13370">Kays et al. 2020</a> An empirical evaluation of camera trap study design: How many, how long and when?</p>
<p><a href="https://besjournals.onlinelibrary.wiley.com/doi/full/10.1111/1365-2664.13074">Semper-Pascual et a. 2018</a> Mapping extinction debt highlights conservation opportunities for birds and mammals in the South American Chaco</p>
<p><strong>Publishing note</strong></p>
<p>If you publish your work based on the results from the iNEXT package, you should make references to the
following methodology paper (Chao et al. 2014) and the application paper (Hsieh, Ma &amp; Chao, 2016):</p>
<p>Chao A, Gotelli NJ, Hsieh TC, Sande EL, Ma KH, Colwell RK, Ellison AM (2014). “Rarefaction and extrapolation with Hill numbers: a framework for sampling and estimation in species diversity studies.” Ecological Monographs, 84, 45–67.</p>
<p>Hsieh TC, Ma KH, Chao A (2022). iNEXT: Interpolation and Extrapolation for Species Diversity. R package version 3.0.0, <a href="http://chao.stat.nthu.edu.tw/wordpress/software_download/" class="uri">http://chao.stat.nthu.edu.tw/wordpress/software_download/</a>.</p>
</div>
<div id="multispecies-occupancy-model" class="section level3 hasAnchor" number="9.3.3">
<h3><span class="header-section-number">9.3.3</span> Multispecies occupancy model<a href="composition.html#multispecies-occupancy-model" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>It is also possible to estimate species richness in a given area/strata using multispecies occupancy models. For an example with code in the appendices see:</p>
<p><a href="https://besjournals.onlinelibrary.wiley.com/doi/full/10.1111/1365-2664.12399">Tobler, M. et al. Spatiotemporal hierarchical modelling of species richness and occupancy using camera trap data. J. Appl. Ecol. (2015).</a></p>
</div>
</div>
<div id="community-structure" class="section level2 hasAnchor" number="9.4">
<h2><span class="header-section-number">9.4</span> Community structure<a href="composition.html#community-structure" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>One of the shortfalls in the diversity index approaches is that you can compare two sites with completely different mammal assemblages, but identical diversity estimates! So we would conclude that the two are the same, however,in reality their compositions are totally different. Another way to assess community structure is with ordination methods (e.g non-metric multidimensional scaling or NMDS).</p>
<p>For a fantastic (although now somewhat dated) blog on NMDS methods see: <a href="https://jonlefcheck.net/2012/10/24/nmds-tutorial-in-r/">Sample(ecology)’s NMDS tutorial in R</a>.</p>
<p>Luckily a basic NMDS is very easy to run from our <code>...total_observations</code> dataframe:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r Rmain"><code class="sourceCode r"><span id="cb112-1"><a href="composition.html#cb112-1" tabindex="-1"></a><span class="co">#install.packages(&quot;vegan&quot;)</span></span>
<span id="cb112-2"><a href="composition.html#cb112-2" tabindex="-1"></a><span class="fu">library</span>(vegan)</span>
<span id="cb112-3"><a href="composition.html#cb112-3" tabindex="-1"></a><span class="co"># Import your count data</span></span>
<span id="cb112-4"><a href="composition.html#cb112-4" tabindex="-1"></a>total_obs <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/processed_data/AlgarRestorationProject_30min_independent_total_observations.csv&quot;</span>, <span class="at">header=</span>T)</span>
<span id="cb112-5"><a href="composition.html#cb112-5" tabindex="-1"></a></span>
<span id="cb112-6"><a href="composition.html#cb112-6" tabindex="-1"></a><span class="co">#Import the location and covariate data</span></span>
<span id="cb112-7"><a href="composition.html#cb112-7" tabindex="-1"></a>locs <span class="ot">&lt;-</span>  <span class="fu">read.csv</span>(<span class="st">&quot;data/processed_data/AlgarRestorationProject_camera_locations_and_covariates.csv&quot;</span>)</span>
<span id="cb112-8"><a href="composition.html#cb112-8" tabindex="-1"></a></span>
<span id="cb112-9"><a href="composition.html#cb112-9" tabindex="-1"></a><span class="co"># Add the covariates to your total_obs dataframe</span></span>
<span id="cb112-10"><a href="composition.html#cb112-10" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">left_join</span>(total_obs, locs)</span>
<span id="cb112-11"><a href="composition.html#cb112-11" tabindex="-1"></a></span>
<span id="cb112-12"><a href="composition.html#cb112-12" tabindex="-1"></a><span class="co"># Convert to categorical factors</span></span>
<span id="cb112-13"><a href="composition.html#cb112-13" tabindex="-1"></a>dat <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> </span>
<span id="cb112-14"><a href="composition.html#cb112-14" tabindex="-1"></a>            <span class="fu">mutate_if</span>(is.character,as.factor)</span>
<span id="cb112-15"><a href="composition.html#cb112-15" tabindex="-1"></a></span>
<span id="cb112-16"><a href="composition.html#cb112-16" tabindex="-1"></a><span class="co"># Subset to just the count columns</span></span>
<span id="cb112-17"><a href="composition.html#cb112-17" tabindex="-1"></a>counts <span class="ot">&lt;-</span> dat[,sp_summary<span class="sc">$</span>sp]</span>
<span id="cb112-18"><a href="composition.html#cb112-18" tabindex="-1"></a></span>
<span id="cb112-19"><a href="composition.html#cb112-19" tabindex="-1"></a><span class="co"># Covert it into a matrix</span></span>
<span id="cb112-20"><a href="composition.html#cb112-20" tabindex="-1"></a>m_counts <span class="ot">&lt;-</span>  <span class="fu">as.matrix</span>(counts)</span>
<span id="cb112-21"><a href="composition.html#cb112-21" tabindex="-1"></a></span>
<span id="cb112-22"><a href="composition.html#cb112-22" tabindex="-1"></a></span>
<span id="cb112-23"><a href="composition.html#cb112-23" tabindex="-1"></a><span class="co"># Run the model</span></span>
<span id="cb112-24"><a href="composition.html#cb112-24" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>) <span class="co"># To make sure we all get the same result</span></span>
<span id="cb112-25"><a href="composition.html#cb112-25" tabindex="-1"></a></span>
<span id="cb112-26"><a href="composition.html#cb112-26" tabindex="-1"></a><span class="co"># run metaMDS on the count matrix using the &quot; Bray-Curtis dissimilarity&quot; note others are available</span></span>
<span id="cb112-27"><a href="composition.html#cb112-27" tabindex="-1"></a>nmds <span class="ot">=</span> <span class="fu">metaMDS</span>(m_counts,          <span class="co"># The count matrix</span></span>
<span id="cb112-28"><a href="composition.html#cb112-28" tabindex="-1"></a>               <span class="at">distance =</span> <span class="st">&quot;bray&quot;</span>, <span class="co"># The method of solving </span></span>
<span id="cb112-29"><a href="composition.html#cb112-29" tabindex="-1"></a>               <span class="at">trace=</span><span class="dv">0</span>)           <span class="co"># Supress the output - trace=1 is more informative</span></span></code></pre></div>
<div id="extracting-data-for-plotting" class="section level3 hasAnchor" number="9.4.1">
<h3><span class="header-section-number">9.4.1</span> Extracting data for plotting<a href="composition.html#extracting-data-for-plotting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To make a nice plot of the NMDS data we need to learn how to extract the data from it:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r Rmain"><code class="sourceCode r"><span id="cb113-1"><a href="composition.html#cb113-1" tabindex="-1"></a><span class="co"># Make a dataframe out of the x and Y scores</span></span>
<span id="cb113-2"><a href="composition.html#cb113-2" tabindex="-1"></a>site.scores <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">scores</span>(nmds)<span class="sc">$</span>sites)</span>
<span id="cb113-3"><a href="composition.html#cb113-3" tabindex="-1"></a>species.scores <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">scores</span>(nmds)<span class="sc">$</span>species)</span>
<span id="cb113-4"><a href="composition.html#cb113-4" tabindex="-1"></a></span>
<span id="cb113-5"><a href="composition.html#cb113-5" tabindex="-1"></a><span class="co"># Add in the covariate data</span></span>
<span id="cb113-6"><a href="composition.html#cb113-6" tabindex="-1"></a><span class="co">#add covariate columns to data frame </span></span>
<span id="cb113-7"><a href="composition.html#cb113-7" tabindex="-1"></a>site.scores<span class="sc">$</span>placename <span class="ot">&lt;-</span> dat<span class="sc">$</span>placename</span>
<span id="cb113-8"><a href="composition.html#cb113-8" tabindex="-1"></a>site.scores<span class="sc">$</span>feature_type <span class="ot">&lt;-</span> dat<span class="sc">$</span>feature_type</span>
<span id="cb113-9"><a href="composition.html#cb113-9" tabindex="-1"></a></span>
<span id="cb113-10"><a href="composition.html#cb113-10" tabindex="-1"></a><span class="co"># Assign colors to our feature_types using viridis</span></span>
<span id="cb113-11"><a href="composition.html#cb113-11" tabindex="-1"></a><span class="co"># then use the turbo() function to assign each level a color</span></span>
<span id="cb113-12"><a href="composition.html#cb113-12" tabindex="-1"></a>col.cat <span class="ot">&lt;-</span> <span class="fu">cividis</span>(<span class="fu">length</span>(<span class="fu">levels</span>(dat<span class="sc">$</span>feature_type)))</span>
<span id="cb113-13"><a href="composition.html#cb113-13" tabindex="-1"></a><span class="co"># then we apply it to the dataframe</span></span>
<span id="cb113-14"><a href="composition.html#cb113-14" tabindex="-1"></a>dat<span class="sc">$</span>colours <span class="ot">&lt;-</span> col.cat[dat<span class="sc">$</span>feature_type]</span>
<span id="cb113-15"><a href="composition.html#cb113-15" tabindex="-1"></a></span>
<span id="cb113-16"><a href="composition.html#cb113-16" tabindex="-1"></a><span class="co"># Plot the result</span></span>
<span id="cb113-17"><a href="composition.html#cb113-17" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb113-18"><a href="composition.html#cb113-18" tabindex="-1"></a><span class="co"># Make an empty plot type=&quot;n</span></span>
<span id="cb113-19"><a href="composition.html#cb113-19" tabindex="-1"></a><span class="fu">ordiplot</span>(nmds,<span class="at">type=</span><span class="st">&quot;n&quot;</span>, <span class="at">las=</span><span class="dv">1</span>,</span>
<span id="cb113-20"><a href="composition.html#cb113-20" tabindex="-1"></a>         <span class="at">xlim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="fl">1.5</span>,<span class="fl">1.2</span>))</span>
<span id="cb113-21"><a href="composition.html#cb113-21" tabindex="-1"></a><span class="co"># Add an elipse corresponding to each site</span></span>
<span id="cb113-22"><a href="composition.html#cb113-22" tabindex="-1"></a><span class="fu">ordiellipse</span>(nmds, <span class="at">groups=</span>dat<span class="sc">$</span>feature_type,</span>
<span id="cb113-23"><a href="composition.html#cb113-23" tabindex="-1"></a>            <span class="at">col=</span>col.cat, <span class="at">lwd=</span><span class="dv">2</span>)</span>
<span id="cb113-24"><a href="composition.html#cb113-24" tabindex="-1"></a><span class="co"># Add the species loadings</span></span>
<span id="cb113-25"><a href="composition.html#cb113-25" tabindex="-1"></a><span class="fu">orditorp</span>(nmds,<span class="at">display=</span><span class="st">&quot;species&quot;</span>,<span class="at">col=</span><span class="st">&quot;red&quot;</span>,<span class="at">air=</span><span class="fl">0.5</span>)</span>
<span id="cb113-26"><a href="composition.html#cb113-26" tabindex="-1"></a><span class="co"># Add the site loadings</span></span>
<span id="cb113-27"><a href="composition.html#cb113-27" tabindex="-1"></a><span class="fu">points</span>(site.scores<span class="sc">$</span>NMDS1, site.scores<span class="sc">$</span>NMDS2, <span class="at">col=</span>dat<span class="sc">$</span>colours, <span class="at">pch=</span><span class="dv">19</span>)</span>
<span id="cb113-28"><a href="composition.html#cb113-28" tabindex="-1"></a><span class="co"># Add a legend</span></span>
<span id="cb113-29"><a href="composition.html#cb113-29" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">&quot;topleft&quot;</span>, <span class="fu">levels</span>(dat<span class="sc">$</span>feature_type), <span class="at">col=</span>col.cat, <span class="at">pch=</span><span class="dv">19</span> )</span></code></pre></div>
<p><img src="Intro-to-data-analysis_files/figure-html/ch6_24b-1.png" width="672" /></p>
<p>The different <code>feature_types</code> to not differ majorly in their species compositions - there is a huge degree of overlap between sites.</p>
<p>The NMDS framework is flexible - we can also add environmental covariates using <code>envfit</code> to explain differences we might find. Checkout <a href="https://jkzorz.github.io/2020/04/04/NMDS-extras.html">a great blog on this by Jackie Zorz</a> for more information!</p>
</div>
<div id="examples-in-the-literature" class="section level3 hasAnchor" number="9.4.2">
<h3><span class="header-section-number">9.4.2</span> Examples in the literature<a href="composition.html#examples-in-the-literature" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><a href="https://www.frontiersin.org/articles/10.3389/ffgc.2021.673071/full">Haysom, J. K., Deere, N. J., Wearn, O. R., Mahyudin, A., Jami, J. B., Reynolds, G., &amp; Struebig, M. J. (2021). Life in the Canopy: Using Camera-Traps to Inventory Arboreal Rainforest Mammals in Borneo. Frontiers in Forests and Global Change, 83</a></p>
<p><strong>Note - they also use iNext!</strong> Give that paper a look!</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="exploration.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="habitat-use.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/06-community_metrics.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Intro-to-data-analysis.pdf", "Intro-to-data-analysis.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
