<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Analysis data creation | An Introduction to Camera Trap Data Management and Analysis in R</title>
  <meta name="description" content="Materials for the three day camera trap data management and analysis course" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Analysis data creation | An Introduction to Camera Trap Data Management and Analysis in R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Materials for the three day camera trap data management and analysis course" />
  <meta name="github-repo" content="WildCoLab/Introduction-to-Camera-Trap-Data-Management-and-Analysis-in-R" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Analysis data creation | An Introduction to Camera Trap Data Management and Analysis in R" />
  
  <meta name="twitter:description" content="Materials for the three day camera trap data management and analysis course" />
  

<meta name="author" content="Christopher Beirne and the Wildlife Coexistence Lab, UBC" />


<meta name="date" content="2022-10-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="error-checking.html"/>
<link rel="next" href="covariates.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">WildCo Data Analysis Intro</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#ethos"><i class="fa fa-check"></i><b>1.1</b> Ethos</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#what-this-course-is"><i class="fa fa-check"></i><b>1.2</b> What this course is</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#what-this-course-is-not"><i class="fa fa-check"></i><b>1.3</b> What this course is not</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#how-to-use-this-book"><i class="fa fa-check"></i><b>1.4</b> How to use this book</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#get-in-touch"><i class="fa fa-check"></i><b>1.5</b> Get in touch</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i><b>1.6</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="preparing-for-the-course.html"><a href="preparing-for-the-course.html"><i class="fa fa-check"></i><b>2</b> Preparing for the course</a>
<ul>
<li class="chapter" data-level="2.1" data-path="preparing-for-the-course.html"><a href="preparing-for-the-course.html#install-r"><i class="fa fa-check"></i><b>2.1</b> Install R</a></li>
<li class="chapter" data-level="2.2" data-path="preparing-for-the-course.html"><a href="preparing-for-the-course.html#install-rstudio"><i class="fa fa-check"></i><b>2.2</b> Install RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="preparing-for-the-course.html"><a href="preparing-for-the-course.html#install-the-required-packages"><i class="fa fa-check"></i><b>2.3</b> Install the required packages</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="preparing-for-the-course.html"><a href="preparing-for-the-course.html#cran-packages"><i class="fa fa-check"></i><b>2.3.1</b> CRAN packages</a></li>
<li class="chapter" data-level="2.3.2" data-path="preparing-for-the-course.html"><a href="preparing-for-the-course.html#other-packages"><i class="fa fa-check"></i><b>2.3.2</b> Other packages</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="preparing-for-the-course.html"><a href="preparing-for-the-course.html#create-an-r-project"><i class="fa fa-check"></i><b>2.4</b> Create an R project</a></li>
<li class="chapter" data-level="2.5" data-path="preparing-for-the-course.html"><a href="preparing-for-the-course.html#download-the-data-files"><i class="fa fa-check"></i><b>2.5</b> Download the data files</a></li>
<li class="chapter" data-level="2.6" data-path="preparing-for-the-course.html"><a href="preparing-for-the-course.html#the-example-datasets"><i class="fa fa-check"></i><b>2.6</b> The example datasets</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="preparing-for-the-course.html"><a href="preparing-for-the-course.html#example_data"><i class="fa fa-check"></i><b>2.6.1</b> example_data</a></li>
<li class="chapter" data-level="2.6.2" data-path="preparing-for-the-course.html"><a href="preparing-for-the-course.html#your_data"><i class="fa fa-check"></i><b>2.6.2</b> your_data</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="preparing-for-the-course.html"><a href="preparing-for-the-course.html#a-bonus-non-essential-package"><i class="fa fa-check"></i><b>2.7</b> A bonus, non essential, package</a></li>
<li class="chapter" data-level="2.8" data-path="preparing-for-the-course.html"><a href="preparing-for-the-course.html#practise-before-the-course"><i class="fa fa-check"></i><b>2.8</b> Practise before the course</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html"><i class="fa fa-check"></i><b>3</b> Preprocessing and labelling</a>
<ul>
<li class="chapter" data-level="3.1" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#data-storage"><i class="fa fa-check"></i><b>3.1</b> Data storage</a></li>
<li class="chapter" data-level="3.2" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#preprocessing"><i class="fa fa-check"></i><b>3.2</b> Preprocessing</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#renaming"><i class="fa fa-check"></i><b>3.2.1</b> Renaming</a></li>
<li class="chapter" data-level="3.2.2" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#automated-labelers"><i class="fa fa-check"></i><b>3.2.2</b> Automated Labelers</a></li>
<li class="chapter" data-level="3.2.3" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#timelapse-extraction"><i class="fa fa-check"></i><b>3.2.3</b> Timelapse extraction</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#labelling"><i class="fa fa-check"></i><b>3.3</b> Labelling</a></li>
<li class="chapter" data-level="3.4" data-path="preprocessing-and-labelling.html"><a href="preprocessing-and-labelling.html#update-deployment-end-dates"><i class="fa fa-check"></i><b>3.4</b> Update deployment end dates</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="standard.html"><a href="standard.html"><i class="fa fa-check"></i><b>4</b> Metadata standardisation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="standard.html"><a href="standard.html#the-wildlife-insights-minimum-metadata-standards"><i class="fa fa-check"></i><b>4.1</b> The Wildlife Insights Minimum Metadata Standards</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="standard.html"><a href="standard.html#project-data"><i class="fa fa-check"></i><b>4.1.1</b> Project data</a></li>
<li class="chapter" data-level="4.1.2" data-path="standard.html"><a href="standard.html#detection-data"><i class="fa fa-check"></i><b>4.1.2</b> Detection data</a></li>
<li class="chapter" data-level="4.1.3" data-path="standard.html"><a href="standard.html#deployment-data"><i class="fa fa-check"></i><b>4.1.3</b> Deployment data</a></li>
<li class="chapter" data-level="4.1.4" data-path="standard.html"><a href="standard.html#camera-inventory"><i class="fa fa-check"></i><b>4.1.4</b> Camera inventory</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="error-checking.html"><a href="error-checking.html"><i class="fa fa-check"></i><b>5</b> Error checking</a>
<ul>
<li class="chapter" data-level="5.1" data-path="error-checking.html"><a href="error-checking.html#standardised-exploration-script"><i class="fa fa-check"></i><b>5.1</b> Standardised exploration script</a></li>
<li class="chapter" data-level="5.2" data-path="error-checking.html"><a href="error-checking.html#format-your-dates"><i class="fa fa-check"></i><b>5.2</b> Format your dates</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="error-checking.html"><a href="error-checking.html#lubridate-examples"><i class="fa fa-check"></i><b>5.2.1</b> Lubridate examples</a></li>
<li class="chapter" data-level="5.2.2" data-path="error-checking.html"><a href="error-checking.html#deployment-dates"><i class="fa fa-check"></i><b>5.2.2</b> Deployment dates</a></li>
<li class="chapter" data-level="5.2.3" data-path="error-checking.html"><a href="error-checking.html#image-dates"><i class="fa fa-check"></i><b>5.2.3</b> Image dates</a></li>
<li class="chapter" data-level="5.2.4" data-path="error-checking.html"><a href="error-checking.html#basic-summaries"><i class="fa fa-check"></i><b>5.2.4</b> Basic summaries</a></li>
<li class="chapter" data-level="5.2.5" data-path="error-checking.html"><a href="error-checking.html#quick-error-checks"><i class="fa fa-check"></i><b>5.2.5</b> Quick error checks</a></li>
<li class="chapter" data-level="5.2.6" data-path="error-checking.html"><a href="error-checking.html#camera-activity"><i class="fa fa-check"></i><b>5.2.6</b> Camera activity</a></li>
<li class="chapter" data-level="5.2.7" data-path="error-checking.html"><a href="error-checking.html#detection-check"><i class="fa fa-check"></i><b>5.2.7</b> Detection check</a></li>
<li class="chapter" data-level="5.2.8" data-path="error-checking.html"><a href="error-checking.html#taxonomy-check"><i class="fa fa-check"></i><b>5.2.8</b> Taxonomy check</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="error-checking.html"><a href="error-checking.html#diel-activity-check"><i class="fa fa-check"></i><b>5.3</b> Diel activity check</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="analysis-data-creation.html"><a href="analysis-data-creation.html"><i class="fa fa-check"></i><b>6</b> Analysis data creation</a>
<ul>
<li class="chapter" data-level="6.1" data-path="analysis-data-creation.html"><a href="analysis-data-creation.html#common-analysis-data-formats"><i class="fa fa-check"></i><b>6.1</b> Common analysis data formats</a></li>
<li class="chapter" data-level="6.2" data-path="analysis-data-creation.html"><a href="analysis-data-creation.html#independent-detections"><i class="fa fa-check"></i><b>6.2</b> Independent detections</a></li>
<li class="chapter" data-level="6.3" data-path="analysis-data-creation.html"><a href="analysis-data-creation.html#effort-look-up"><i class="fa fa-check"></i><b>6.3</b> Effort look-up</a></li>
<li class="chapter" data-level="6.4" data-path="analysis-data-creation.html"><a href="analysis-data-creation.html#countsdetections-by-time-interval"><i class="fa fa-check"></i><b>6.4</b> Counts/detections by time interval</a></li>
<li class="chapter" data-level="6.5" data-path="analysis-data-creation.html"><a href="analysis-data-creation.html#our-data"><i class="fa fa-check"></i><b>6.5</b> Our data</a></li>
<li class="chapter" data-level="6.6" data-path="analysis-data-creation.html"><a href="analysis-data-creation.html#filter-to-target-species"><i class="fa fa-check"></i><b>6.6</b> 1) Filter to target species</a></li>
<li class="chapter" data-level="6.7" data-path="analysis-data-creation.html"><a href="analysis-data-creation.html#create-a-camera-activity-lookup"><i class="fa fa-check"></i><b>6.7</b> 2) Create a camera activity lookup</a></li>
<li class="chapter" data-level="6.8" data-path="analysis-data-creation.html"><a href="analysis-data-creation.html#determine-independent-camera-detections"><i class="fa fa-check"></i><b>6.8</b> 3)Determine ‘independent’ camera detections</a></li>
<li class="chapter" data-level="6.9" data-path="analysis-data-creation.html"><a href="analysis-data-creation.html#creating-analysis-dataframes"><i class="fa fa-check"></i><b>6.9</b> 4) Creating analysis dataframes</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="covariates.html"><a href="covariates.html"><i class="fa fa-check"></i><b>7</b> Analysis covariates</a>
<ul>
<li class="chapter" data-level="7.1" data-path="covariates.html"><a href="covariates.html#species-traits"><i class="fa fa-check"></i><b>7.1</b> Species traits</a></li>
<li class="chapter" data-level="7.2" data-path="covariates.html"><a href="covariates.html#camera-station-covariates"><i class="fa fa-check"></i><b>7.2</b> Camera station covariates</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="covariates.html"><a href="covariates.html#locally-collected-covariates"><i class="fa fa-check"></i><b>7.2.1</b> Locally collected covariates</a></li>
<li class="chapter" data-level="7.2.2" data-path="covariates.html"><a href="covariates.html#remotely-collected-covariates"><i class="fa fa-check"></i><b>7.2.2</b> Remotely collected covariates</a></li>
<li class="chapter" data-level="7.2.3" data-path="covariates.html"><a href="covariates.html#extracting-data-from-local-rasters"><i class="fa fa-check"></i><b>7.2.3</b> Extracting data from local rasters</a></li>
<li class="chapter" data-level="7.2.4" data-path="covariates.html"><a href="covariates.html#elevatorr"><i class="fa fa-check"></i><b>7.2.4</b> elevatorR</a></li>
<li class="chapter" data-level="7.2.5" data-path="covariates.html"><a href="covariates.html#open-street-maps"><i class="fa fa-check"></i><b>7.2.5</b> Open Street Maps</a></li>
<li class="chapter" data-level="7.2.6" data-path="covariates.html"><a href="covariates.html#google-earth-engine"><i class="fa fa-check"></i><b>7.2.6</b> Google Earth Engine</a></li>
<li class="chapter" data-level="7.2.7" data-path="covariates.html"><a href="covariates.html#time-varying-covariates"><i class="fa fa-check"></i><b>7.2.7</b> Time-varying covariates</a></li>
<li class="chapter" data-level="7.2.8" data-path="covariates.html"><a href="covariates.html#digging-deeper"><i class="fa fa-check"></i><b>7.2.8</b> Digging deeper</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="covariates.html"><a href="covariates.html#convert-and-save-your-covariates"><i class="fa fa-check"></i><b>7.3</b> Convert and save your covariates</a></li>
<li class="chapter" data-level="7.4" data-path="covariates.html"><a href="covariates.html#correlations-between-predictors"><i class="fa fa-check"></i><b>7.4</b> Correlations between predictors</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="exploration.html"><a href="exploration.html"><i class="fa fa-check"></i><b>8</b> Analysis data exploration</a>
<ul>
<li class="chapter" data-level="8.1" data-path="exploration.html"><a href="exploration.html#final-locations-plot"><i class="fa fa-check"></i><b>8.1</b> Final locations plot</a></li>
<li class="chapter" data-level="8.2" data-path="exploration.html"><a href="exploration.html#independent-detections-summary"><i class="fa fa-check"></i><b>8.2</b> Independent detections summary</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="exploration.html"><a href="exploration.html#total-number-of-captures"><i class="fa fa-check"></i><b>8.2.1</b> Total number of captures</a></li>
<li class="chapter" data-level="8.2.2" data-path="exploration.html"><a href="exploration.html#raw-occupancy"><i class="fa fa-check"></i><b>8.2.2</b> Raw occupancy</a></li>
<li class="chapter" data-level="8.2.3" data-path="exploration.html"><a href="exploration.html#comparison-plot"><i class="fa fa-check"></i><b>8.2.3</b> Comparison plot</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="exploration.html"><a href="exploration.html#temporal-patterns-in-capture-rates"><i class="fa fa-check"></i><b>8.3</b> Temporal patterns in capture rates</a></li>
<li class="chapter" data-level="8.4" data-path="exploration.html"><a href="exploration.html#species-specific-capture-rates"><i class="fa fa-check"></i><b>8.4</b> Species specific capture rates</a></li>
<li class="chapter" data-level="8.5" data-path="exploration.html"><a href="exploration.html#spatial-patterns-in-capture-rates"><i class="fa fa-check"></i><b>8.5</b> Spatial patterns in capture rates</a></li>
<li class="chapter" data-level="8.6" data-path="exploration.html"><a href="exploration.html#species-co-occurences"><i class="fa fa-check"></i><b>8.6</b> Species co-occurences</a></li>
<li class="chapter" data-level="8.7" data-path="exploration.html"><a href="exploration.html#covariate-plots"><i class="fa fa-check"></i><b>8.7</b> Covariate plots</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="composition.html"><a href="composition.html"><i class="fa fa-check"></i><b>9</b> Community composition</a>
<ul>
<li class="chapter" data-level="9.1" data-path="composition.html"><a href="composition.html#observed-richness"><i class="fa fa-check"></i><b>9.1</b> Observed richness</a></li>
<li class="chapter" data-level="9.2" data-path="composition.html"><a href="composition.html#estimated-richness"><i class="fa fa-check"></i><b>9.2</b> Estimated richness</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="composition.html"><a href="composition.html#incidence-patterns"><i class="fa fa-check"></i><b>9.2.1</b> 1) Incidence patterns</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="composition.html"><a href="composition.html#basic-results-plot"><i class="fa fa-check"></i><b>9.3</b> Basic results plot</a></li>
<li class="chapter" data-level="9.4" data-path="composition.html"><a href="composition.html#sampling-unit-based-incidence-data"><i class="fa fa-check"></i><b>9.4</b> Sampling-unit-based incidence data</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="composition.html"><a href="composition.html#survey-station-example"><i class="fa fa-check"></i><b>9.4.1</b> Survey station example</a></li>
<li class="chapter" data-level="9.4.2" data-path="composition.html"><a href="composition.html#sampling-duration-example"><i class="fa fa-check"></i><b>9.4.2</b> Sampling duration example</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="composition.html"><a href="composition.html#other-diversity-metrics"><i class="fa fa-check"></i><b>9.5</b> Other diversity metrics</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="composition.html"><a href="composition.html#simpson-and-shannon"><i class="fa fa-check"></i><b>9.5.1</b> Simpson and Shannon</a></li>
<li class="chapter" data-level="9.5.2" data-path="composition.html"><a href="composition.html#non-metric-multidimensional-scaling"><i class="fa fa-check"></i><b>9.5.2</b> Non-metric multidimensional scaling</a></li>
<li class="chapter" data-level="9.5.3" data-path="composition.html"><a href="composition.html#extensions"><i class="fa fa-check"></i><b>9.5.3</b> Extensions</a></li>
<li class="chapter" data-level="9.5.4" data-path="composition.html"><a href="composition.html#examples-in-the-literature"><i class="fa fa-check"></i><b>9.5.4</b> Examples in the literature</a></li>
<li class="chapter" data-level="9.5.5" data-path="composition.html"><a href="composition.html#multispecies-occupancy-model"><i class="fa fa-check"></i><b>9.5.5</b> 2) Multispecies occupancy model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="habitat-use.html"><a href="habitat-use.html"><i class="fa fa-check"></i><b>10</b> Habitat use</a>
<ul>
<li class="chapter" data-level="10.1" data-path="habitat-use.html"><a href="habitat-use.html#calculating-capture-rate"><i class="fa fa-check"></i><b>10.1</b> Calculating capture rate</a></li>
<li class="chapter" data-level="10.2" data-path="habitat-use.html"><a href="habitat-use.html#single-species-models"><i class="fa fa-check"></i><b>10.2</b> Single-species models</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="habitat-use.html"><a href="habitat-use.html#simple-linear-model"><i class="fa fa-check"></i><b>10.2.1</b> Simple linear model</a></li>
<li class="chapter" data-level="10.2.2" data-path="habitat-use.html"><a href="habitat-use.html#mixed-effects-model"><i class="fa fa-check"></i><b>10.2.2</b> Mixed-effects model</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="habitat-use.html"><a href="habitat-use.html#extension"><i class="fa fa-check"></i><b>10.3</b> Extension</a></li>
<li class="chapter" data-level="10.4" data-path="habitat-use.html"><a href="habitat-use.html#multispecies-model"><i class="fa fa-check"></i><b>10.4</b> Multispecies model</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="habitat-use.html"><a href="habitat-use.html#examples-in-the-literature-1"><i class="fa fa-check"></i><b>10.4.1</b> Examples in the literature</a></li>
<li class="chapter" data-level="10.4.2" data-path="habitat-use.html"><a href="habitat-use.html#future-additions"><i class="fa fa-check"></i><b>10.4.2</b> Future additions</a></li>
<li class="chapter" data-level="10.4.3" data-path="habitat-use.html"><a href="habitat-use.html#further-reading"><i class="fa fa-check"></i><b>10.4.3</b> Further reading</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="occupancy.html"><a href="occupancy.html"><i class="fa fa-check"></i><b>11</b> Occupancy</a>
<ul>
<li class="chapter" data-level="11.1" data-path="occupancy.html"><a href="occupancy.html#single-species-occupancy-model"><i class="fa fa-check"></i><b>11.1</b> Single species occupancy model</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="occupancy.html"><a href="occupancy.html#unmarked-package"><i class="fa fa-check"></i><b>11.1.1</b> unmarked package</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="occupancy.html"><a href="occupancy.html#multispecies-occupancy-model-two-or-more"><i class="fa fa-check"></i><b>11.2</b> Multispecies occupancy model (two or more)</a></li>
<li class="chapter" data-level="11.3" data-path="occupancy.html"><a href="occupancy.html#spatial-occupancy-model-spoccupancy"><i class="fa fa-check"></i><b>11.3</b> Spatial occupancy model: spOccupancy</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="occupancy.html"><a href="occupancy.html#single-species-model"><i class="fa fa-check"></i><b>11.3.1</b> Single species model</a></li>
<li class="chapter" data-level="11.3.2" data-path="occupancy.html"><a href="occupancy.html#multi-species-model"><i class="fa fa-check"></i><b>11.3.2</b> Multi species model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="activity.html"><a href="activity.html"><i class="fa fa-check"></i><b>12</b> Activity</a>
<ul>
<li class="chapter" data-level="12.1" data-path="activity.html"><a href="activity.html#independent-detections-or-raw-data"><i class="fa fa-check"></i><b>12.1</b> Independent detections or raw data</a></li>
<li class="chapter" data-level="12.2" data-path="activity.html"><a href="activity.html#example"><i class="fa fa-check"></i><b>12.2</b> Example</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="activity.html"><a href="activity.html#accounting-for-sunrise-and-sunset"><i class="fa fa-check"></i><b>12.2.1</b> Accounting for sunrise and sunset</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="activity.html"><a href="activity.html#thoughts"><i class="fa fa-check"></i><b>12.3</b> Thoughts</a></li>
<li class="chapter" data-level="12.4" data-path="activity.html"><a href="activity.html#further-reading-1"><i class="fa fa-check"></i><b>12.4</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="behavior.html"><a href="behavior.html"><i class="fa fa-check"></i><b>13</b> Behavior</a>
<ul>
<li class="chapter" data-level="13.1" data-path="behavior.html"><a href="behavior.html#behavioural-designations"><i class="fa fa-check"></i><b>13.1</b> Behavioural designations</a></li>
<li class="chapter" data-level="13.2" data-path="behavior.html"><a href="behavior.html#event-duration"><i class="fa fa-check"></i><b>13.2</b> Event duration</a></li>
<li class="chapter" data-level="13.3" data-path="behavior.html"><a href="behavior.html#animal-speed-and-day-range"><i class="fa fa-check"></i><b>13.3</b> Animal speed and day range</a></li>
<li class="chapter" data-level="13.4" data-path="behavior.html"><a href="behavior.html#experimental-manipulations"><i class="fa fa-check"></i><b>13.4</b> Experimental manipulations</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="interactions.html"><a href="interactions.html"><i class="fa fa-check"></i><b>14</b> Interactions</a>
<ul>
<li class="chapter" data-level="14.1" data-path="interactions.html"><a href="interactions.html#worked-example"><i class="fa fa-check"></i><b>14.1</b> Worked example</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="density.html"><a href="density.html"><i class="fa fa-check"></i><b>15</b> Density</a>
<ul>
<li class="chapter" data-level="15.1" data-path="density.html"><a href="density.html#marked-individuals"><i class="fa fa-check"></i><b>15.1</b> Marked individuals</a></li>
<li class="chapter" data-level="15.2" data-path="density.html"><a href="density.html#unmarked-spatial-capture-recapture-uscr"><i class="fa fa-check"></i><b>15.2</b> Unmarked spatial capture recapture (uSCR)</a></li>
<li class="chapter" data-level="15.3" data-path="density.html"><a href="density.html#random-encounter-model"><i class="fa fa-check"></i><b>15.3</b> Random encounter model</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="density.html"><a href="density.html#formatting"><i class="fa fa-check"></i><b>15.3.1</b> Formatting</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="density.html"><a href="density.html#time-to-event-space-to-event-density-estimates"><i class="fa fa-check"></i><b>15.4</b> Time to event/ Space to event density estimates</a></li>
<li class="chapter" data-level="15.5" data-path="density.html"><a href="density.html#n-mixture-model-in-unmarked"><i class="fa fa-check"></i><b>15.5</b> N-mixture model in unmarked</a></li>
<li class="chapter" data-level="15.6" data-path="density.html"><a href="density.html#abmi-methods"><i class="fa fa-check"></i><b>15.6</b> ABMI Methods</a></li>
<li class="chapter" data-level="15.7" data-path="density.html"><a href="density.html#comparison"><i class="fa fa-check"></i><b>15.7</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="phenology.html"><a href="phenology.html"><i class="fa fa-check"></i><b>16</b> Phenology</a>
<ul>
<li class="chapter" data-level="16.1" data-path="phenology.html"><a href="phenology.html#worked-example-1"><i class="fa fa-check"></i><b>16.1</b> Worked example</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="markdown-reports.html"><a href="markdown-reports.html"><i class="fa fa-check"></i><b>17</b> Markdown reports</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to Camera Trap Data Management and Analysis in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="analysis-data-creation" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> Analysis data creation<a href="analysis-data-creation.html#analysis-data-creation" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="common-analysis-data-formats" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Common analysis data formats<a href="analysis-data-creation.html#common-analysis-data-formats" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Although the types of analysis you can perform on camera trap data vary markedly, they often depend on three key dataframe structures. We introduce these structures here, then show you how to apply them in subsequent chapters.</p>
</div>
<div id="independent-detections" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Independent detections<a href="analysis-data-creation.html#independent-detections" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The independent detections dataframe is the work horse of all camera trap analyses, it is from this that you build the rest of your data frames. The threshold we use for determining what is an “independent detection” is typically 30 minutes… because camera trappers are creatures of habit! If you want to dig a little deeper it to the why, there is a nice summary in <a href="https://onlinelibrary.wiley.com/doi/abs/10.1111/aje.12557">Rahel Sollmans “A gentle introduction to camera‐trap data analysis”</a>:</p>
<p><em>Researchers have used different thresholds, typically 30 min (e.g., O’Brien, Kinnaird, &amp; Wibisono, 2003) to an hour (Bahaa‐el‐din et al., 2016); some researchers have argued that multiple pictures within the same day may not represent independent detections (Royle, Nichols, Karanth, &amp; Gopalaswamy, 2009). In most cases, this threshold is determined subjectively, based on the best available knowledge of the species under study. But it can also be determined based on the temporal autocorrelation (Kays &amp; Parsons, 2014) or analysis of time intervals (Yasuda, 2004) of subsequent pictures.</em></p>
<p>The default setting in our data processing script is 30 minutes, although it can be changed!</p>
<p><strong>EXAMPLE IMAGE</strong></p>
</div>
<div id="effort-look-up" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Effort look-up<a href="analysis-data-creation.html#effort-look-up" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Image data without effort data is worthless! There are lots of instances where you need to know which stations were operating on a given day. Some people like to store this information in a siteXdate matrix, but they are actually not that easy to data wrangle with. A long data frame with a site and date column is the most flexible (and keeps the dates in their native POSIX formats).</p>
<p><strong>EXAMPLE IMAGE</strong></p>
</div>
<div id="countsdetections-by-time-interval" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Counts/detections by time interval<a href="analysis-data-creation.html#countsdetections-by-time-interval" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We saved the most useful data format until last! A site, time interval, effort, and species count dataframe integrates the independent data and daily lookup described above. You ca use it to create detection rates, occupancy data frames and much more!</p>
<p>We export yearly, monthly, weekly and daily data frames from our single site exploration script (which should cover you for much of what you want to do).</p>
<p>We include two different types of response terms:</p>
<ul>
<li>Observations = the number of independent detections per time interval</li>
<li>Counts = sum of the independent minimum group sizes per time interval</li>
</ul>
<p><strong>EXAMPLE IMAGE</strong></p>
</div>
<div id="our-data" class="section level2 hasAnchor" number="6.5">
<h2><span class="header-section-number">6.5</span> Our data<a href="analysis-data-creation.html#our-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>First, lets create the folder to store our data!</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="analysis-data-creation.html#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">&quot;data/processed_data&quot;</span>)</span></code></pre></div>
<pre><code>## Warning in dir.create(&quot;data/processed_data&quot;): &#39;data\processed_data&#39; already
## exists</code></pre>
<p>This section will follow the following steps:</p>
<ol style="list-style-type: decimal">
<li><p>Filter to our target species</p></li>
<li><p>Create a camera activity look-up</p></li>
<li><p>Determine our “independent detections”</p></li>
<li><p>Create our analysis data frames</p></li>
</ol>
</div>
<div id="filter-to-target-species" class="section level2 hasAnchor" number="6.6">
<h2><span class="header-section-number">6.6</span> 1) Filter to target species<a href="analysis-data-creation.html#filter-to-target-species" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="analysis-data-creation.html#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove observations without animals detected, whre we dont know the species, and non-mammals</span></span>
<span id="cb176-2"><a href="analysis-data-creation.html#cb176-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-3"><a href="analysis-data-creation.html#cb176-3" aria-hidden="true" tabindex="-1"></a>img_sub <span class="ot">&lt;-</span> img[img<span class="sc">$</span>is_blank<span class="sc">==</span><span class="dv">0</span> <span class="sc">&amp;</span>              </span>
<span id="cb176-4"><a href="analysis-data-creation.html#cb176-4" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">is.na</span>(img<span class="sc">$</span>species)<span class="sc">==</span><span class="cn">FALSE</span> <span class="sc">&amp;</span>  </span>
<span id="cb176-5"><a href="analysis-data-creation.html#cb176-5" aria-hidden="true" tabindex="-1"></a>                 img<span class="sc">$</span>class<span class="sc">==</span><span class="st">&quot;Mammalia&quot;</span> <span class="sc">&amp;</span>      </span>
<span id="cb176-6"><a href="analysis-data-creation.html#cb176-6" aria-hidden="true" tabindex="-1"></a>                 img<span class="sc">$</span>species<span class="sc">!=</span><span class="st">&quot;sapiens&quot;</span>,]            </span>
<span id="cb176-7"><a href="analysis-data-creation.html#cb176-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-8"><a href="analysis-data-creation.html#cb176-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-9"><a href="analysis-data-creation.html#cb176-9" aria-hidden="true" tabindex="-1"></a>img_sub <span class="ot">&lt;-</span> img <span class="sc">%&gt;%</span> <span class="fu">filter</span>(is_blank<span class="sc">==</span><span class="dv">0</span> <span class="sc">&amp;</span>     <span class="co"># Remove the blanks</span></span>
<span id="cb176-10"><a href="analysis-data-creation.html#cb176-10" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">is.na</span>(img<span class="sc">$</span>species)<span class="sc">==</span><span class="cn">FALSE</span> <span class="sc">&amp;</span> <span class="co"># Remove classifications which dont have species </span></span>
<span id="cb176-11"><a href="analysis-data-creation.html#cb176-11" aria-hidden="true" tabindex="-1"></a>                           class<span class="sc">==</span><span class="st">&quot;Mammalia&quot;</span>, <span class="co"># Subset to mammals</span></span>
<span id="cb176-12"><a href="analysis-data-creation.html#cb176-12" aria-hidden="true" tabindex="-1"></a>                           species<span class="sc">!=</span><span class="st">&quot;sapiens&quot;</span>) <span class="co"># Subset to anything that isn&#39;t human</span></span></code></pre></div>
<p>This has resulted in the removal of 33.2% of the observations.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="analysis-data-creation.html#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(img_sub<span class="sc">$</span>common_name)</span></code></pre></div>
<pre><code>## 
##           American black bear               American marten 
##                          1331                            41 
##         American red squirrel                   Canada lynx 
##                            34                           140 
##                        coyote                           elk 
##                            21                             6 
##                  Eurasian elk                     gray wolf 
##                          2038                           352 
## Northern American river otter                        rabbit 
##                             2                             9 
##                       red fox                      reindeer 
##                            39                           787 
##                 snowshoe hare             white-tailed deer 
##                           629                          4790</code></pre>
</div>
<div id="create-a-camera-activity-lookup" class="section level2 hasAnchor" number="6.7">
<h2><span class="header-section-number">6.7</span> 2) Create a camera activity lookup<a href="analysis-data-creation.html#create-a-camera-activity-lookup" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>One step I like to perform is to create a list of every single day when a given camera is active. It is very useful to filter out detections which occured outside of camera activity periods (step 3) and create our analysis dataframes (Step 4)</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="analysis-data-creation.html#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove all observations with occur outside of camera activity schedules</span></span>
<span id="cb179-2"><a href="analysis-data-creation.html#cb179-2" aria-hidden="true" tabindex="-1"></a><span class="co"># We need to know how many detections there are in each month -&gt; create a row lookup</span></span>
<span id="cb179-3"><a href="analysis-data-creation.html#cb179-3" aria-hidden="true" tabindex="-1"></a><span class="co"># This is just a list of ever day a camera was active.</span></span>
<span id="cb179-4"><a href="analysis-data-creation.html#cb179-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-5"><a href="analysis-data-creation.html#cb179-5" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> dep[<span class="fu">is.na</span>(dep<span class="sc">$</span>end_date)<span class="sc">==</span>F,]</span>
<span id="cb179-6"><a href="analysis-data-creation.html#cb179-6" aria-hidden="true" tabindex="-1"></a>daily_lookup <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb179-7"><a href="analysis-data-creation.html#cb179-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(tmp))</span>
<span id="cb179-8"><a href="analysis-data-creation.html#cb179-8" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb179-9"><a href="analysis-data-creation.html#cb179-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">ymd</span>(tmp<span class="sc">$</span>start_date[i])<span class="sc">!=</span><span class="fu">ymd</span>(tmp<span class="sc">$</span>end_date[i]))</span>
<span id="cb179-10"><a href="analysis-data-creation.html#cb179-10" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb179-11"><a href="analysis-data-creation.html#cb179-11" aria-hidden="true" tabindex="-1"></a>    daily_lookup[[i]] <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">&quot;date&quot;</span><span class="ot">=</span><span class="fu">seq</span>(<span class="fu">ymd</span>(tmp<span class="sc">$</span>start_date[i]), <span class="fu">ymd</span>(tmp<span class="sc">$</span>end_date[i]), <span class="at">by=</span><span class="st">&quot;days&quot;</span>), <span class="st">&quot;placename&quot;</span><span class="ot">=</span>tmp<span class="sc">$</span>placename[i])</span>
<span id="cb179-12"><a href="analysis-data-creation.html#cb179-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb179-13"><a href="analysis-data-creation.html#cb179-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb179-14"><a href="analysis-data-creation.html#cb179-14" aria-hidden="true" tabindex="-1"></a>row_lookup <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(daily_lookup)</span>
<span id="cb179-15"><a href="analysis-data-creation.html#cb179-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-16"><a href="analysis-data-creation.html#cb179-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove duplicates (just in case)</span></span>
<span id="cb179-17"><a href="analysis-data-creation.html#cb179-17" aria-hidden="true" tabindex="-1"></a>row_lookup <span class="ot">&lt;-</span> row_lookup[<span class="fu">duplicated</span>(row_lookup)<span class="sc">==</span>F,]</span></code></pre></div>
</div>
<div id="determine-independent-camera-detections" class="section level2 hasAnchor" number="6.8">
<h2><span class="header-section-number">6.8</span> 3)Determine ‘independent’ camera detections<a href="analysis-data-creation.html#determine-independent-camera-detections" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We rarely analyse raw camera data, rather we filter out multiple detections of the same individual within a given event. This is called creating and “independent detections” dataframe.</p>
<p>The use of an independence threshold of 30 minutes is often used - and I will not go into the reasons for that now. However, it is wise to think about what you are analyzing and whether such a threshold is appropriate. For example, if your organism of interest is very abundant, for examples human hikers on a busy trail, then using a 30 minute threhold may meen that multiple independent groups of hikers are rolled into a single, huge, “event”.</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="analysis-data-creation.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the &quot;independence&quot; interval in minutes</span></span>
<span id="cb180-2"><a href="analysis-data-creation.html#cb180-2" aria-hidden="true" tabindex="-1"></a>independent <span class="ot">&lt;-</span> <span class="dv">30</span></span></code></pre></div>
<p>I will now break down the algorithm into subsetions to make it clear what is occuring:</p>
<ol style="list-style-type: lower-roman">
<li>Order the dataframe by deployment code and species</li>
</ol>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="analysis-data-creation.html#cb181-1" aria-hidden="true" tabindex="-1"></a>img_tmp <span class="ot">&lt;-</span> img_sub <span class="sc">%&gt;%</span></span>
<span id="cb181-2"><a href="analysis-data-creation.html#cb181-2" aria-hidden="true" tabindex="-1"></a>              <span class="fu">arrange</span>(project_id,deployment_id) <span class="sc">%&gt;%</span></span>
<span id="cb181-3"><a href="analysis-data-creation.html#cb181-3" aria-hidden="true" tabindex="-1"></a>              <span class="fu">group_by</span>(deployment_id, sp) <span class="sc">%&gt;%</span></span>
<span id="cb181-4"><a href="analysis-data-creation.html#cb181-4" aria-hidden="true" tabindex="-1"></a>              <span class="fu">mutate</span>(<span class="at">duration =</span> <span class="fu">int_length</span>(timestamp <span class="sc">%--%</span> <span class="fu">lag</span>(timestamp)))</span></code></pre></div>
<ol start="2" style="list-style-type: lower-roman">
<li>Determine independence</li>
</ol>
<p>If subsequent detections occur outside of the independence threshold, assign it a unique ID code.</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="analysis-data-creation.html#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb182-2"><a href="analysis-data-creation.html#cb182-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Give a random value to all cells</span></span>
<span id="cb182-3"><a href="analysis-data-creation.html#cb182-3" aria-hidden="true" tabindex="-1"></a>img_tmp<span class="sc">$</span>event_id <span class="ot">&lt;-</span> <span class="dv">9999</span></span>
<span id="cb182-4"><a href="analysis-data-creation.html#cb182-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-5"><a href="analysis-data-creation.html#cb182-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a counter</span></span>
<span id="cb182-6"><a href="analysis-data-creation.html#cb182-6" aria-hidden="true" tabindex="-1"></a>counter <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb182-7"><a href="analysis-data-creation.html#cb182-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-8"><a href="analysis-data-creation.html#cb182-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a unique code that has one more zero than rows in your dataframe  </span></span>
<span id="cb182-9"><a href="analysis-data-creation.html#cb182-9" aria-hidden="true" tabindex="-1"></a>num_code <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">paste0</span>(<span class="fu">nrow</span>(img_sub),<span class="dv">0</span>))</span>
<span id="cb182-10"><a href="analysis-data-creation.html#cb182-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-11"><a href="analysis-data-creation.html#cb182-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">nrow</span>(img_tmp)) {</span>
<span id="cb182-12"><a href="analysis-data-creation.html#cb182-12" aria-hidden="true" tabindex="-1"></a>  img_tmp<span class="sc">$</span>event_id[i<span class="dv">-1</span>]  <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;E&quot;</span>, <span class="fu">str_pad</span>(counter, <span class="fu">nchar</span>(num_code), <span class="at">pad =</span> <span class="st">&quot;0&quot;</span>))</span>
<span id="cb182-13"><a href="analysis-data-creation.html#cb182-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb182-14"><a href="analysis-data-creation.html#cb182-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">is.na</span>(img_tmp<span class="sc">$</span>duration[i]) <span class="sc">|</span> <span class="fu">abs</span>(img_tmp<span class="sc">$</span>duration[i]) <span class="sc">&gt;</span> (independent <span class="sc">*</span> <span class="dv">60</span>))</span>
<span id="cb182-15"><a href="analysis-data-creation.html#cb182-15" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb182-16"><a href="analysis-data-creation.html#cb182-16" aria-hidden="true" tabindex="-1"></a>      counter <span class="ot">&lt;-</span> counter <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb182-17"><a href="analysis-data-creation.html#cb182-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb182-18"><a href="analysis-data-creation.html#cb182-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb182-19"><a href="analysis-data-creation.html#cb182-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-20"><a href="analysis-data-creation.html#cb182-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Update the information for the last row - the loop above always updates the previous row... leaving the last row unchanbged</span></span>
<span id="cb182-21"><a href="analysis-data-creation.html#cb182-21" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb182-22"><a href="analysis-data-creation.html#cb182-22" aria-hidden="true" tabindex="-1"></a> <span class="co"># group ID  for the last row</span></span>
<span id="cb182-23"><a href="analysis-data-creation.html#cb182-23" aria-hidden="true" tabindex="-1"></a> <span class="cf">if</span>(img_tmp<span class="sc">$</span>duration[<span class="fu">nrow</span>(img_tmp)] <span class="sc">&lt;</span> (independent <span class="sc">*</span> <span class="dv">60</span>)<span class="sc">|</span></span>
<span id="cb182-24"><a href="analysis-data-creation.html#cb182-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(img_tmp<span class="sc">$</span>duration[<span class="fu">nrow</span>(img_tmp)])){</span>
<span id="cb182-25"><a href="analysis-data-creation.html#cb182-25" aria-hidden="true" tabindex="-1"></a>   img_tmp<span class="sc">$</span>event_id[<span class="fu">nrow</span>(img_tmp)] <span class="ot">&lt;-</span> img_tmp<span class="sc">$</span>event_id[<span class="fu">nrow</span>(img_tmp)<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb182-26"><a href="analysis-data-creation.html#cb182-26" aria-hidden="true" tabindex="-1"></a> } <span class="cf">else</span>{</span>
<span id="cb182-27"><a href="analysis-data-creation.html#cb182-27" aria-hidden="true" tabindex="-1"></a>   counter <span class="ot">&lt;-</span> counter <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb182-28"><a href="analysis-data-creation.html#cb182-28" aria-hidden="true" tabindex="-1"></a>   img_tmp<span class="sc">$</span>event_id[<span class="fu">nrow</span>(img_tmp)] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;E&quot;</span>, <span class="fu">str_pad</span>(counter, <span class="fu">nchar</span>(num_code), <span class="at">pad =</span> <span class="st">&quot;0&quot;</span>))</span>
<span id="cb182-29"><a href="analysis-data-creation.html#cb182-29" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb182-30"><a href="analysis-data-creation.html#cb182-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-31"><a href="analysis-data-creation.html#cb182-31" aria-hidden="true" tabindex="-1"></a><span class="co"># remove the duration column</span></span>
<span id="cb182-32"><a href="analysis-data-creation.html#cb182-32" aria-hidden="true" tabindex="-1"></a>img_tmp<span class="sc">$</span>duration <span class="ot">&lt;-</span> <span class="cn">NULL</span></span></code></pre></div>
<p>We could stop there, however there is other information we might light to extract about each individual event:</p>
<ol style="list-style-type: lower-alpha">
<li>the maximum number objects detected in an event</li>
<li>how long the event lasts</li>
<li>how many images are in each event</li>
</ol>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="analysis-data-creation.html#cb183-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># find out the last and the first of the time in the group</span></span>
<span id="cb183-2"><a href="analysis-data-creation.html#cb183-2" aria-hidden="true" tabindex="-1"></a>  top <span class="ot">&lt;-</span> img_tmp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(event_id) <span class="sc">%&gt;%</span> <span class="fu">top_n</span>(<span class="dv">1</span>,timestamp) <span class="sc">%&gt;%</span> <span class="fu">select</span>(event_id, timestamp)</span>
<span id="cb183-3"><a href="analysis-data-creation.html#cb183-3" aria-hidden="true" tabindex="-1"></a>  bot <span class="ot">&lt;-</span> img_tmp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(event_id) <span class="sc">%&gt;%</span> <span class="fu">top_n</span>(<span class="sc">-</span><span class="dv">1</span>,timestamp) <span class="sc">%&gt;%</span> <span class="fu">select</span>(event_id, timestamp)</span>
<span id="cb183-4"><a href="analysis-data-creation.html#cb183-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(bot)[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;timestamp_end&quot;</span>)</span>
<span id="cb183-5"><a href="analysis-data-creation.html#cb183-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb183-6"><a href="analysis-data-creation.html#cb183-6" aria-hidden="true" tabindex="-1"></a>  img_num <span class="ot">&lt;-</span> img_tmp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(event_id) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">event_observations=</span><span class="fu">n</span>()) <span class="co"># number of images in the event</span></span>
<span id="cb183-7"><a href="analysis-data-creation.html#cb183-7" aria-hidden="true" tabindex="-1"></a>  event_grp <span class="ot">&lt;-</span> img_tmp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(event_id) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">event_groupsize=</span><span class="fu">max</span>(number_of_objects))</span>
<span id="cb183-8"><a href="analysis-data-creation.html#cb183-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-9"><a href="analysis-data-creation.html#cb183-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># caculate the duration and add the other elements</span></span>
<span id="cb183-10"><a href="analysis-data-creation.html#cb183-10" aria-hidden="true" tabindex="-1"></a>  diff <span class="ot">&lt;-</span>  top <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(bot, <span class="at">by=</span><span class="st">&quot;event_id&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb183-11"><a href="analysis-data-creation.html#cb183-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">event_duration=</span><span class="fu">abs</span>(<span class="fu">int_length</span>(timestamp <span class="sc">%--%</span> timestamp_end))) <span class="sc">%&gt;%</span></span>
<span id="cb183-12"><a href="analysis-data-creation.html#cb183-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">left_join</span>(event_grp, <span class="at">by=</span><span class="st">&quot;event_id&quot;</span>)<span class="sc">%&gt;%</span></span>
<span id="cb183-13"><a href="analysis-data-creation.html#cb183-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">left_join</span>(img_num, <span class="at">by=</span><span class="st">&quot;event_id&quot;</span>)</span>
<span id="cb183-14"><a href="analysis-data-creation.html#cb183-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-15"><a href="analysis-data-creation.html#cb183-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove columsn you dont need</span></span>
<span id="cb183-16"><a href="analysis-data-creation.html#cb183-16" aria-hidden="true" tabindex="-1"></a>  diff<span class="sc">$</span>timestamp   <span class="ot">&lt;-</span><span class="cn">NULL</span></span>
<span id="cb183-17"><a href="analysis-data-creation.html#cb183-17" aria-hidden="true" tabindex="-1"></a>  diff<span class="sc">$</span>timestamp_end <span class="ot">&lt;-</span><span class="cn">NULL</span></span>
<span id="cb183-18"><a href="analysis-data-creation.html#cb183-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-19"><a href="analysis-data-creation.html#cb183-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Merge the img_tmp with the event data</span></span>
<span id="cb183-20"><a href="analysis-data-creation.html#cb183-20" aria-hidden="true" tabindex="-1"></a>  img_tmp <span class="ot">&lt;-</span>  img_tmp <span class="sc">%&gt;%</span></span>
<span id="cb183-21"><a href="analysis-data-creation.html#cb183-21" aria-hidden="true" tabindex="-1"></a>   <span class="fu">left_join</span>(diff,<span class="at">by=</span><span class="st">&quot;event_id&quot;</span>)</span></code></pre></div>
<p>Finally lets subset to the first row of each event to create our independent dataframe!</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="analysis-data-creation.html#cb184-1" aria-hidden="true" tabindex="-1"></a>ind_dat <span class="ot">&lt;-</span> img_tmp[<span class="fu">duplicated</span>(img_tmp<span class="sc">$</span>event_id)<span class="sc">==</span>F,]</span></code></pre></div>
<p>Next we remove any detections which occur outside of our known camera activity periods:</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="analysis-data-creation.html#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a  iunique code for ever day and deployment where cameras were functioning</span></span>
<span id="cb185-2"><a href="analysis-data-creation.html#cb185-2" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">paste</span>(row_lookup<span class="sc">$</span>date, row_lookup<span class="sc">$</span>placename)</span>
<span id="cb185-3"><a href="analysis-data-creation.html#cb185-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-4"><a href="analysis-data-creation.html#cb185-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Subset ind_dat to data that matches the unique codes</span></span>
<span id="cb185-5"><a href="analysis-data-creation.html#cb185-5" aria-hidden="true" tabindex="-1"></a>ind_dat <span class="ot">&lt;-</span> ind_dat[<span class="fu">paste</span>(<span class="fu">substr</span>(ind_dat<span class="sc">$</span>timestamp,<span class="dv">1</span>,<span class="dv">10</span>), ind_dat<span class="sc">$</span>placename) <span class="sc">%in%</span> tmp, ]</span></code></pre></div>
<p>As a final step, we make the species column a ‘factor’ - this makes all the data frame building operations much simpler:</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="analysis-data-creation.html#cb186-1" aria-hidden="true" tabindex="-1"></a>ind_dat<span class="sc">$</span>sp <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(ind_dat<span class="sc">$</span>sp)</span></code></pre></div>
</div>
<div id="creating-analysis-dataframes" class="section level2 hasAnchor" number="6.9">
<h2><span class="header-section-number">6.9</span> 4) Creating analysis dataframes<a href="analysis-data-creation.html#creating-analysis-dataframes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Finally, this script outputs 11 useful data frames for future data analysis:</p>
<ol style="list-style-type: decimal">
<li>A data frame of “independent detections” at the 30 minute threshold you specified at the start:</li>
</ol>
<ul>
<li>“data/processed_data/AlgarRestorationProject_30min_Independent.csv”</li>
</ul>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="analysis-data-creation.html#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(ind_dat, <span class="fu">paste0</span>(<span class="st">&quot;data/processed_data/&quot;</span>,ind_dat<span class="sc">$</span>project_id[<span class="dv">1</span>], <span class="st">&quot;_&quot;</span>,independent ,<span class="st">&quot;min_independent_detections.csv&quot;</span>), <span class="at">row.names =</span> F)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>The “daily_lookup” which is a dataframe of all days a given camera station was active. Some people use an lookup matrix for this step, but we find the long format is much easier to use in downstream analysis.</li>
</ol>
<ul>
<li>“data/processed_data/_daily_deport_lookup.csv”</li>
</ul>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="analysis-data-creation.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(row_lookup, <span class="fu">paste0</span>(<span class="st">&quot;data/processed_data/&quot;</span>,ind_dat<span class="sc">$</span>project_id[<span class="dv">1</span>], <span class="st">&quot;_daily_lookup.csv&quot;</span>), <span class="at">row.names =</span> F)</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Unique camera locations list:</li>
</ol>
<p>When we start to build the covariates for data analysis, it is very useful to have a list of your final project’s camera locations. We create this below in a simplified form. You can include any columns which will be use for data analysis, and export it.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="analysis-data-creation.html#cb189-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> dep[, <span class="fu">c</span>(<span class="st">&quot;project_id&quot;</span>, <span class="st">&quot;placename&quot;</span>, <span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;latitude&quot;</span>, <span class="st">&quot;feature_type&quot;</span>)]</span>
<span id="cb189-2"><a href="analysis-data-creation.html#cb189-2" aria-hidden="true" tabindex="-1"></a>tmp<span class="ot">&lt;-</span> tmp[<span class="fu">duplicated</span>(tmp)<span class="sc">==</span>F,]</span>
<span id="cb189-3"><a href="analysis-data-creation.html#cb189-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(tmp, <span class="fu">paste0</span>(<span class="st">&quot;data/processed_data/&quot;</span>,ind_dat<span class="sc">$</span>project_id[<span class="dv">1</span>], <span class="st">&quot;_camera_locations.csv&quot;</span>), <span class="at">row.names =</span> F)</span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Final species list</li>
</ol>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="analysis-data-creation.html#cb190-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> sp_list[sp_list<span class="sc">$</span>sp <span class="sc">%in%</span> ind_dat<span class="sc">$</span>sp,]</span>
<span id="cb190-2"><a href="analysis-data-creation.html#cb190-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-3"><a href="analysis-data-creation.html#cb190-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove the &#39;verified&#39; column</span></span>
<span id="cb190-4"><a href="analysis-data-creation.html#cb190-4" aria-hidden="true" tabindex="-1"></a>tmp<span class="sc">$</span>verified <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb190-5"><a href="analysis-data-creation.html#cb190-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-6"><a href="analysis-data-creation.html#cb190-6" aria-hidden="true" tabindex="-1"></a><span class="co"># We will replace the spaces in the species names with dots, this will make things easier for R to understand later.</span></span>
<span id="cb190-7"><a href="analysis-data-creation.html#cb190-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb190-8"><a href="analysis-data-creation.html#cb190-8" aria-hidden="true" tabindex="-1"></a>tmp<span class="sc">$</span>sp <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(tmp<span class="sc">$</span>sp, <span class="st">&quot; &quot;</span>, <span class="st">&quot;.&quot;</span>)</span>
<span id="cb190-9"><a href="analysis-data-creation.html#cb190-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-10"><a href="analysis-data-creation.html#cb190-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-11"><a href="analysis-data-creation.html#cb190-11" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(tmp, <span class="fu">paste0</span>(<span class="st">&quot;data/processed_data/&quot;</span>,ind_dat<span class="sc">$</span>project_id[<span class="dv">1</span>], <span class="st">&quot;_species_list.csv&quot;</span>), <span class="at">row.names =</span> F)</span></code></pre></div>
<p>5 &amp; 6: A ‘site x species’ matrix of the number of independent detections and species counts across the full study period:</p>
<ul>
<li><p>“data/processed_data/AlgarRestorationProject_30min_Independent_total_observations.csv”</p></li>
<li><p>“data/processed_data/AlgarRestorationProject_30min_Independent_total_counts.csv”</p></li>
</ul>
<p>7 &amp; 8: A ‘site_month x species’ matrix of the number of independent detections and species counts across for each month in the study period:</p>
<ul>
<li><p>“data/processed_data/AlgarRestorationProject_30min_Monthly_total_observations.csv”</p></li>
<li><p>“data/processed_data/AlgarRestorationProject_30min_Monthly_total_counts.csv”</p></li>
</ul>
<p>9 &amp; 10: A ‘site_week x species’ matrix of the number of independent detections and species counts across for each week in the study period:</p>
<ul>
<li><p>“data/processed_data/AlgarRestorationProject_30min_Weekly_total_observations.csv”</p></li>
<li><p>“data/processed_data/AlgarRestorationProject_30min_Weekly_total_counts.csv”</p></li>
</ul>
<p>11 &amp; 12: A ‘site_day x species’ matrix of the number of independent detections and species counts across for each day a station was active in the study period:</p>
<ul>
<li><p>“data/processed_data/AlgarRestorationProject_30min_Daily_total_observations.csv”</p></li>
<li><p>“data/processed_data/AlgarRestorationProject_30min_Daily_total_counts.csv”</p></li>
</ul>
<p><strong>Final data check</strong></p>
<p>Finally, as a last check that our code is creating robust analysis data frames, we check if the observations/counts are the same across each temporal scale (total/monthly/weekly/daily). Check this using the following tables.</p>
<strong>Observations</strong>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Time
</th>
<th style="text-align:right;">
days
</th>
<th style="text-align:right;">
Alces alces
</th>
<th style="text-align:right;">
Canis latrans
</th>
<th style="text-align:right;">
Canis lupus
</th>
<th style="text-align:right;">
Cervus canadensis
</th>
<th style="text-align:right;">
Lepus americanus
</th>
<th style="text-align:right;">
Lontra canadensis
</th>
<th style="text-align:right;">
Lynx canadensis
</th>
<th style="text-align:right;">
Martes americana
</th>
<th style="text-align:right;">
Odocoileus virginianus
</th>
<th style="text-align:right;">
Oryctolagus cuniculus
</th>
<th style="text-align:right;">
Rangifer tarandus
</th>
<th style="text-align:right;">
Tamiasciurus hudsonicus
</th>
<th style="text-align:right;">
Ursus americanus
</th>
<th style="text-align:right;">
Vulpes vulpes
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Total
</td>
<td style="text-align:right;">
20350
</td>
<td style="text-align:right;">
176
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
93
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
241
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
562
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
119
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
228
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Monthly
</td>
<td style="text-align:right;">
20350
</td>
<td style="text-align:right;">
176
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
93
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
241
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
562
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
119
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
228
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Weekly
</td>
<td style="text-align:right;">
20350
</td>
<td style="text-align:right;">
176
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
93
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
241
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
562
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
119
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
228
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Daily
</td>
<td style="text-align:right;">
20350
</td>
<td style="text-align:right;">
176
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
93
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
241
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
562
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
119
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
228
</td>
<td style="text-align:right;">
10
</td>
</tr>
</tbody>
</table>
** Counts **
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Time
</th>
<th style="text-align:right;">
days
</th>
<th style="text-align:right;">
Alces alces
</th>
<th style="text-align:right;">
Canis latrans
</th>
<th style="text-align:right;">
Canis lupus
</th>
<th style="text-align:right;">
Cervus canadensis
</th>
<th style="text-align:right;">
Lepus americanus
</th>
<th style="text-align:right;">
Lontra canadensis
</th>
<th style="text-align:right;">
Lynx canadensis
</th>
<th style="text-align:right;">
Martes americana
</th>
<th style="text-align:right;">
Odocoileus virginianus
</th>
<th style="text-align:right;">
Oryctolagus cuniculus
</th>
<th style="text-align:right;">
Rangifer tarandus
</th>
<th style="text-align:right;">
Tamiasciurus hudsonicus
</th>
<th style="text-align:right;">
Ursus americanus
</th>
<th style="text-align:right;">
Vulpes vulpes
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Total
</td>
<td style="text-align:right;">
20350
</td>
<td style="text-align:right;">
180
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
94
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
243
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
53
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
579
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
124
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
236
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Monthly
</td>
<td style="text-align:right;">
20350
</td>
<td style="text-align:right;">
180
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
94
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
243
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
53
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
579
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
124
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
236
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Weekly
</td>
<td style="text-align:right;">
20350
</td>
<td style="text-align:right;">
180
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
94
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
243
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
53
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
579
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
124
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
236
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
Daily
</td>
<td style="text-align:right;">
20350
</td>
<td style="text-align:right;">
180
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
94
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
243
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
53
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
579
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
124
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
236
</td>
<td style="text-align:right;">
10
</td>
</tr>
</tbody>
</table>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="error-checking.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="covariates.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/02-error-checking.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Intro-to-data-analysis.pdf", "Intro-to-data-analysis.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
